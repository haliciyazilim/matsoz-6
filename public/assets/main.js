/*!
 * Paper.js v0.22
 *
 * This file is part of Paper.js, a JavaScript Vector Graphics Library,
 * based on Scriptographer.org and designed to be largely API compatible.
 * http://paperjs.org/
 * http://scriptographer.org/
 *
 * Copyright (c) 2011, Juerg Lehni & Jonathan Puckey
 * http://lehni.org/ & http://jonathanpuckey.com/
 *
 * Distributed under the MIT license. See LICENSE file for details.
 *
 * All rights reserved.
 *
 * Date: Thu Nov 10 19:19:25 2011 +0100
 *
 ***
 *
 * Bootstrap.js JavaScript Framework.
 * http://bootstrapjs.org/
 *
 * Copyright (c) 2006 - 2011 Juerg Lehni
 * http://lehni.org/
 *
 * Distributed under the MIT license.
 *
 ***
 *
 * Parse-js
 *
 * A JavaScript tokenizer / parser / generator, originally written in Lisp.
 * Copyright (c) Marijn Haverbeke <marijnh@gmail.com>
 * http://marijn.haverbeke.nl/parse-js/
 *
 * Ported by to JavaScript by Mihai Bazon
 * Copyright (c) 2010, Mihai Bazon <mihai.bazon@gmail.com>
 * http://mihai.bazon.net/blog/
 *
 * Modifications and adaptions to browser (c) 2011, Juerg Lehni
 * http://lehni.org/
 *
 * Distributed under the BSD license.
 */
//
function detectOrientation(){if(window["orientation"]==undefined)return;typeof window.onorientationchange!="undefined"&&(orientation==0?orientationWarningDialog!=null&&orientationWarningDialog.hide():orientation==90?(orientationWarningDialog==null&&(orientationWarningDialog=new OrientationWarningDialogBox),orientationWarningDialog.show(),detectOrientation()):orientation==-90?(orientationWarningDialog==null&&(orientationWarningDialog=new OrientationWarningDialogBox),orientationWarningDialog.show(),detectOrientation()):orientation==180&&orientationWarningDialog!=null&&orientationWarningDialog.hide())}function OrientationWarningDialogBox(){var e=document.createElement("div");e.className="dialogmaske dialogmaske_alert",document.body.appendChild(e);var t=document.createElement("div");t.id="dialog_box",t.dialog=this,t.className="dialoggolge",t.setAttribute("DialogId",this.id),document.body.appendChild(t),$(e).css({width:$("#container").width()+"px"}),$(t).css({position:"fixed",width:"390px",height:"140px",marginLeft:"-150px",marginTop:"-50px",padding:"30px",fontSize:"20px",lineHeight:"23px",color:"#f00",fontWeight:"bold",boxSizing:"border-box"}),$(t).html("Dikey pozisyon desteklenmemektedir. Lütfen cihazınızı yatay konuma getiriniz."),this.mask=e,this.dialog_box=t,this.show=function(){this.mask.style.display="block",this.dialog_box.style.display="block"},this.hide=function(){this.mask.style.display="none",this.dialog_box.style.display="none"}}function Compass(e,t){this.defaultX=e,this.defaultY=t,this.left=new Raster("compass_left_leg"),this.right=new Raster("compass_right_leg"),this.knuckle=new Raster("compass_knuckle"),this.R=this.left.size.height,this.group=new Group,this.group.addChild(this.left),this.group.addChild(this.right),this.group.addChild(this.knuckle),this.left.position=[e,t-this.left.size.height*.5],this.knuckle.position=[e+this.left.size.width*.5,t-this.left.size.height-this.knuckle.size.height*.5],this.right.position=[e+this.left.size.width,t-this.right.size.height*.5],this.d=this.right.position.x-this.left.position.x,this.remove=function(){this.left.remove(),this.right.remove(),this.knuckle.remove()},this.changeDelta=function(e){var t=Math.acos(this.d/(2*this.R)),n=Math.acos((this.d+e)/(2*this.R)),r=Util.radianToDegree(t)-Util.radianToDegree(n),i=this.R*(Math.sin(t)-Math.sin(n));this.left.rotate(r,[this.defaultX,this.defaultY]),this.right.rotate(-r,[this.defaultX+this.d,this.defaultY]),this.knuckle.position.y+=i,this.right.position.x+=e,this.knuckle.position.x+=e/2,this.d+=e},this.rotate=function(e,t){this.left.rotate(e,t),this.right.rotate(e,t),this.knuckle.rotate(e,t)}}function DecimalMultiplication(e,t,n,r){this.carpim1=e,this.carpim2=t,this.div="#"+n,this.fontSize=r,carpim1F=e,carpim2F=t,this.fontSize==undefined&&(this.fontSize=30);var i=this.fontSize*40/30;carpim1VirguldenSonraBasamak=0,carpim2VirguldenSonraBasamak=0;if(Util.isInteger(this.carpim1)==0){console.log("Util Çarpim1: "+this.carpim1);var s=this.carpim1.toString().split(".");this.carpim1=s[0]+""+s[1],e=s[0]+""+s[1],carpim1VirguldenSonraBasamak=s[1].length,console.log("Util Çarpim1: "+this.carpim1)}else this.carpim1=parseInt(this.carpim1,10),e=parseInt(e,10);if(Util.isInteger(this.carpim2)==0){var o=this.carpim2.toString().split(".");this.carpim2=o[0]+""+o[1],t=o[0]+""+o[1],carpim2VirguldenSonraBasamak=o[1].length}this.doldur=function(){$(this.div,container).append("<div id='carpim1' class='carpilan'>"),$(this.div+" #carpim1").css("top",this.fontSize*10/30).html();for(var e=0;e<this.carpim1.toString().length;e++){var n=this.carpim1.toString().length-e;$(this.div+" #carpim1",container).append("<span id='ilkBasamak"+n+"'>"),$(this.div+" #carpim1 #ilkBasamak"+n).html(this.carpim1.toString().charAt(e)),$(this.div+" #carpim1 #ilkBasamak"+n).addClass("ilkBasamakTek")}$(this.div,container).append("<div id='carpim2' class='carpilan'>"),$(this.div+" #carpim2").css("top",i).html();for(var e=0;e<this.carpim2.toString().length;e++){var n=this.carpim2.toString().length-e;$(this.div+" #carpim2",container).append("<span id='ikinciBasamak"+n+"'>"),$(this.div+" #carpim2 #ikinciBasamak"+n).html(this.carpim2.toString().charAt(e)),$(this.div+" #carpim2 #ikinciBasamak"+n).addClass("ikinciBasamakTek")}$(this.div,container).append("<div id='isaretCarpma'>"),$(this.div+" #isaretCarpma").css("width",this.fontSize*80/30).css("text-align","left").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize).css("border-bottom","solid 2px black").css("top",i).html("x"),$(this.div+" .carpilan").css("width","100%").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize),virgulFarki=carpim1VirguldenSonraBasamak-carpim2VirguldenSonraBasamak,virgulFarki>0?$(this.div+" #carpim2").css("right",this.fontSize*virgulFarki*18/30):virgulFarki<0&&$(this.div+" #carpim1").css("right",this.fontSize*18/30);for(var e=0;e<this.carpim2.toString().length;e++){var s=this.fontSize*(75+25*e)/30,o=this.fontSize*e*16/30,n=e+1;$(this.div,container).append("<div id='carpmaSonuc"+n+"'/>"),$(this.div+" #carpmaSonuc"+n).css("width","100px").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right",o).css("font-size",this.fontSize).css("top",s+"px").css("z-index","5");for(var u=4;u>=1;u--)$(this.div+" #carpmaSonuc"+n,container).append("<span id='carpmaSonuc"+n+"Basamak"+u+"'>"),$(this.div+" #carpmaSonuc"+n+" #carpmaSonuc"+n+"Basamak"+u).html(e),$(this.div+" #carpmaSonuc"+n+" #carpmaSonuc"+n+"Basamak"+u).addClass("basamakTek");$(this.div,container).append("<div id='elde"+n+"'/>"),$(this.div+" #elde"+n).css("width","100px").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right",o).css("font-size",this.fontSize).css("top",s+"px").css("z-index","5");for(var u=4;u>=1;u--)$(this.div+" #elde"+n,container).append("<span id='elde"+n+"Basamak"+u+"'>"),$(this.div+" #elde"+n+" #elde"+n+"Basamak"+u).html(0),$(this.div+" #elde"+n+" #elde"+n+"Basamak"+u).addClass("eldeBasamakTek");$(this.div,container).append("<div id='carpmaEldedenSonra"+n+"'/>"),$(this.div+" #carpmaEldedenSonra"+n).css("width","100px").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right",o).css("font-size",this.fontSize).css("top",s+"px").css("z-index","5");for(var u=4;u>=1;u--)$(this.div+" #carpmaEldedenSonra"+n,container).append("<span id='carpmaEldedenSonra"+n+"Basamak"+u+"'>"),$(this.div+" #carpmaEldedenSonra"+n+" #carpmaEldedenSonra"+n+"Basamak"+u).html(u),$(this.div+" #carpmaEldedenSonra"+n+" #carpmaEldedenSonra"+n+"Basamak"+u).addClass("basamakTek");if(e==t.toString().length-1){$(this.div,container).append("<div id='isaretToplama'>"),$(this.div+" #isaretToplama").css("width",this.fontSize*(80+e*20)/30+"px").css("text-align","left").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize).css("border-bottom","solid 2px black").css("top",s+"px").html("+").css("opacity","0"),$(this.div,container).append("<div id='toplamaSonuc'/>"),$(this.div+" #toplamaSonuc").css("width",120+(e-1)*16+"px").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize).css("top",s+this.fontSize*35/30+"px").css("z-index","5");var a=parseFloat(carpim1F*carpim2F).toFixed(carpim1VirguldenSonraBasamak+carpim2VirguldenSonraBasamak),f=a.toString().split(".");a=f[0]+f[1];for(var u=a.toString().length;u>=1;u--)$(this.div+" #toplamaSonuc",container).append("<span id='toplamaSonucBasamak"+u+"'>"),$(this.div+" #toplamaSonucBasamak"+u).html(e),$(this.div+" #toplamaSonucBasamak"+u).addClass("basamakTek");$(this.div,container).append("<div id='toplamaElde'/>"),$(this.div+" #toplamaElde").css("width","100px").css("text-align","right").css("height",r*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize).css("top",s+this.fontSize*35/30+"px").css("z-index","5");for(var u=a.toString().length;u>=1;u--)$(this.div+" #toplamaElde",container).append("<span id='toplamaEldeBasamak"+u+"'>"),$(this.div+" #toplamaEldeBasamak"+u).html(0),$(this.div+" #toplamaEldeBasamak"+u).addClass("eldeBasamakTek");$(this.div,container).append("<div id='toplamaEldedenSonra'/>"),$(this.div+" #toplamaEldedenSonra").css("width",120+(e-1)*16+"px").css("text-align","right").css("height",r*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize).css("top",s+35+"px").css("z-index","5").css("opacity","0");for(var u=a.toString().length;u>=1;u--)$(this.div+" #toplamaEldedenSonra",container).append("<span id='toplamaEldedenSonra"+u+"'>"),$(this.div+" #toplamaEldedenSonra"+u).html(0),$(this.div+" #toplamaEldedenSonra"+u).addClass("basamakTek")}}$(this.div+" .basamakTek").css("opacity","0"),$(this.div+" .eldeBasamakTek").css("opacity","0").css("position","absolute"),$(this.div+" #carpim1",container).append("<div id='virgul1' class='virgul'>"),$(this.div+" #carpim2",container).append("<div id='virgul2' class='virgul'>"),$(this.div+" #toplamaSonuc",container).append("<div id='virgul3' class='virgul'>"),$(this.div+" .virgul").css("position","absolute").css("height",this.fontSize*30/30).html(","),$(this.div+" #virgul1").css("top","1px"),$(this.div+" #virgul2").css("top","1px"),$(this.div+" #virgul3").css("top","1px").css("opacity","0"),t.toString().length==1&&$(this.div+" #virgul2").css("opacity","0");switch(carpim1VirguldenSonraBasamak){case 1:$(this.div+" #virgul1").css("right",this.fontSize*14/30);break;case 2:$(this.div+" #virgul1").css("right",this.fontSize*32/30);break;default:$(this.div+" #virgul1").css("right",this.fontSize*0/30).html("")}switch(carpim2VirguldenSonraBasamak){case 1:$(this.div+" #virgul2").css("right",this.fontSize*14/30);break;case 2:$(this.div+" #virgul2").css("right",this.fontSize*32/30)}virgulToplam=carpim1VirguldenSonraBasamak+carpim2VirguldenSonraBasamak;switch(virgulToplam){case 1:$(this.div+" #virgul3").css("right",this.fontSize*14/30);break;case 2:$(this.div+" #virgul3").css("right",this.fontSize*30/30);break;case 3:$(this.div+" #virgul3").css("right",this.fontSize*46/30)}virgulFark=carpim1VirguldenSonraBasamak-carpim2VirguldenSonraBasamak,Util.isInteger(t)==1?$(this.div+"#carpim2").css("margin-right",virgulFark*20+3):$(this.div+"#carpim2").css("margin-right",virgulFark*20)},this.basla=function(i,s){function l(h){var p=0,d=0;$("#"+n+" #ikinciBasamak"+h).animate({color:o},s);for(var v=1;v<=Interaction.carpim1BasamakSayisi;v++){Interaction.carpim1BasamakTek=e.toString().reverse().charAt(v-1),console.log("1. çarpan: "+Interaction.carpim1BasamakTek),Interaction.carpim2BasamakTek=t.toString().reverse().charAt(h-1),console.log("2. çarpan: "+Interaction.carpim2BasamakTek),Interaction.basamakSonuc=Interaction.carpim1BasamakTek*Interaction.carpim2BasamakTek,console.log("Sonuc: "+Interaction.basamakSonuc),$("#"+n+" #ilkBasamak"+v).delay(d).animate({color:o},s).delay(i).animate({color:u},s),console.log("Delay: "+(v+(h-1)*3)),console.log("i: "+h);if(Interaction.basamakSonuc<10){if($("#"+n+" #elde"+h+"Basamak"+v).html()!=0||$("#"+n+" #elde"+h+"Basamak"+v).html()!="0"){console.log("1 if(elde!=0)........................"),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(Interaction.basamakSonuc),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).delay(d+i).animate({opacity:"1",color:a},s).delay(i).animate({color:"#000000",opacity:"0"},s);var m=parseInt($("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(),10)+parseInt($("#"+n+" #elde"+h+"Basamak"+v).html(),10);console.log("#"+n+" #elde"+h+"Basamak"+v+" eldeli**************************"),console.log("sonucBasamak"+v+": "+parseInt($("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(),10)),console.log("elde"+v+": "+parseInt($("#"+n+" #elde"+h+"Basamak"+v).html(),10)),console.log("eldeCarpmaToplam: "+m);if(m>9){console.log("eldeCarpmaToplam'a giriliyor. 999999999999999999999999999");var g=parseInt($("#"+n+" #elde"+h+"Basamak"+(v+1)).html(),10),y=parseInt(m.toString().charAt(0),10);console.log("#"+n+" #elde"+h+"Basamak"+(v+1)+", "+g+", "+y),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+(v+1)).html(g+y),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).html(m.toString().charAt(1)),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).delay(d+s*3).animate({opacity:"1",color:a},s).animate({color:"#000000"},s),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+(v+1)).delay(d+s*3).animate({opacity:"1",color:a},s).animate({color:"#000000"},s)}else $("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).html(m),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).delay(d+s*3).animate({opacity:"1",color:a},s).animate({color:"#000000"},s)}else $("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(Interaction.basamakSonuc),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).delay(d+i).animate({opacity:"1",color:a},s).delay(i).animate({color:"#000000"},s);d+=s+i*2}else{console.log("1 else........................");var b=r*v*16/30+"px";$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(Interaction.basamakSonuc.toString().charAt(1)),$("#"+n+" #elde"+h+"Basamak"+(v+1)).html(Interaction.basamakSonuc.toString().charAt(0)).css("right",b),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).delay(d+i*2).animate({opacity:"1",color:a},s/5);if(v==3)console.log("1 if(p==3)........................"),$("#"+n+" #elde"+h+"Basamak"+(v+1)).delay(d+i*2).animate({opacity:"1",color:a},s/5).delay(i).animate({color:"#000000"},s);else{console.log("1 if(p==3) else........................");var w=r*(-30+(-15*h-1))/30+"px";$("#"+n+" #elde"+h+"Basamak"+(v+1)).delay(d+i*2).animate({opacity:"1",color:a},s).delay(i).animate({right:w,color:f},s).delay(i*2).animate({right:b,color:"#000000",opacity:"0"},s)}if($("#"+n+" #elde"+h+"Basamak"+v).html()!=0||$("#"+n+" #elde"+h+"Basamak"+v).html()!="0"){console.log("1 if(elde!=0)........................"),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).delay(i).animate({opacity:"0",color:a},s),console.log("#"+n+" #elde"+h+"Basamak"+v+" eldeli**************************");var m=parseInt($("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(),10)+parseInt($("#"+n+" #elde"+h+"Basamak"+v).html(),10);if(m>9){console.log("eldeCarpmaToplam'a giriliyor. 999999999999999999999999999");var g=parseInt($("#"+n+" #elde"+h+"Basamak"+(v+1)).html(),10),y=parseInt(m.toString().charAt(0),10);console.log("#"+n+" #elde"+h+"Basamak"+(v+1)+", "+g+", "+y),$("#"+n+" #elde"+h+"Basamak"+(v+1)).html(g+y),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).html(m.toString().charAt(1)),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).delay(d+s*3).animate({opacity:"1",color:a},s).animate({color:"#000000"},s)}else $("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).html(m),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).delay(d+s*3).animate({opacity:"1",color:a},s).animate({color:"#000000"},s)}else console.log("1 if(elde!=0) else........................"),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).delay(i).animate({color:"#000000"},s);d+=s+i*2+1500}}p+=d,console.log("zamanCizgisi: "+p),$("#"+n+" #ikinciBasamak"+h).delay(d-s*2).animate({color:u},s),t.length>1?h==1?(h++,setTimeout(function(){l(h)},p)):h==2?(h++,Interaction.carpim2BasamakSayisi==3?setTimeout(function(){l(h)},p):(console.log("girdim"),$("#"+n+" #isaretToplama").delay(p).animate({opacity:"1"},s),setTimeout(function(){c(p)},p))):(console.log("girdim"),$("#"+n+" #isaretToplama").delay(p).animate({opacity:"1"},s),setTimeout(function(){c(p)},p)):(console.log("virgülün açılması lazım "+n),$("#"+n+" #virgul3").css({top:-35}).delay(p).animate({opacity:"1"},1e3))}function c(){function t(){console.log("topalam1 girdi"),toplama1Sayac++,$("#"+n+" #carpmaSonuc1Basamak"+toplama1Sayac+", #"+n+" #elde1Basamak"+toplama1Sayac+" ,#"+n+" #carpmaEldedenSonra1Basamak"+toplama1Sayac).animate({color:o},s).delay(i).animate({color:u},s)}function r(){console.log("topalam2 girdi"),toplama2Sayac++,$("#"+n+" #carpmaSonuc2Basamak"+toplama2Sayac+", #"+n+" #elde2Basamak"+toplama2Sayac+" ,#"+n+" #carpmaEldedenSonra2Basamak"+toplama2Sayac).animate({color:o},s).delay(i).animate({color:u},s)}function a(){console.log("topalam3 girdi"),toplama3Sayac++,$("#"+n+" #carpmaSonuc3Basamak"+toplama3Sayac+", #"+n+" #elde3Basamak"+toplama3Sayac+" ,#"+n+" #carpmaEldedenSonra3Basamak"+toplama3Sayac).animate({color:o},s).delay(i).animate({color:u},s)}for(var e=1;e<=5;e++)console.log("xsx girdi"),setTimeout(t,2e3*e),setTimeout(r,2e3+2e3*e),setTimeout(a,4e3+2e3*e);toplama1Sayac=0,toplama2Sayac=0,toplama3Sayac=0;var f=parseFloat(carpim1F*carpim2F).toFixed(virgulToplam),l=f.toString().split(".");f=l[0]+l[1],console.log("wwwwwwwwwwwwwww: "+f.toString().length+", weeeeeeee: "+f+" c1: "+carpim1F+" c2: "+carpim2F);for(var c=1;c<=f.toString().length;c++){var h=f.toString().charAt(f.toString().length-c);$("#"+n+" #toplamaSonucBasamak"+c).html(h),$("#"+n+" #toplamaSonucBasamak"+c).delay(2e3*c).animate({opacity:"1"},s),console.log("sonuc L: "+f.toString().length+" t: "+c),c==f.toString().length&&(console.log("virgülün açılması lazım "+n),$("#"+n+" #virgul3").delay(2e3*c+1e3).animate({opacity:"1"},1e3))}}this.hizA=s,this.hizB=i;var o="#FF6600",u="#000000",a="#008000",f="#8C1717";Interaction.carpim1BasamakSayisi=this.carpim1.toString().length,Interaction.carpim2BasamakSayisi=this.carpim2.toString().length,setTimeout(function(){l(1)},1e3)}}function InputReverseWriteable(e){this.selectorIndex==undefined&&(this.selectorIndex=0),this.willSelectorBePlaced=!1;switch(e.keyCode){case 8:this.willSelectorBePlaced=!1,this.selectorIndex=0,this.value=this.value.substring(1);if(this.createTextRange){var t=this.createTextRange();return t.collapse(!0),t.moveEnd("character",this.selectorIndex),t.moveStart("character",this.selectorIndex),t.select(),!0}if(this.setSelectionRange)return this.setSelectionRange(this.selectorIndex,this.selectorIndex),!0;return e.preventDefault(),!1;case 37:this.selectorIndex>0&&this.selectorIndex--;break;case 39:this.selectorIndex<this.value.length&&this.selectorIndex++;break;default:this.willSelectorBePlaced=!0,this.selectorIndex>0&&this.selectorIndex--}$(this).keyup(function(){if(this.willSelectorBePlaced){if(this.createTextRange){var e=this.createTextRange();return e.collapse(!0),e.moveEnd("character",this.selectorIndex),e.moveStart("character",this.selectorIndex),e.select(),!0}if(this.setSelectionRange)return this.setSelectionRange(this.selectorIndex,this.selectorIndex),!0}})}function LongAddition(e,t,n,r){this.ilk=e.toString(),this.ikinci=t.toString(),console.log("ikinci değer: "+this.ikinci),console.log("İndex Of: "+this.ilk.indexOf(".")),this.floatKontrolu=this.ilk.indexOf(".");if(this.floatKontrolu==-1)this.ilkDeger=parseInt(e,10),this.ikinciDeger=parseInt(t,10);else{var i=this.ilk.split("."),s=this.ikinci.split(".");console.log(i),console.log(s),i[1].length<s[1].length?i[1]=i[1]+"0":i[1].length>s[1].length&&(s[1]=s[1]+"0"),console.log(i),console.log(s),this.ilkDeger=i[0]+i[1],this.ikinciDeger=s[0]+s[1]}this.div="#"+n,this.sonuc=parseInt(this.ilkDeger,10)+parseInt(this.ikinciDeger,10),$(this.div).css("color")!=undefined?this.color=$(this.div).css("color"):this.color="#000",this.fontSize=r,this.fontSize==undefined&&(this.fontSize=30),this.doldur=function(){$(this.div,container).append("<div id='toplanan1' class='toplanan'>"),$(this.div+" #toplanan1").css("top",this.fontSize*10/30).html();for(var e=0;e<this.ilkDeger.toString().length;e++){var t=this.ilkDeger.toString().length-e;$(this.div+" #toplanan1",container).append("<span id='ilkBasamak"+t+"'>"),$(this.div+" #toplanan1 #ilkBasamak"+t).html(this.ilkDeger.toString().charAt(e)),$(this.div+" #toplanan1 #ilkBasamak"+t).addClass("ilkBasamakTek")}$(this.div,container).append("<div id='toplanan2' class='toplanan'>"),$(this.div+" #toplanan2").css("top",this.fontSize*50/30).html();for(var e=0;e<this.ikinciDeger.toString().length;e++){var t=this.ikinciDeger.toString().length-e;$(this.div+" #toplanan2",container).append("<span id='ikinciBasamak"+t+"'>"),$(this.div+" #toplanan2 #ikinciBasamak"+t).html(this.ikinciDeger.toString().charAt(e)),$(this.div+" #toplanan2 #ikinciBasamak"+t).addClass("ikinciBasamakTek")}$(this.div,container).append("<div id='toplamaIsareti'>"),$(this.div+" #toplamaIsareti").css("width","100%").css("text-align","left").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("color",this.color).css("right","0px").css("font-size",this.fontSize*30/30).css("border-bottom","solid 2px black").css("borderColor",this.color).css("top",this.fontSize*60/30).html("+"),$(this.div+" .toplanan").css("width","100%").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("color",this.color).css("right","0px").css("font-size",this.fontSize*30/30),$(this.div,container).append("<div id='toplam' class='toplanan'>"),$(this.div+" #toplam").css("top",this.fontSize*100/30).html(),$(this.div,container).append("<div id='elde' class='toplanan'>"),$(this.div+" #elde").css("top",this.fontSize*100/30).html();for(var e=0;e<this.sonuc.toString().length;e++){var t=this.sonuc.toString().length-e;$(this.div+" #toplam",container).append("<span id='toplamBasamak"+t+"'>"),$(this.div+" #toplam #toplamBasamak"+t).addClass("toplamBasamakTek"),$(this.div+" #elde",container).append("<span id='eldeBasamak"+t+"'>"),$(this.div+" #elde #eldeBasamak"+t).addClass("eldeBasamakTek");if(t>3){var n=this.fontSize*(9*t*2-20+e+12)/30+"px";$(this.div+" #elde #eldeBasamak"+t).html(0).css("right",n)}else{var n=this.fontSize*(9*t*2-20+e)/30+"px";$(this.div+" #elde #eldeBasamak"+t).html(0).css("right",n)}}$(this.div+" #toplam .toplamBasamakTek").css("opacity","0"),$(this.div+" #elde .eldeBasamakTek").css("opacity","0").css("position","absolute"),$(this.div+" .toplanan").css("width","100%").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("color",this.color).css("right","0px").css("font-size",this.fontSize*30/30).css("z-index","4"),this.floatKontrolu==-1?$("#ilkBasamak3, #ikinciBasamak3, #toplamBasamak3, #eldeBasamak3").css("width",this.fontSize*30/30).css("display","inline-block"):($("#ilkBasamak2, #ikinciBasamak2, #toplamBasamak2, #eldeBasamak2").css("width",this.fontSize*30/30).css("display","inline-block"),$(this.div+" #toplanan1",container).append("<div id='virgul1' class='virgul'>"),$(this.div+" #toplanan2",container).append("<div id='virgul2' class='virgul'>"),$(this.div+" #toplam",container).append("<div id='virgul3' class='virgul'>"),$(this.div+" .virgul").css("position","absolute").css("height",this.fontSize*30/30).css("right",this.fontSize*35/30).html(","),$(this.div+" #virgul1").css("top","1px"),$(this.div+" #virgul2").css("top","1px"),$(this.div+" #virgul3").css("top","1px").css("opacity","0"))},this.basla=function(e,t,n){this.hizB=e,this.hizA=t;var r=0,i=this.ilkDeger.toString().length>this.ikinciDeger.toString().length==1?this.ilkDeger.toString().length:this.ikinciDeger.toString().length;console.log("uzunsayi: "+i),console.log("sonuc: "+this.sonuc);for(var s=1;s<=i;s++){$(this.div+" #ilkBasamak"+s).delay(e*s*2).animate({color:"#FF6600"},t).delay(e).animate({color:this.color},t),$(this.div+" #ikinciBasamak"+s).delay(e*s*2).animate({color:"#FF6600"},t).delay(e).animate({color:this.color},t);var o=parseInt($(this.div+" #ilkBasamak"+s).html())||0,u=parseInt($(this.div+" #ikinciBasamak"+s).html())||0,a=parseInt(o)+parseInt(u)+r;console.log("i: "+s);if(a>9&&s!=i){console.log("if"),$(this.div+" #elde #eldeBasamak"+(s+1)).html(a.toString().charAt(0)),$(this.div+" #toplam #toplamBasamak"+s).html(a.toString().charAt(1)),$(this.div+" #toplam #toplamBasamak"+s).delay(e*s*2).animate({opacity:"1"},t),this.floatKontrolu!=-1&&s==2?$(this.div+" #elde #eldeBasamak"+(s+1)).delay(e*s*2).animate({opacity:"1"},t).animate({bottom:this.fontSize*120/30,right:this.fontSize*48/30,color:"#8C1717"},t).delay(e).animate({opacity:"0"},t):$(this.div+" #elde #eldeBasamak"+(s+1)).delay(e*s*2).animate({opacity:"1"},t).animate({bottom:this.fontSize*120/30,color:"#8C1717"},t).delay(e).animate({opacity:"0"},t);var r=parseInt(a.toString().charAt(0));console.log("sonuc_"+s+": "+this.sonuc.toString().charAt(s))}else if(s==i)console.log("else if"),$(this.div+" #toplam #toplamBasamak"+s).html(a.toString()),$(this.div+" #toplam #toplamBasamak"+s).delay(e*s*2).animate({opacity:"1"},t),console.log("sonuc_"+s+": "+this.sonuc.toString().charAt(s)),$(this.div+" #virgul3").delay(e*s*2+1e3).animate({opacity:"1"},1e3,n);else{var f=this.sonuc.toString().length-s;console.log("elseye giriyor"),console.log("ilkbasamak: "+a.toString().charAt(0)),console.log("sonuc basamak: "+this.sonuc.toString().charAt(f)),$(this.div+" #toplam #toplamBasamak"+s).html(this.sonuc.toString().charAt(f)),$(this.div+" #toplam #toplamBasamak"+s).delay(e*s*2).animate({opacity:"1"},t),r=0}}}}function LongDivision(e,t,n){this.num=e+"",this.numLength=this.num.length,this.remainder=0,this.answer="",this.i=0,this.n=e,this.d=t,this.lastIndent=0,this.container=n,$(n).html('<div id="dividend"></div><div id="divisor"></div><div id="answer"></div>'),$(n).css({textAlign:"left"}),this.nodes={},this.fontSize=parseInt($(n).css("font-size"),10)+2,this.nodes.dividend=$("#dividend",n).html(this.num).css({width:"50%",borderRight:"1px solid #000",borderColor:$(n).css("color"),"float":"left",textAlign:"left",height:this.fontSize*2}).get(0),this.nodes.divisor=$("#divisor",n).html(this.d).css({width:"40%",borderBottom:"1px solid #000",borderColor:$(n).css("color"),"float":"left",paddingLeft:this.fontSize*.5,boxSizing:"border-box",textAlign:"left",height:this.fontSize}).get(0),this.nodes.answer=$("#answer",n).css({width:"40%","float":"left",paddingLeft:this.fontSize*.5,boxSizing:"border-box",textAlign:"left",height:this.fontSize}).get(0),$(this.nodes.dividend).height($(this.nodes.divisor).height()+$(this.nodes.answer).height()),$(this.nodes.answer).html(this.answer),this.nodes.steps=[]}function LongMultiplication(e,t,n,r){this.carpim1=e,this.carpim2=t,this.div="#"+n,this.fontSize=r,this.fontSize==undefined&&(this.fontSize=30);var i=this.fontSize*40/30;this.doldur=function(){$(this.div,container).append("<div id='carpim1' class='carpilan'>"),$(this.div+" #carpim1").css("top",this.fontSize*10/30).html();for(var e=0;e<this.carpim1.toString().length;e++){var n=this.carpim1.toString().length-e;$(this.div+" #carpim1",container).append("<span id='ilkBasamak"+n+"'>"),$(this.div+" #carpim1 #ilkBasamak"+n).html(this.carpim1.toString().charAt(e)),$(this.div+" #carpim1 #ilkBasamak"+n).addClass("ilkBasamakTek")}$(this.div,container).append("<div id='carpim2' class='carpilan'>"),$(this.div+" #carpim2").css("top",i).html();for(var e=0;e<this.carpim2.toString().length;e++){var n=this.carpim2.toString().length-e;$(this.div+" #carpim2",container).append("<span id='ikinciBasamak"+n+"'>"),$(this.div+" #carpim2 #ikinciBasamak"+n).html(this.carpim2.toString().charAt(e)),$(this.div+" #carpim2 #ikinciBasamak"+n).addClass("ikinciBasamakTek")}$(this.div,container).append("<div id='isaretCarpma'>"),$(this.div+" #isaretCarpma").css("width",this.fontSize*80/30).css("text-align","left").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize).css("border-bottom","solid 2px black").css("top",i).html("x"),$(this.div+" .carpilan").css("width","100%").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize);for(var e=0;e<this.carpim2.toString().length;e++){var s=this.fontSize*(75+25*e)/30,o=this.fontSize*e*16/30,n=e+1;$(this.div,container).append("<div id='carpmaSonuc"+n+"'/>"),$(this.div+" #carpmaSonuc"+n).css("width","100px").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right",o).css("font-size",this.fontSize).css("top",s+"px").css("z-index","5");for(var u=4;u>=1;u--)$(this.div+" #carpmaSonuc"+n,container).append("<span id='carpmaSonuc"+n+"Basamak"+u+"'>"),$(this.div+" #carpmaSonuc"+n+" #carpmaSonuc"+n+"Basamak"+u).html(e),$(this.div+" #carpmaSonuc"+n+" #carpmaSonuc"+n+"Basamak"+u).addClass("basamakTek");$(this.div,container).append("<div id='elde"+n+"'/>"),$(this.div+" #elde"+n).css("width","100px").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right",o).css("font-size",this.fontSize).css("top",s+"px").css("z-index","5");for(var u=4;u>=1;u--)$(this.div+" #elde"+n,container).append("<span id='elde"+n+"Basamak"+u+"'>"),$(this.div+" #elde"+n+" #elde"+n+"Basamak"+u).html(0),$(this.div+" #elde"+n+" #elde"+n+"Basamak"+u).addClass("eldeBasamakTek");$(this.div,container).append("<div id='carpmaEldedenSonra"+n+"'/>"),$(this.div+" #carpmaEldedenSonra"+n).css("width","100px").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right",o).css("font-size",this.fontSize).css("top",s+"px").css("z-index","5");for(var u=4;u>=1;u--)$(this.div+" #carpmaEldedenSonra"+n,container).append("<span id='carpmaEldedenSonra"+n+"Basamak"+u+"'>"),$(this.div+" #carpmaEldedenSonra"+n+" #carpmaEldedenSonra"+n+"Basamak"+u).html(u),$(this.div+" #carpmaEldedenSonra"+n+" #carpmaEldedenSonra"+n+"Basamak"+u).addClass("basamakTek");if(e==t.toString().length-1){$(this.div,container).append("<div id='isaretToplama'>"),$(this.div+" #isaretToplama").css("width",this.fontSize*(80+e*20)/30+"px").css("text-align","left").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize).css("border-bottom","solid 2px black").css("top",s+"px").html("+").css("opacity","0"),$(this.div,container).append("<div id='toplamaSonuc'/>"),$(this.div+" #toplamaSonuc").css("width",120+(e-1)*16+"px").css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize).css("top",s+this.fontSize*35/30+"px").css("z-index","5");var a=this.carpim1*this.carpim2;for(var u=a.toString().length;u>=1;u--)$(this.div+" #toplamaSonuc",container).append("<span id='toplamaSonucBasamak"+u+"'>"),$(this.div+" #toplamaSonucBasamak"+u).html(e),$(this.div+" #toplamaSonucBasamak"+u).addClass("basamakTek");$(this.div,container).append("<div id='toplamaElde'/>"),$(this.div+" #toplamaElde").css("width","100px").css("text-align","right").css("height",r*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize).css("top",s+this.fontSize*35/30+"px").css("z-index","5");for(var u=a.toString().length;u>=1;u--)$(this.div+" #toplamaElde",container).append("<span id='toplamaEldeBasamak"+u+"'>"),$(this.div+" #toplamaEldeBasamak"+u).html(0),$(this.div+" #toplamaEldeBasamak"+u).addClass("eldeBasamakTek");$(this.div,container).append("<div id='toplamaEldedenSonra'/>"),$(this.div+" #toplamaEldedenSonra").css("width",120+(e-1)*16+"px").css("text-align","right").css("height",r*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize).css("top",s+35+"px").css("z-index","5").css("opacity","0");for(var u=a.toString().length;u>=1;u--)$(this.div+" #toplamaEldedenSonra",container).append("<span id='toplamaEldedenSonra"+u+"'>"),$(this.div+" #toplamaEldedenSonra"+u).html(0),$(this.div+" #toplamaEldedenSonra"+u).addClass("basamakTek")}}$(this.div+" .basamakTek").css("opacity","0"),$(this.div+" .eldeBasamakTek"
).css("opacity","0").css("position","absolute")},this.basla=function(i,s){function l(h){var p=0,d=0;$("#"+n+" #ikinciBasamak"+h).animate({color:o},s);for(var v=1;v<=Interaction.carpim1BasamakSayisi;v++){Interaction.carpim1BasamakTek=e.toString().reverse().charAt(v-1),console.log("1. çarpan: "+Interaction.carpim1BasamakTek),Interaction.carpim2BasamakTek=t.toString().reverse().charAt(h-1),console.log("2. çarpan: "+Interaction.carpim2BasamakTek),Interaction.basamakSonuc=Interaction.carpim1BasamakTek*Interaction.carpim2BasamakTek,console.log("Sonuc: "+Interaction.basamakSonuc),$("#"+n+" #ilkBasamak"+v).delay(d).animate({color:o},s).delay(i).animate({color:u},s),console.log("Delay: "+(v+(h-1)*3)),console.log("i: "+h);if(Interaction.basamakSonuc<10){if($("#"+n+" #elde"+h+"Basamak"+v).html()!=0||$("#"+n+" #elde"+h+"Basamak"+v).html()!="0"){console.log("1 if(elde!=0)........................"),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(Interaction.basamakSonuc),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).delay(d+i).animate({opacity:"1",color:a},s).delay(i).animate({color:"#000000",opacity:"0"},s);var m=parseInt($("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(),10)+parseInt($("#"+n+" #elde"+h+"Basamak"+v).html(),10);console.log("#"+n+" #elde"+h+"Basamak"+v+" eldeli**************************"),console.log("sonucBasamak"+v+": "+parseInt($("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(),10)),console.log("elde"+v+": "+parseInt($("#"+n+" #elde"+h+"Basamak"+v).html(),10)),console.log("eldeCarpmaToplam: "+m);if(m>9){console.log("eldeCarpmaToplam'a giriliyor. 999999999999999999999999999");var g=parseInt($("#"+n+" #elde"+h+"Basamak"+(v+1)).html(),10),y=parseInt(m.toString().charAt(0),10);console.log("#"+n+" #elde"+h+"Basamak"+(v+1)+", "+g+", "+y),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+(v+1)).html(g+y),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).html(m.toString().charAt(1)),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).delay(d+s*3).animate({opacity:"1",color:a},s).animate({color:"#000000"},s),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+(v+1)).delay(d+s*3).animate({opacity:"1",color:a},s).animate({color:"#000000"},s)}else $("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).html(m),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).delay(d+s*3).animate({opacity:"1",color:a},s).animate({color:"#000000"},s)}else $("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(Interaction.basamakSonuc),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).delay(d+i).animate({opacity:"1",color:a},s).delay(i).animate({color:"#000000"},s);d+=s+i*2}else{console.log("1 else........................");var b=r*v*16/30+"px";$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(Interaction.basamakSonuc.toString().charAt(1)),$("#"+n+" #elde"+h+"Basamak"+(v+1)).html(Interaction.basamakSonuc.toString().charAt(0)).css("right",b),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).delay(d+i*2).animate({opacity:"1",color:a},s/5);if(v==3)console.log("1 if(p==3)........................"),$("#"+n+" #elde"+h+"Basamak"+(v+1)).delay(d+i*2).animate({opacity:"1",color:a},s/5).delay(i).animate({color:"#000000"},s);else{console.log("1 if(p==3) else........................");var w=r*(-30+(-15*h-1))/30+"px";$("#"+n+" #elde"+h+"Basamak"+(v+1)).delay(d+i*2).animate({opacity:"1",color:a},s).delay(i).animate({right:w,color:f},s).delay(i*2).animate({right:b,color:"#000000",opacity:"0"},s)}if($("#"+n+" #elde"+h+"Basamak"+v).html()!=0||$("#"+n+" #elde"+h+"Basamak"+v).html()!="0"){console.log("1 if(elde!=0)........................"),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).delay(i).animate({opacity:"0",color:a},s),console.log("#"+n+" #elde"+h+"Basamak"+v+" eldeli**************************");var m=parseInt($("#"+n+" #carpmaSonuc"+h+"Basamak"+v).html(),10)+parseInt($("#"+n+" #elde"+h+"Basamak"+v).html(),10);if(m>9){console.log("eldeCarpmaToplam'a giriliyor. 999999999999999999999999999");var g=parseInt($("#"+n+" #elde"+h+"Basamak"+(v+1)).html(),10),y=parseInt(m.toString().charAt(0),10);console.log("#"+n+" #elde"+h+"Basamak"+(v+1)+", "+g+", "+y),$("#"+n+" #elde"+h+"Basamak"+(v+1)).html(g+y),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).html(m.toString().charAt(1)),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).delay(d+s*3).animate({opacity:"1",color:a},s).animate({color:"#000000"},s)}else $("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).html(m),$("#"+n+" #carpmaEldedenSonra"+h+"Basamak"+v).delay(d+s*3).animate({opacity:"1",color:a},s).animate({color:"#000000"},s)}else console.log("1 if(elde!=0) else........................"),$("#"+n+" #carpmaSonuc"+h+"Basamak"+v).delay(i).animate({color:"#000000"},s);d+=s+i*2+1500}}p+=d,console.log("zamanCizgisi: "+p),$("#"+n+" #ikinciBasamak"+h).delay(d-s*2).animate({color:u},s),h==1?(h++,setTimeout(function(){l(h)},p)):h==2?(h++,Interaction.carpim2BasamakSayisi==3?setTimeout(function(){l(h)},p):(console.log("girdim"),$("#"+n+" #isaretToplama").delay(p).animate({opacity:"1"},s),setTimeout(function(){c(p)},p))):(console.log("girdim"),$("#"+n+" #isaretToplama").delay(p).animate({opacity:"1"},s),setTimeout(function(){c(p)},p))}function c(){function a(){console.log("topalam1 girdi"),toplama1Sayac++,$("#"+n+" #carpmaSonuc1Basamak"+toplama1Sayac+", #"+n+" #elde1Basamak"+toplama1Sayac+" ,#"+n+" #carpmaEldedenSonra1Basamak"+toplama1Sayac).animate({color:o},s).delay(i).animate({color:u},s)}function f(){console.log("topalam2 girdi"),toplama2Sayac++,$("#"+n+" #carpmaSonuc2Basamak"+toplama2Sayac+", #"+n+" #elde2Basamak"+toplama2Sayac+" ,#"+n+" #carpmaEldedenSonra2Basamak"+toplama2Sayac).animate({color:o},s).delay(i).animate({color:u},s)}function l(){console.log("topalam3 girdi"),toplama3Sayac++,$("#"+n+" #carpmaSonuc3Basamak"+toplama3Sayac+", #"+n+" #elde3Basamak"+toplama3Sayac+" ,#"+n+" #carpmaEldedenSonra3Basamak"+toplama3Sayac).animate({color:o},s).delay(i).animate({color:u},s)}for(var r=1;r<=5;r++)console.log("xsx girdi"),setTimeout(a,2e3*r),setTimeout(f,2e3+2e3*r),setTimeout(l,4e3+2e3*r);toplama1Sayac=0,toplama2Sayac=0,toplama3Sayac=0;var c=e*t;console.log("wwwwwwwwwwwwwww: "+c.toString().length+", weeeeeeee: "+c);for(var h=1;h<=c.toString().length;h++){var p=c.toString().charAt(c.toString().length-h);$("#"+n+" #toplamaSonucBasamak"+h).html(p),$("#"+n+" #toplamaSonucBasamak"+h).delay(2e3*h).animate({opacity:"1"},s)}}this.hizA=s,this.hizB=i;var o="#FF6600",u="#000000",a="#008000",f="#8C1717";Interaction.carpim1BasamakSayisi=this.carpim1.toString().length,Interaction.carpim2BasamakSayisi=this.carpim2.toString().length,setTimeout(function(){l(1)},1e3)}}function LongSubtraction(e,t,n,r){console.log("Ç1: "+e+", "+"Ç2: "+t),this.fontSize=r||30,console.log(this.fontSize),this.ilk=e.toString(),this.ikinci=t.toString(),this.floatKontrolu=this.ilk.indexOf(".");if(this.floatKontrolu==-1)this.cikan1=parseInt(e,10),this.cikan2=parseInt(t,10);else{var i=this.ilk.split("."),s=this.ikinci.split(".");console.log(i),console.log(s),i[1]||(i[1]="00"),s[1]||(s[1]="00"),i[1].length<s[1].length?i[1]=i[1]+"0":i[1].length>s[1].length&&(s[1]=s[1]+"0"),console.log(i),console.log(s),this.cikan1=i[0]+i[1],this.cikan2=s[0]+s[1],console.log(this.cikan1+", "+this.cikan2)}this.sonuc=this.cikan1-this.cikan2,console.log(this.sonuc),this.div="#"+n,$(this.div).css("color")!=undefined?this.color=$(this.div).css("color"):this.color="#000";var o="#FF6600",u=this.color,a="#878787";this.doldur=function(){$(this.div,container).append("<div id='cikan1' class='sonuc'>"),$(this.div+" #cikan1").css("top",this.fontSize*10/30).html();for(var e=0;e<this.cikan1.toString().length;e++){var t=this.cikan1.toString().length-e;$(this.div+" #cikan1",container).append("<span id='ilkBasamak"+t+"'>"),$(this.div+" #cikan1 #ilkBasamak"+t).html(this.cikan1.toString().charAt(e)),$(this.div+" #cikan1 #ilkBasamak"+t).addClass("ilkBasamakTek")}$(this.div,container).append("<div id='cikan2' class='sonuc'>"),$(this.div+" #cikan2").css("top",this.fontSize*50/30).html();for(var e=0;e<this.cikan2.toString().length;e++){var t=this.cikan2.toString().length-e;$(this.div+" #cikan2",container).append("<span id='ikinciBasamak"+t+"'>"),$(this.div+" #cikan2 #ikinciBasamak"+t).html(this.cikan2.toString().charAt(e)),$(this.div+" #cikan2 #ikinciBasamak"+t).addClass("ikinciBasamakTek")}$(this.div,container).append("<div id='cikarmaIslemi'>"),$(this.div+" #cikarmaIslemi").css("width",this.fontSize*120/30).css("text-align","left").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("color",this.color).css("right","0px").css("font-size",this.fontSize*30/30).css("border-bottom","solid 2px black").css("borderColor",this.color).css("top",this.fontSize*60/30).html("-"),$(this.div+" .sonuc").css("width",this.fontSize*100/30).css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("color",this.color).css("right","0px").css("font-size",this.fontSize*30/30),$(this.div,container).append("<div id='sonuc' class='sonuc'>"),$(this.div+" #sonuc").css("top",this.fontSize*100/30).html(),$(this.div,container).append("<div id='odunc' class='sonuc'>"),$(this.div+" #odunc").css("top",this.fontSize*10/30).html(),$(this.div,container).append("<div id='odunctenSonra' class='sonuc'>"),$(this.div+" #odunctenSonra").css("top",this.fontSize*10/30).html();var n=this.cikan1.toString().length-this.sonuc.toString().length;if(n!=0){var r="";for(var e=0;e<n;e++)r+="0";this.sonuc=r+this.sonuc.toString()}for(var e=0;e<this.cikan1.toString().length;e++){var t=this.cikan1.toString().length-e,i=this.sonuc.toString().charAt(e);$(this.div+" #sonuc",container).append("<span id='sonucBasamak"+t+"'>"),$(this.div+" #sonuc #sonucBasamak"+t).html(i),$(this.div+" #sonuc #sonucBasamak"+t).addClass("sonucBasamakTek")}for(var e=0;e<this.cikan1.toString().length;e++){var t=this.cikan1.toString().length-e;$(this.div+" #odunc",container).append("<span id='oduncBasamak"+t+"'>"),$(this.div+" #odunc #oduncBasamak"+t).addClass("oduncBasamakTek");var s=this.fontSize*(9*t*2-20+e)/30;$(this.div+" #odunc #oduncBasamak"+t).html(this.cikan1.toString().charAt(e)).css("right",s),$(this.div+" #odunctenSonra",container).append("<span id='odunctenSonraBasamak"+t+"'>"),$(this.div+" #odunctenSonra #odunctenSonraBasamak"+t).addClass("oduncBasamakTek"),$(this.div+" #odunctenSonra #odunctenSonraBasamak"+t).html(this.cikan1.toString().charAt(e)).css("right",s)}this.floatKontrolu==-1?$(this.div+" #cikan1 #ilkBasamak4"+","+this.div+" #cikan2 #ikinciBasamak4"+","+this.div+" #odunctenSonra #odunctenSonraBasamak4"+","+this.div+" #sonuc #sonucBasamak4").css("margin-right",this.fontSize*15/30):($(this.div+" #cikan1 #ilkBasamak3"+","+this.div+" #cikan2 #ikinciBasamak3"+","+this.div+" #odunctenSonra #odunctenSonraBasamak3"+","+this.div+" #odunc #oduncBasamak3"+","+this.div+" #sonuc #sonucBasamak3").css("margin-right",this.fontSize*15/30),$(this.div+" #cikan1",container).append("<div id='virgul1' class='virgul'>"),$(this.div+" #cikan2",container).append("<div id='virgul2' class='virgul'>"),$(this.div+" #sonuc",container).append("<div id='virgul3' class='virgul'>"),$(this.div+" .virgul").css("position","absolute").css("height",this.fontSize*30/30).css("right",this.fontSize*35/30).html(","),$(this.div+" #virgul1").css("top","1px"),$(this.div+" #virgul2").css("top","1px"),$(this.div+" #virgul3").css("top","1px").css("opacity","0")),$(this.div+" #odunc #oduncBasamak4").css("right",this.fontSize*67/30),$(this.div+" #odunc #oduncBasamak5").css("right",this.fontSize*83/30),$(this.div+" .sonucBasamakTek").css("opacity","0"),$(this.div+" .oduncBasamakTek").css("opacity","0").css("position","absolute"),$(this.div+" .sonuc").css("width",this.fontSize*100/30).css("text-align","right").css("height",this.fontSize*30/30).css("margin","auto").css("position","absolute").css("right","0px").css("font-size",this.fontSize*30/30).css("z-index","4")},this.basla=function(e,t,n){this.hizB=e,this.hizA=t;var r=0;console.log("ilk Sayaç: "+r);var i=this.cikan1.toString().length>this.cikan2.toString().length==1?this.cikan1.toString().length:this.cikan2.toString().length;console.log("uzunsayi: "+i);for(var s=1;s<=i;s++){var f=parseInt($(this.div+" #oduncBasamak"+s).html(),10),l=parseInt($(this.div+" #odunctenSonraBasamak"+s).html(),10),c=parseInt($(this.div+" #ilkBasamak"+s).html(),10),h=parseInt($(this.div+" #ikinciBasamak"+s).html(),10),p=f-h;if(f==c){console.log("*****************************************Eşit"),console.log("Sayaç: "+r);if(f>=h)console.log("*************************Eşit Odünc Büyük"),console.log("ÖdünçBasamak: "+f),console.log("İkinci Basamak: "+h),$(this.div+" #ilkBasamak"+s).delay(r).animate({color:o},this.hizA).delay(this.hizB).animate({color:u},this.hizA),$(this.div+" #ikinciBasamak"+s).delay(r).animate({color:o},this.hizA).delay(this.hizB).animate({color:u},this.hizA),$(this.div+" #sonuc #sonucBasamak"+s).delay(r+this.hizB).animate({opacity:"1"},t),r=r+this.hizB+this.hizA,console.log("Sayaç hesap 1: "+r);else if(f<h){console.log("*********************eşit Odünc küçük"),console.log("Sayaç: "+r),console.log("ÖdünçBasamak: "+f),console.log("İkinci Basamak: "+h);var d=0,v=new Array,m=parseInt($(this.div+" #oduncBasamak"+s).html(),10)||0,g=parseInt($(this.div+" #ikinciBasamak"+s).html(),10)||0,p=m-g;console.log("i: "+s);if(m<g){for(var y=0;y<this.cikan1.toString().length;y++){if(d>g)break;var b=$(this.div+" #ilkBasamak"+(s+y)).html();$(this.div+" #ilkBasamak"+(s+y)).delay(r).animate({color:a},this.hizA).delay(this.hizB*2).animate({color:u},this.hizA),console.log("Alinacak Basamak: "+b),v.unshift(b.toString()),console.log("Ödünç Alma: "+v),d=v.join(""),console.log("Ara basamak: "+d)}r=r+this.hizA+this.hizB,console.log("Sayaç Grileştirme: "+r);var w=d.toString().substring(0,d.toString().length-1);console.log("Ödünç Alinan Sayi"+w),oduncAldiktanSonrakiSayi=(parseInt(w,10)-1).toString(),console.log("Ödünç Alinan Sayi"+w);for(var E=1;E<=oduncAldiktanSonrakiSayi.length;E++){var S=oduncAldiktanSonrakiSayi.charAt(oduncAldiktanSonrakiSayi.length-E);$(this.div+" #odunc #oduncBasamak"+(s+E)).html(S),console.log("ilgili basamak"+S),$(this.div+" #odunc #oduncBasamak"+(s+E)).delay(r).animate({opacity:"1",bottom:this.fontSize*30/30},this.hizA)}$(this.div+" #odunctenSonra #odunctenSonraBasamak"+s).html("1"+$(this.div+" #odunc #oduncBasamak"+s).html()),$(this.div+" #odunctenSonra #odunctenSonraBasamak"+s).delay(r).animate({opacity:"1",bottom:this.fontSize*60/30,color:o},this.hizA).delay(this.hizB).animate({opacity:"0"},this.hizA),$(this.div+" #ikinciBasamak"+s).delay(r).animate({color:o},this.hizA).delay(this.hizB).animate({color:u},this.hizA),$(this.div+" #odunc #oduncBasamak"+s).delay(r).animate({opacity:"0"},t),$(this.div+" #sonuc #sonucBasamak"+s).delay(r+this.hizB).animate({opacity:"1"},t),r=r+this.hizA*2+this.hizB,console.log("Sayaç hesap 3: "+r)}}}if(f!=c){console.log("*****************************************Eşit değil"),console.log("Sayaç: "+r);if(f>=h)console.log("*****************eşit değil Odünc Büyük"),console.log("ÖdünçBasamak: "+f),console.log("İkinci Basamak: "+h),console.log("yanan ödünç basamaği: "+s+"iceriği"+$(this.div+" #oduncBasamak"+s).html()),w.lenght>2?$(this.div+" #oduncBasamak"+s).delay(r-this.hizB*4).animate({color:o},this.hizA).delay(this.hizB).animate({color:u},this.hizA).delay(this.hizB).animate({opacity:"0"},this.hizA):$(this.div+" #oduncBasamak"+s).delay(this.hizB).animate({color:o},this.hizA).delay(this.hizB).animate({color:u},this.hizA).delay(this.hizB).animate({opacity:"0"},this.hizA),$(this.div+" #ikinciBasamak"+s).delay(r-this.hizB).animate({color:o},this.hizA).delay(this.hizB).animate({color:u},this.hizA),$(this.div+" #sonuc #sonucBasamak"+s).delay(r+this.hizB).animate({opacity:"1"},this.hizA),r=r+this.hizA*2+this.hizB,console.log("Sayaç hesap 4: "+r);else if(f<h){console.log("***************esşit değil Odünc küçük"),console.log("ÖdünçBasamak: "+f),console.log("İkinci Basamak: "+h),console.log("Sayaç: "+r);var d=0,v=new Array,m=parseInt($(this.div+" #oduncBasamak"+s).html(),10)||0,g=parseInt($(this.div+" #ikinciBasamak"+s).html(),10)||0,p=m-g;console.log("i: "+s);if(m<g){for(var y=0;s<this.cikan1.toString().length;y++){if(d>g)break;var b=$(this.div+" #ilkBasamak"+(s+y)).html();$(this.div+" #ilkBasamak"+(s+y)).delay(r).animate({color:a},this.hizA),console.log("Alinacak Basamak: "+b),v.unshift(b.toString()),console.log("Ödünç Alma: "+v),d=v.join(""),console.log("Ara basamak: "+d)}r=r+this.hizA+this.hizB,console.log("Sayaç hesap 5: "+r);var w=d.toString().substring(0,d.toString().length-1);console.log("Ödünç Alinan Sayi"+w),oduncAldiktanSonrakiSayi=(parseInt(w,10)-1).toString(),console.log("Ödünç Alinan Sayi"+w);for(var E=1;E<=oduncAldiktanSonrakiSayi.length;E++){var S=oduncAldiktanSonrakiSayi.charAt(oduncAldiktanSonrakiSayi.length-E);$(this.div+" #odunc #oduncBasamak"+(s+E)).html(S),console.log("ilgili basamak"+S),$(this.div+" #odunc #oduncBasamak"+(s+E)).delay(r).animate({opacity:"1",bottom:this.fontSize*30/30},this.hizA)}$(this.div+" #odunctenSonra #odunctenSonraBasamak"+s).html("1"+$(this.div+" #odunc #oduncBasamak"+s).html()),$(this.div+" #odunctenSonra #odunctenSonraBasamak"+s).delay(r).animate({opacity:"1",bottom:this.fontSize*30/30,color:o},this.hizA).delay(this.hizB).animate({opacity:"0"},this.hizA),$(this.div+" #ikinciBasamak"+s).delay(r).animate({color:o},this.hizA).delay(this.hizB).animate({color:u},this.hizA),$(this.div+" #odunc #oduncBasamak"+s).delay(r-(this.hizA*2+this.hizB)).animate({opacity:"0"},t),$(this.div+" #sonuc #sonucBasamak"+s).delay(r+this.hizB).animate({opacity:"1"},t),r=r+this.hizA*2+this.hizB,console.log("Sayaç hesap 6: "+r)}}}s==i&&$(this.div+" #virgul3").delay(r+this.hizB).animate({opacity:"1"},1e3,n)}console.log("selma");for(var s=5;s>0;s--){if($(this.div+" #sonuc #sonucBasamak"+s).html()!="0")break;console.log("sonn basamak ife  girdi"),$(this.div+" #sonuc #sonucBasamak"+s).delay(this.hizB).animate({opacity:"0"},this.hizA)}}}function SingleLineMultiply(e){function a(e,t,n,r,i,s,o){var u=new PointText(e);return u.content=t,u.set_style(s),u.set_style(n),u.animate({style:r,duration:1e3,delay:i,callback:o,animationType:"easeInEaseOut"}),u}var t,n,r,i,s,o,u;t=e.position,n=e.delay,i=e.factor1,s=e.factor2,r=e.zero,o=e.textStyle,u=e.callback;var f=0,l=a(t,i,{opacity:0},{opacity:1},100+n,o);l.content=Util.groupNumber(l.content);var c=new Path.Rectangle(l.bounds);c.set_style({strokeColor:"#fff",strokeWidth:2}),f+=l.getWidth();var h=a(t.add(f,0),"",{opacity:0},{opacity:1},600+n,o);console.log("factor2: "+s),h.content=" × "+Util.groupNumber(""+s+""+r),console.log("t2.content: "+h.content),h.content=h.content.substring(0,h.content.length-r.length),f+=h.getWidth();var p=a(t.add(f,0),r,{opacity:0},{opacity:1},600+n,o,function(){this.animate({style:{opacity:0},duration:500,callback:function(){this.animate({style:{opacity:1,fillColor:new RgbColor(1,0,0,.9)},duration:500,delay:1500,callback:function(){this.animate({style:{fillColor:o.fillColor},duration:500,delay:500,callback:u})}})}})});f+=p.getWidth();var d=a(t.add(f,0)," = ",{opacity:0},{opacity:1},600+n,o);f+=d.getWidth();var v=a(t.add(f,0),i*s,{opacity:0},{opacity:1},2e3+n,o);v.content=Util.groupNumber(""+v.content+r),v.content=v.content.substring(0,v.content.length-r.length),f+=v.getWidth();var m=a(d.position,r,{opacity:0},{opacity:1,position:t.add(f,0),fillColor:new RgbColor(1,0,0)},4e3+n,o,function(){this.animate({style:{fillColor:o.fillColor},duration:500})})}function AnimationHelper(e){this.animate=Item.prototype.animate;for(var t in e)this[t]=e[t]}function Space(){this.m=this.createMatrixIdentity(),this.mStack=[]}function Shape(){this.points=[],this.polygons=[]}function Polygon(e,t,n,r,i){this.points=e,this.origin=new Point3(0,0,0);for(var s=0;s<this.points.length;s++)this.origin.x+=this.points[s].x,this.origin.y+=this.points[s].y,this.origin.z+=this.points[s].z;this.origin.x/=this.points.length,this.origin.y/=this.points.length,this.origin.z/=this.points.length,t?this.normal=new Point3(this.origin.x+t.x,this.origin.y+t.y,this.origin.z+t.z):this.normal=null,this.backface=n,this.type=r,this.color=i}function Scene(){this.shapes={},this.camera=new Point3(0,0,0),this.cameraTarget=new Point3(0,0,0),this.cameraRotation=0,this.drawlist=[]}function InteractionBase(){__Interaction_Base_Languages(),window.__Styles!==undefined&&__Styles(),window.__Languages!==undefined&&__Languages(),Interaction.__disableAutoInputFocus=!1,Interaction.inputs=[],Interaction.__isPaused=!1,Interaction.__inputVersion=0,Interaction.__status=function(e){switch(e){case Interaction.__status.WRONG:Interaction.setStatus(Language.getText("status.false"),!1);break;case Interaction.__status.FAIL:Interaction.setStatus(Language.getText("status.fail"),!1);break;case Interaction.__status.CORRECT:Interaction.setStatus(Language.getText("status.true"),!0);break;case Interaction.__status.FLOATING:Interaction.setStatus(Language.getText("status.numberFloating"),"alert");break;case Interaction.__status.EMPTY:Interaction.inputs.length>1?Interaction.setStatus(Language.getText("status.emptyInputs"),"alert"):Interaction.setStatus(Language.getText("status.emptyInput"),"alert");break;case Interaction.__status.NUMBER:Interaction.inputs.length>1?Interaction.setStatus(Language.getText("status.emptyNumbers"),"alert"):Interaction.setStatus(Language.getText("status.emptyNumber"),"alert")}},Interaction.__status.WRONG=1,Interaction.__status.FAIL=2,Interaction.__status.CORRECT=3,Interaction.__status.FLOATING=4,Interaction.__status.EMPTY=5,Interaction.__status.NUMBER=6,Interaction.setStatus=function(e,t){$(Interaction.status).html(e),t===!0?$(Interaction.status).get(0).className="status_true":t===!1?$(Interaction.status).get(0).className="status_false":t=="alert"?$(Interaction.status).get(0).className="status_alert":$(Interaction.status).get(0).className="status"},Interaction.appendStatus=function(e){Interaction.status=document.createElement("div"),$(Interaction.container).append(Interaction.status),$(Interaction.status).attr({"class":"status"}).css({position:"absolute"}),$(Interaction.status).css(e)},Interaction.appendInput=function(e,t,n){if(Interaction.__inputVersion==2)throw"You cannot use Interaction.appendInput after Interaction.addInput ";n==undefined&&(n=!1),Interaction.__inputVersion=1;if(t==undefined||t==null)t=!0;var r=Interaction.createInput(t,3);return r.setAttribute("isEmpty",n),$(r).css({position:"absolute"}),Interaction.inputs.length==0&&(Interaction.input=r),Interaction.inputs.push(r),$(Interaction.container).append(r),$(r).css(e),r},Interaction.addInput=function(e){if(Interaction.__inputVersion==1)throw"You cannot use Interaction.addInput after Interaction.appendInput";Interaction.__inputVersion=2;if(e.correctAnswer==undefined)throw"You have to define a correctAnswer object or value";var t=Interaction.createInput(e.isNumber,e.maxLength,e.css);return t.correctAnswer=e.correctAnswer,Interaction.inputs.push(t),t},Interaction.appendQuestion=function(e,t){return Interaction.questionDiv=document.createElement("div"),$(Interaction.container).append(Interaction.questionDiv),$(Interaction.questionDiv).html(e).css(t),Interaction.questionDiv},Interaction.setQuestionParams=function(e){Interaction.__questionParams=e,$(e).each(function(e,t){this.html&&$("#"+this.id,Interaction.questionDiv).html(this.html),this.value&&$("#"+this.id,Interaction.questionDiv).val(this.value)})},Interaction.getQuestionParams=function(){return Interaction.__questionParams},Interaction.createInput=function(e,t,n){var r=document.createElement("input");return e==1?(r.setAttribute("onkeypress","return Interaction.__inputFilter__onlyNumbers(event)"),r.setAttribute("isNumber","true")):r.setAttribute("isNumber","false"),r.setAttribute("type","text"),e==1&&Main.getCurrentPlatform()==Main.platform.MOBILE&&($(r).keydown(function(){this.setAttribute("type","text")}),$(r).focus(function(){this.setAttribute("type","number")})),$(r).attr({"class":"input",maxLength:t}).keyup(function(e){e.keyCode==13&&Interaction.button&&Interaction.button.click()}).css({fontSize:"16px"}),n&&$(r).css(n),$(r).css({width:parseInt($(r).css("font-size"),10)*(t*.5+.5)+"px",height:parseInt($(r).css("font-size"),10)*1.7+"px"}),n&&$(r).css(n),r},Interaction.flushInputs=function(){$(Interaction.inputs).each(function(e,t){$(this).remove()}),Interaction.inputs=[]},Interaction.appendButton=function(e){Interaction.button=document.createElement("input"),Interaction.button.setAttribute("type","button"),$(Interaction.container).append(Interaction.button),$(Interaction.button).attr({"class":"control_button"}).css({position:"absolute"}),$(Interaction.button).css(e)},Interaction.setRandomGenerator=function(e,t){isNaN(t)&&(t=0),Interaction.__randomGenerator={index:0,shuffledArray:Util.getShuffledArray(e,t),nextNumber:function(){Interaction.__randomGenerator.index=Interaction.__randomGenerator.index%Interaction.__randomGenerator.shuffledArray.length;var e=Interaction.__randomGenerator.shuffledArray[Interaction.__randomGenerator.index];return Interaction.__randomGenerator.index++,e}}},Interaction.prepareNextQuestion=function(){if(typeof Interaction.pause=="function"&&Interaction.isPaused()||Interaction.pause==1)return;Interaction.status&&Interaction.setStatus(""),Interaction.__inputVersion==2&&Interaction.flushInputs();for(i=0;i<Interaction.inputs.length;i++)Interaction.inputs[i]&&($(Interaction.inputs[i]).get(0).onkeydown=null,Interaction.inputs[i].value="",$(Interaction.inputs[i]).removeClass("input_user_answer_correct"),$(Interaction.inputs[i]).removeClass("input_user_answer_wrong"),$(Interaction.inputs[i]).removeClass("input_correct_answer"));Interaction.button&&(Interaction.button.className="control_button",Interaction.button.onclick=Interaction.__checkAnswer),Interaction.trial=0,Main.getCurrentPlatform()==Main.platform.DESKTOP&&Interaction.enableAutoFocus(),Interaction.__randomGenerator?Interaction.nextQuestion(Interaction.__randomGenerator.nextNumber()):Interaction.nextQuestion();if(Main.getCurrentPlatform()==Main.platform.DESKTOP)try{Interaction.__disableAutoInputFocus==0?Interaction.inputs[0].focus():Interaction._removeFocusFromInputs()}catch(e){}else Interaction._removeFocusFromInputs()},Interaction._removeFocusFromInputs=function(){for(var e=0;e<Interaction.inputs.length;e++)Interaction.inputs[e].blur()},Interaction.disableAutoFocus=function(){Interaction.__disableAutoInputFocus=!0},Interaction.enableAutoFocus=function(){Interaction.__disableAutoInputFocus=!1},Interaction.__checkAnswer=function(){if(typeof Interaction.pause=="function"&&Interaction.isPaused()||Interaction.pause==1)return;if(Interaction.preCheck&&Interaction.preCheck()===!1)return;var e;if(Interaction.__inputVersion==2){e=!0;for(var t=0;t<Interaction.inputs.length;t++){var n=Interaction.inputs[t].value;if($(Interaction.inputs[t]).val()==""){Interaction.__status(Interaction.__status.EMPTY);return}if(n==""||isNaN(n)&&n.indexOf(",")<0){Interaction.__status(Interaction.__status.NUMBER);return}if(n.indexOf(".")>0){Interaction.__status(Interaction.__status.FLOATING);return}var r;typeof Interaction.inputs[t].correctAnswer=="function"?r=n==Interaction.inputs[t].correctAnswer(n):r=n==Interaction.inputs[t].correctAnswer,$(Interaction.inputs[t]).get(0).onfocus=function(){$(this).removeClass("input_user_answer_correct"),$(this).removeClass("input_user_answer_wrong"),$(this).removeClass("input_correct_answer")},r===!0?$(Interaction.inputs[t]).addClass("input_user_answer_correct"):($(Interaction.inputs[t]).addClass("input_user_answer_wrong"),e=!1)}}else if(Interaction.inputs.length>=1){var i=[];for(var t=0;t<Interaction.inputs.length;t++){i[t]=Interaction.inputs[t].value;if(Interaction.inputs[t].getAttribute("isEmpty")=="false"&&$(Interaction.inputs[t]).val()==""){Interaction.__status(Interaction.__status.EMPTY);return}if(Interaction.inputs[t].getAttribute("isNumber")=="true"){if(isNaN(i[t])&&i[t].indexOf(",")<0){Interaction.__status(Interaction.__status.NUMBER);return}if(i[t].indexOf(".")>0){Interaction.__status(Interaction.__status.FLOATING);return}}}Interaction.inputs.length==1?e=Interaction.isAnswerCorrect(i[0]):e=Interaction.isAnswerCorrect(i)}else e=Interaction.isAnswerCorrect();e?(Interaction.__status(Interaction.__status.CORRECT),$(Interaction.inputs).each(function(e,t){$(this).get(0).onkeydown=function(e){if(e.keyCode!=13)return!1}}),Interaction.onCorrectAnswer&&Interaction.onCorrectAnswer()):Interaction.trial==0?(Interaction.__status(Interaction.__status.WRONG),Interaction.onWrongAnswer&&Interaction.onWrongAnswer()):($(Interaction.inputs).each(function(e,t){$(this).get(0).onfocus=null,$(this).get(0).onkeydown=function(e){if(e.keyCode!=13)return!1}}),Interaction.onFail&&Interaction.onFail());if(e||Interaction.trial>0)Interaction.button.onclick=Interaction.prepareNextQuestion,Interaction.button.className="next_button";Interaction.trial++},Interaction.__inputFilter__onlyNumbers=function(e,t){var n=function(e,t){if(t!=null)for(var n=0;n<t.length;n++)if(t[n]==String.fromCharCode(e))return!0;return!1},r=e.charCode==undefined?e.keyCode:e.charCode;return/^[0-9]+|,$/.test(String.fromCharCode(r))||r==0||r==13||n(r,t)?!0:!1},Interaction.pause=function(e){if(e==undefined||isNaN(e))e=0;e==0?Interaction.__isPaused=!0:setTimeout("Interaction.__isPaused = true",e)},Interaction.resume=function(e){if(e==undefined||isNaN(e))e=0;e==0?Interaction.__isPaused=!1:setTimeout("Interaction.__isPaused = false",e)},Interaction.isPaused=function(){return Interaction.__isPaused}}function __Interaction_Base_Languages(){Language.setText({"status.true":{TURKISH:"Tebrikler!",ENGLISH:"Congratulations!"},"status.false":{TURKISH:"Yanlış cevap, tekrar deneyiniz.",ENGLISH:"Wrong answer, try again."},"status.fail":{TURKISH:"Yanlış cevap, doğrusu yukarıda gösterilmiştir.",ENGLISH:"Wrong answer, the correct one is shown above."},"status.emptyInput":{TURKISH:"Lütfen kutucuğu doldurunuz.",ENGLISH:"Please fill all the boxes."},"status.emptyInputs":{TURKISH:"Lütfen tüm kutucukları doldurunuz.",ENGLISH:"Please fill all the boxes."},"status.emptyNumber":{TURKISH:"Lütfen bir sayı giriniz.",ENGLISH:"Please enter a number."},"status.emptyNumbers":{TURKISH:"Lütfen kutucuklara sayı giriniz.",ENGLISH:"Please enter numbers to boxes."},"status.numberFloating":{TURKISH:"Lütfen ondalıklı sayıları virgülle yazınız.",ENGLISH:"Please write floating numbers with dot."}})}function permute(e){function r(e){var i,s,o=e.split("");for(i=0;i<o.length;i++)s=o.splice(i,1),n.push(s),o.length==0&&(t[t.length]=n.join("")),r(o.join("")),o.splice(i,0,s),n.pop()}var t=[],n=[];return r(e),t}function Point3(e,t,n){this.x=e,this.y=t,this.z=n,this.tx,this.ty,this.tz,this.fx,this.fy}var Main=function(){navigator.appName=="Microsoft Internet Explorer"&&(console={log:function(){}}),$(document).ready(function(){try{Interaction&&Main.init()}catch(e){Main.initializeToolbar(),console.log("Interaction is not defined")}})};Main.platform={MOBILE:"Mobile",DESKTOP:"Desktop"},Main.getCurrentPlatform=function(){var e=navigator.userAgent;return e.indexOf("Mobile")>0||e.indexOf("Android")>0?Main.platform.MOBILE:Main.platform.DESKTOP},Main.config={defaultLibrary:"paper"},Main.startAnimation=function(){animationView.onFrame=function(e){Main.animationProject.activate(),View._focused=animationView,AnimationManager.update(e),typeof Animation.onFrame=="function"&&Animation.onFrame(e)};if(animationReady==0){animationReady=!0;return}Main.animationProject.activate(),View._focused=animationView,Animation.init(Main.animation),Main.startInteraction();try{__START_INTERACTION_IMMEDIATELY===!0&&Main.animationFinished()}catch(e){}},Main.animationFinished=function(e){e==undefined&&(e=100);if(Main.animationFinished.called==1)return;isNaN(e)||e==0?(Main.animationFinished.called=!0,Main.disposeInteractionSkipSlider()):setTimeout(function(){if(Main.animationFinished.called==1)return;Main.animationFinished.called=!0,Main.disposeInteractionSkipSlider()},e)},Main.disposeInteractionSkipSlider=function(){$("#interaction_cover").animate({opacity:0},500,function(){$(this).remove()})},Main.startInteraction=function(){interactionReady==0?interactionReady=!0:(Main.interactionProject.activate(),View._focused=interactionView,initializeRunLoop(),Interaction.init(Main.interaction))},Main.animateDefinition=function(){$(".tanim .definition").css({opacity:0}),$(".tanim .additional_info").css({opacity:0}),$(".tanim .definition").delay(500).animate({opacity:1},1e3),$(".tanim .additional_info").delay(1600).animate({opacity:1},1e3)},Main.init=function(){Main.initializeScreen(),Main.initializeNavigation(),Main.createInteractionSkipSlider(),Main.initializeToolbar(),Main.interaction=$(".etkilesimalan").get(0),Main.animation=$(".ornek").get(0),Main.objective=$(".mavikontrol").get(0),Language.init(Language.TURKISH);var e;typeof Interaction.getFramework=="function"?e=Interaction.getFramework():e=Main.config.defaultLibrary;if(e=="paper"){Main.scale=1,paper.
install(window),Main.paperInit();var t=$(Main.interaction).width(),n=$(Main.interaction).height();Main.interaction.innerHTML+="<canvas id='interaction_canvas' class='interaction_canvas' keepalive='true' width='"+t*Main.scale+"px' height='"+n*Main.scale+"px'></canvas>",canvas=$(".interaction_canvas").get(0),paper.setup(canvas),Main.interactionProject=paper.project,interactionView=paper.view,paper.defaultProject=Main.interactionProject;var r=$(Main.animation).width(),i=$(Main.animation).height();Main.animation.innerHTML+="<canvas id='animation_canvas' class='animation_canvas' keepalive='true' width='"+r*Main.scale+"px' height='"+i*Main.scale+"px'></canvas>",canvas=$(".animation_canvas").get(0),paper.setup(canvas),Main.animationProject=paper.project,animationView=paper.view,AnimationManager(),animationReady=!1,interactionReady=!1,Animation.images==null||Animation.images==undefined?Main.startAnimation():Util.loadImages(Animation.images,function(){Main.startAnimation()}),Interaction.images==null||Interaction.images==undefined?Main.startInteraction():Util.loadImages(Interaction.images,function(){Main.startInteraction()}),initializeRunLoop=function(){animationReady===!0&&interactionReady===!0&&(interactionView.onFrame=function(e){Main.interactionProject.activate(),View._focused=interactionView,AnimationManager.update(e),typeof Interaction.onFrame=="function"&&Interaction.onFrame(e)})},InteractionBase(),Main.animateDefinition();try{if(__START_INTERACTION_IMMEDIATELY!==!0)throw"";Main.startAnimation()}catch(s){setTimeout(Main.startAnimation,1e3)}}},Main.initializeScreen=function(){setTimeout(function(){window.scrollTo(0,1)},1)},Main.initializeNavigation=function(){var e=0,t=function(t){$(".navlink").removeClass("harfselected"),$('.navlink[data-letter="'+t+'"]').addClass("harfselected");var n=wordList[t],i="";for(r=0;r<n.length;r++)n[r].selected&&(e=r),i+="<a href="+n[r].link+" class='sozcuklink "+(n[r].selected?"sozcukselected":"")+"'>"+n[r].word+"</a>";$(".sozcuktasiyici").html(i)};$(".navlink").click(function(){t($(this).data("letter"))}),t(currentLetter);var n="abcçdefghıijklmnoöprsştuüvyz";for(var r=0;r<n.length;r++){var i=n[r];if(wordList[i].length==0){var s=i;s=="ç"?s="cc":s=="ğ"?s="gg":s=="ı"?s="ii":s=="ö"?s="oo":s=="ş"?s="ss":s=="ü"&&(s="uu"),$("#letter_"+s).addClass("harfpasif")}}var o=$(".sozcuktasiyici").get(0);e>11&&o.scrollByLines(e-11)},Main.setObjective=function(e){Main.objective.innerHTML=e},Main.createInteractionSkipSlider=function(){var e=document.createElement("div");$("#container").append(e),$(e).css({position:"absolute",paddingLeft:"-1px",top:"331px",left:"438px",width:"790px",height:"302px",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)",overflow:"hidden",backgroundImage:"url(/assets/skip_screen.png)",backgroundRepeat:"no-repeat",backgroundPosition:"-100px -9px","-moz-user-select":"-moz-none","-khtml-user-select":"none","-webkit-user-select":"none","-ms-user-select":"none","user-select":"none"}),e.id="interaction_cover";var t=!1,n=!0,r=0,i=function(e){e.preventDefault(),console.log(e);if(n!=1)return;return t=!0,r=e.pageX,!1},s=function(n){n.preventDefault();if(t==1){var i=n.pageX-r;i=i<0?"0":i,$(e).css({backgroundPosition:i-100+"px -9px"})}return!1},o=function(i){i.preventDefault();if(t==0)return;t=!1;var s=i.pageX-r;return s=s<0?"0":s,console.log("[up] change: "+s,i),s>100?(n=!1,$(e).animate({backgroundPosition:"700px -9px"},250,function(){$(this).remove()})):(n=!1,$(e).animate({backgroundPosition:"-100px -9px"},250,function(){n=!0})),!1};$(e).mousedown(i),$(e).mousemove(s),$(e).mouseup(o),$(e).mouseout(o),$(e).bind("touchmove",function(e){try{e.pageX=e.originalEvent.touches[0].pageX}catch(t){}s(e)}),$(e).bind("touchstart",function(e){try{e.pageX=e.originalEvent.touches[0].pageX}catch(t){}i(e)}),$(e).bind("touchend",function(e){try{e.pageX=e.originalEvent.changedTouches[0].pageX}catch(t){}o(e)})},Main.initializeToolbar=function(e){Main.InfoDialog=new Dialog({title:"Information"});var t="/resources/matsoz_manuel/matsoz_manuel.htm",n="/resources/about_us/about_us.htm";try{exportedPage&&indexPage&&(t="resources/matsoz_manuel/matsoz_manuel.htm",n="resources/about_us/about_us.htm")}catch(r){}Main.InfoDialog.addContent("Program Hakkında",'<iframe src="'+n+'" style="width: 100%; height: 99%; border: none; padding: 0px; box-sizing: border-box; overflow: hidden; margin: 0px;"></iframe>'),Main.InfoDialog.addContent("Kullanıcı Kılavuzu",'<iframe src="'+t+'" style="width: 100%; height: 99%; border: none; padding: 0px; box-sizing: border-box; overflow: hidden; margin: 0px;"></iframe>'),$(".btn_home").click(function(e){try{exportedPage&&(indexpage?window.location="../intro/index.html":window.location="../../intro/index.html")}catch(t){window.location="../"}}),$(".btn_info").click(function(e){Main.InfoDialog.show()}),$(".btn_print").click(function(e){window.print()})},Main();var orientationWarningDialog=null;window.onorientationchange=detectOrientation,$(document).ready(detectOrientation),function(){var e=!1,t=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;this.Class=function(){},Class.extend=function(n){function o(){!e&&this.init&&this.init.apply(this,arguments)}var r=this.prototype;e=!0;var i=new this;e=!1;for(var s in n)i[s]=typeof n[s]=="function"&&typeof r[s]=="function"&&t.test(n[s])?function(e,t){return function(){var n=this._super;this._super=r[e];var i=t.apply(this,arguments);return this._super=n,i}}(s,n[s]):n[s];return o.prototype=i,o.prototype.constructor=o,o.extend=arguments.callee,o}}();var Dialog=Class.extend({init:function(e){this.id=Dialog.GetId();var t=document.createElement("div");t.className="dialogmaske",document.body.appendChild(t);var n=document.createElement("div");n.id="dialog_box",n.dialog=this,n.className="dialoggolge",n.setAttribute("DialogId",this.id),document.body.appendChild(n),$(n).append('<a href="#" id="kapat" onclick="Dialog.CloseDialogWithId('+this.id+')"></a>');var r=document.createElement("div");r.className="dialog_tab_bar",n.appendChild(r);var i=document.createElement("div");i.className="dialog_content",n.appendChild(i),this.dialog_box=n,this.dialog_tab_bar=r,this.dialog_content=i,this.mask=t,this.tabs=[],this.hide()},addContent:function(e,t){var n=document.createElement("div");n.className="dialog_tab_title",n.innerHTML=e,n.setAttribute("onclick","Dialog.openTabInDialog('"+e+"','"+this.id+"')");var r=document.createElement("div");r.className="dialog_tab_content",r.innerHTML=t,n.content=r,this.tabs.push(n),$(this.dialog_tab_bar).append(n),$(this.dialog_content).append(r),Dialog.openTabInDialog(this.tabs[0].innerHTML,this.id)},setTitle:function(e){this.dialog_title.innerHTML=e+' <div style="float:right;"><a href="#" onclick="Dialog.CloseDialogWithId('+this.id+')"><img src="/assets/theme/blue/ui_img/cancel.png" alt="Kapat"></a></div>'},show:function(){this.dialog_box.style.display="block",this.mask.style.display="block"},hide:function(){this.dialog_box.style.display="none",this.mask.style.display="none"}});Dialog.GetId=function(){return Dialog.__currentId||(Dialog.__currentId=1),Dialog.__currentId++},Dialog.CloseDialogWithId=function(e){console.log(e),$('*[DialogId="'+e+'"]').get(0).dialog.hide()},Dialog.openTabInDialog=function(e,t){var n=$('*[DialogId="'+t+'"]').get(0).dialog;console.log(n.tabs);for(var r=0;r<n.tabs.length;r++)console.log("I'm here"),n.tabs[r].innerHTML==e?($(n.tabs[r]).removeClass("dialog_passive_tab"),$(n.tabs[r]).addClass("dialog_active_tab"),$(n.tabs[r].content).show()):($(n.tabs[r]).removeClass("dialog_active_tab"),$(n.tabs[r]).addClass("dialog_passive_tab"),$(n.tabs[r].content).hide())};var Surface=function(e){this.points=e,this.rotationsX=[],this.pivotsX=[],this.rotationsY=[],this.pivotsY=[],this.rotationsZ=[],this.pivotsZ=[],this.clearRotations=function(){this.pivotsX=[],this.rotationsX=[],this.pivotsY=[],this.rotationsY=[],this.pivotsZ=[],this.rotationsZ=[]},this.remove=function(){this.projectedSurface&&this.projectedSurface.remove()},this.project=function(e){this.projectedSurface&&this.projectedSurface.remove();var t=new Path,n=this.get2DPoints(e);for(var r=0;r<n.length;r++)t.add(n[r]);return t.closed=!0,this.shape&&(t.strokeColor=this.shape.strokeColor,t.fillColor=this.shape.fillColor,t.strokeWidth=this.shape.strokeWidth,t.opacity=this.shape.opacity),this.projectedSurface=t,t.surface=this,t},this.get2DPoints=function(e){var t=[];for(var n=0;n<this.points.length;n++){var r=this.points[n];for(i=0;i<this.rotationsY.length;i++)r=Util.rotateY(this.rotationsY[i],r,this.pivotsY[i]);for(i=0;i<this.rotationsZ.length;i++)r=Util.rotateZ(this.rotationsZ[i],r,this.pivotsZ[i]);for(var i=0;i<this.rotationsX.length;i++)r=Util.rotateX(this.rotationsX[i],r,this.pivotsX[i]);var s=Util.project(r,e);s.x=Math.floor(s.x)+.5,s.y=Math.floor(s.y)+.5,t.push(s)}return t}},ExpandableShape=Class.extend({delay:0,opacity:1,init:function(e){this.matrix=e,this.animate=Item.prototype.animate,this.set_style=Item.prototype.set_style,this.fillColor=new RgbColor(.75,.91,.94,.7),this.strokeColor="#255b63",this.strokeWidth=1},setSurfaces:function(e){this.surfaces=e;for(var t in this.surfaces)this.surfaces.hasOwnProperty(t)&&this.surfaces[t]instanceof Surface&&(this.surfaces[t].shape=this)},transform:function(e){for(var t in this.surfaces)if(this.surfaces.hasOwnProperty(t)&&this.surfaces[t]instanceof Surface)for(var n=0;n<this.surfaces[t].points.length;n++)this.surfaces[t].points[n]=this.surfaces[t].points[n].add(e)},clearRotations:function(){for(var e in this.surfaces)this.surfaces.hasOwnProperty(e)&&this.surfaces[e]instanceof Surface&&this.surfaces[e].clearRotations()},setRotationX:function(e,t){t||(t=new Point3(0,0,0));for(var n in this.surfaces)this.surfaces.hasOwnProperty(n)&&this.surfaces[n]instanceof Surface&&(this.surfaces[n].pivotsX[0]=t,this.surfaces[n].rotationsX[0]=e)},setRotationY:function(e,t){t||(t=new Point3(0,0,0));for(var n in this.surfaces)this.surfaces.hasOwnProperty(n)&&this.surfaces[n]instanceof Surface&&(this.surfaces[n].pivotsY[0]=t,this.surfaces[n].rotationsY[0]=e)},remove:function(){for(var e in this.surfaces)this.surfaces.hasOwnProperty(e)&&this.surfaces[e]instanceof Surface&&this.surfaces[e].remove()},setRotationZ:function(e,t){t||(t=new Point3(0,0,0));for(var n in this.surfaces)this.surfaces.hasOwnProperty(n)&&this.surfaces[n]instanceof Surface&&(this.surfaces[n].pivotsZ[0]=t,this.surfaces[n].rotationsZ[0]=e)},project:function(){var e=new Group;for(var t in this.surfaces)this.surfaces.hasOwnProperty(t)&&this.surfaces[t]instanceof Surface&&e.addChild(this.surfaces[t].project(this.matrix));return e},rotateSurfaceX:function(e,t,n,r){var i=this,s=new AnimationHelper({angle:0});s.animate({style:{angle:t},duration:800,delay:this.delay,animationType:"easeInEaseOut",init:function(){n==undefined&&n==null?e.pivotsX.push(new Point3(0,0,0)):e.pivotsX.push(n)},update:function(){e.rotationsX[e.pivotsX.length-1]=this.angle,i.project()}}),r||(this.delay+=1e3)},rotateSurfaceY:function(e,t,n,r){var i=this,s=new AnimationHelper({angle:0});s.animate({style:{angle:t},duration:800,delay:this.delay,animationType:"easeInEaseOut",init:function(){n==undefined&&n==nil?e.pivotsY.push(new Point3(0,0,0)):e.pivotsY.push(n)},update:function(){e.rotationsY[e.pivotsY.length-1]=this.angle,i.project()}}),r||(this.delay+=1e3)},rotateSurfaceZ:function(e,t,n,r){var i=this,s=new AnimationHelper({angle:0});s.animate({style:{angle:t},duration:800,delay:this.delay,animationType:"easeInEaseOut",init:function(){n==undefined&&n==nil?e.pivotsZ.push(new Point3(0,0,0)):e.pivotsZ.push(n)},update:function(){e.rotationsZ[e.pivotsZ.length-1]=this.angle,i.project()}}),r||(this.delay+=1e3)}}),ExpandableEquilateralPrism=ExpandableShape.extend({init:function(e,t,n,r){this._super(r),e/=1,t/=2,n/=2,this.setSurfaces({backSurface:new Surface([new Point3(-e,t,0),new Point3(0,t,n),new Point3(0,-t,n),new Point3(-e,-t,0)]),bottomSurface:new Surface([new Point3(0,t,-n),new Point3(e,t,0),new Point3(0,t,n),new Point3(-e,t,0)]),rightSurface:new Surface([new Point3(e,t,0),new Point3(0,t,n),new Point3(0,-t,n),new Point3(e,-t,0)]),leftSurface:new Surface([new Point3(0,-t,-n),new Point3(-e,-t,0),new Point3(-e,t,0),new Point3(0,t,-n)]),topSurface:new Surface([new Point3(0,-t,-n),new Point3(e,-t,0),new Point3(0,-t,n),new Point3(-e,-t,0)]),frontSurface:new Surface([new Point3(0,-t,-n),new Point3(e,-t,0),new Point3(e,t,0),new Point3(0,t,-n)])})},showSurfaces:function(e,t){var n=function(n,r,i){AnimationManager.delay(function(){var t=new Path,o=n.get2DPoints(r);for(var u=0;u<o.length;u++)t.add(o[u]);t.closed=!0,t.set_style(animationSurfacesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:t.remove})},t)},r=0;n(this.surfaces.bottomSurface,this.matrix,r++),n(this.surfaces.leftSurface,this.matrix,r++),n(this.surfaces.topSurface,this.matrix,r++),n(this.surfaces.backSurface,this.matrix,r++),n(this.surfaces.rightSurface,this.matrix,r++),n(this.surfaces.frontSurface,this.matrix,r++)},showVertexes:function(e,t){t==undefined&&(t=0);var n=function(n,r){var i=new AnimationHelper({});i.animate({style:{},duration:0,delay:t,init:function(){var t=new AnimationHelper({shape:null,opacity:0});t.animate({style:{opacity:1},duration:0,delay:e*r,update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:function(){this.shape.remove()},update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],s);for(;o<i.length;o++,s++)new n(i[o],s)},showEdges:function(e,t){t==undefined&&(t=0);var n=function(n,r,i){var s=new AnimationHelper({});s.animate({style:{},duration:0,delay:t,init:function(){var t=new Path.Line(n,r);t.set_style(animationEdgesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},duration:e,delay:e*14,callback:t.remove})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],r[(s+1)%r.length],s);for(;o<i.length;o++,s++)new n(i[o],i[(o+1)%i.length],s);for(;u<i.length;u++,s++)new n(r[3-u],i[u],s)},expand:function(e){this.rotateSurfaceX(this.surfaces.topSurface,-Math.PI/2,this.surfaces.topSurface.points[2]),this.rotateSurfaceY(this.surfaces.rightSurface,-Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.leftSurface,Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceX(this.surfaces.bottomSurface,Math.PI/2,this.surfaces.bottomSurface.points[0])},contract:function(e){this.rotateSurfaceX(this.surfaces.bottomSurface,-Math.PI/2,this.surfaces.bottomSurface.points[0]),this.rotateSurfaceY(this.surfaces.leftSurface,-Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.rightSurface,Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceX(this.surfaces.topSurface,Math.PI/2,this.surfaces.topSurface.points[2])}}),ExpandableParallelogramPrism=ExpandableShape.extend({init:function(e,t,n,r){this._super(r),e/=2,t/=2,n/=2,equilateral=-20,skew=50,this.setSurfaces({backSurface:new Surface([new Point3(-e,t,n),new Point3(e+skew,t,n),new Point3(e+skew,-t,n),new Point3(-e,-t,n)]),bottomSurface:new Surface([new Point3(-e,t,n),new Point3(e+skew,t,n),new Point3(e+equilateral+skew,t,-n),new Point3(-e+equilateral,t,-n)]),leftSurface:new Surface([new Point3(-e+equilateral,-t,-n),new Point3(-e,-t,n),new Point3(-e,t,n),new Point3(-e+equilateral,t,-n)]),rightSurface:new Surface([new Point3(e+equilateral+skew,t,-n),new Point3(e+skew,t,n),new Point3(e+skew,-t,n),new Point3(e+equilateral+skew,-t,-n)]),topSurface:new Surface([new Point3(-e+equilateral,-t,-n),new Point3(e+equilateral+skew,-t,-n),new Point3(e+skew,-t,n),new Point3(-e,-t,n)]),frontSurface:new Surface([new Point3(-e+equilateral,-t,-n),new Point3(e+equilateral+skew,-t,-n),new Point3(e+equilateral+skew,t,-n),new Point3(-e+equilateral,t,-n)])})},showSurfaces:function(e,t){var n=function(n,r,i){AnimationManager.delay(function(){var t=new Path,o=n.get2DPoints(r);for(var u=0;u<o.length;u++)t.add(o[u]);t.closed=!0,t.set_style(animationSurfacesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:t.remove})},t)},r=0;n(this.surfaces.bottomSurface,this.matrix,r++),n(this.surfaces.leftSurface,this.matrix,r++),n(this.surfaces.topSurface,this.matrix,r++),n(this.surfaces.backSurface,this.matrix,r++),n(this.surfaces.rightSurface,this.matrix,r++),n(this.surfaces.frontSurface,this.matrix,r++)},showVertexes:function(e,t){t==undefined&&(t=0);var n=function(n,r){var i=new AnimationHelper({});i.animate({style:{},duration:0,delay:t,init:function(){var t=new AnimationHelper({shape:null,opacity:0});t.animate({style:{opacity:1},duration:0,delay:e*r,update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:function(){this.shape.remove()},update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],s);for(;o<i.length;o++,s++)new n(i[o],s)},showEdges:function(e,t){t==undefined&&(t=0);var n=function(n,r,i){var s=new AnimationHelper({});s.animate({style:{},duration:0,delay:t,init:function(){var t=new Path.Line(n,r);t.set_style(animationEdgesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},duration:e,delay:e*14,callback:t.remove})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],r[(s+1)%r.length],s);for(;o<i.length;o++,s++)new n(i[o],i[(o+1)%i.length],s);for(;u<i.length;u++,s++)new n(r[3-u],i[u],s)},expand:function(e){this.rotateSurfaceX(this.surfaces.topSurface,-Math.PI/2,this.surfaces.topSurface.points[2]),this.rotateSurfaceY(this.surfaces.rightSurface,-Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.leftSurface,Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceX(this.surfaces.bottomSurface,Math.PI/2,this.surfaces.bottomSurface.points[0])},contract:function(e){this.rotateSurfaceX(this.surfaces.bottomSurface,-Math.PI/2,this.surfaces.bottomSurface.points[0]),this.rotateSurfaceY(this.surfaces.leftSurface,-Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.rightSurface,Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceX(this.surfaces.topSurface,Math.PI/2,this.surfaces.topSurface.points[2])}}),ExpandablePrism=ExpandableShape.extend({init:function(e,t,n,r){this._super(r),e/=2,t/=2,n/=2,this.setSurfaces({backSurface:new Surface([new Point3(-e,t,n),new Point3(e,t,n),new Point3(e,-t,n),new Point3(-e,-t,n)]),bottomSurface:new Surface([new Point3(-e,t,n),new Point3(e,t,n),new Point3(e,t,-n),new Point3(-e,t,-n)]),leftSurface:new Surface([new Point3(-e,-t,-n),new Point3(-e,-t,n),new Point3(-e,t,n),new Point3(-e,t,-n)]),rightSurface:new Surface([new Point3(e,t,-n),new Point3(e,t,n),new Point3(e,-t,n),new Point3(e,-t,-n)]),topSurface:new Surface([new Point3(-e,-t,-n),new Point3(e,-t,-n),new Point3(e,-t,n),new Point3(-e,-t,n)]),frontSurface:new Surface([new Point3(-e,-t,-n),new Point3(e,-t,-n),new Point3(e,t,-n),new Point3(-e,t,-n)])})},showSurfaces:function(e,t){var n=function(n,r,i){AnimationManager.delay(function(){var t=new Path,o=n.get2DPoints(r);for(var u=0;u<o.length;u++)t.add(o[u]);t.closed=!0,t.set_style(animationSurfacesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:t.remove})},t)},r=0;n(this.surfaces.bottomSurface,this.matrix,r++),n(this.surfaces.leftSurface,this.matrix,r++),n(this.surfaces.topSurface,this.matrix,r++),n(this.surfaces.backSurface,this.matrix,r++),n(this.surfaces.rightSurface,this.matrix,r++),n(this.surfaces.frontSurface,this.matrix,r++)},showVertexes:function(e,t){t==undefined&&(t=0);var n=function(n,r){var i=new AnimationHelper({});i.animate({style:{},duration:0,delay:t,init:function(){var t=new AnimationHelper({shape:null,opacity:0});t.animate({style:{opacity:1},duration:0,delay:e*r,update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:function(){this.shape.remove()},update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],s);for(;o<i.length;o++,s++)new n(i[o],s)},showEdges:function(e,t){t==undefined&&(t=0);var n=function(n,r,i){var s=new AnimationHelper({});s.animate({style:{},duration:0,delay:t,init:function(){var t=new Path.Line(n,r);t.set_style(animationEdgesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},duration:e,delay:e*14,callback:t.remove})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],r[(s+1)%r.length],s);for(;o<i.length;o++,s++)new n(i[o],i[(o+1)%i.length],s);for(;u<i.length;u++,s++)new n(r[3-u],i[u],s)},expand:function(e){this.rotateSurfaceX(this.surfaces.topSurface,-Math.PI/2,this.surfaces.topSurface.points[2]),this.rotateSurfaceY(this.surfaces.rightSurface,-Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.leftSurface,Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceX(this.surfaces.bottomSurface,Math.PI/2,this.surfaces.bottomSurface.points[0])},contract:function(e){this.rotateSurfaceX(this.surfaces.bottomSurface,-Math.PI/2,this.surfaces.bottomSurface.points[0]),this.rotateSurfaceY(this.surfaces.leftSurface,-Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.rightSurface,Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceX(this.surfaces.topSurface,Math.PI/2,this.surfaces.topSurface.points[2])}}),ExpandableSkewedPrism=ExpandableShape.extend({init:function(e,t,n,r,i){this._super(i),e/=2,t/=2,n/=2,this.setSurfaces({backSurface:new Surface([new Point3(-e,t,n),new Point3(e,t,n),new Point3(e+t*r,-t,n),new Point3(-e+t*r,-t,n)]),bottomSurface:new Surface([new Point3(-e,t,n),new Point3(e,t,n),new Point3(e,t,-n),new Point3(-e,t,-n)]),leftSurface:new Surface([new Point3(-e+t*r,-t,-n),new Point3(-e+t*r,-t,n),new Point3(-e,t,n),new Point3(-e,t,-n)]),rightSurface:new Surface([new Point3(e,t,-n),new Point3(e,t,n),new Point3(e+t*r,-t,n),new Point3(e+t*r,-t,-n)]),topSurface:new Surface([new Point3(-e+t*r,-t,-n),new Point3(e+t*r,-t,-n),new Point3(e+t*r,-t,n),new Point3(-e+t*r,-t,n)]),frontSurface:new Surface([new Point3(-e+t*r,-t,-n),new Point3(e+t*r,-t,-n),new Point3(e,t,-n),new Point3(-e,t,-n)])})},showSurfaces:function(e,t){var n=function(n,r,i){AnimationManager.delay(function(){var t=new Path,o=n.get2DPoints(r);for(var u=0;u<o.length;u++)t.add(o[u]);t.closed=!0,t.set_style(animationSurfacesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:t.remove})},t)},r=0;n(this.surfaces.bottomSurface,this.matrix,r++),n(this.surfaces.leftSurface,this.matrix,r++),n(this.surfaces.topSurface,this.matrix,r++),n(this.surfaces.backSurface,this.matrix,r++),n(this.surfaces.rightSurface,this.matrix,r++),n(this.surfaces.frontSurface,this.matrix,r++)},showVertexes:function(e,t){t==undefined&&(t=0);var n=function(n,r){var i=new AnimationHelper({});i.animate({style:{},duration:0,delay:t,init:function(){var t=new AnimationHelper({shape:null,opacity:0});t.animate({style:{opacity:1},duration:0,delay:e*r,update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:function(){this.shape.remove()},update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],s);for(;o<i.length;o++,s++)new n(i[o],s)},showEdges:function(e,t){t==undefined&&(t=0);var n=function(n,r,i){var s=new AnimationHelper({});s.animate({style:{},duration:0,delay:t,init:function(){var t=new Path.Line(n,r);t.set_style(animationEdgesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},duration:e,delay:e*14,callback:t.remove})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],r[(s+1)%r.length],s);for(;o<i.length;o++,s++)new n(i[o],i[(o+1)%i.length],s);for(;u<i.length;u++,s++)new n(r[3-u],i[u],s)},expand:function(e){this.rotateSurfaceX(this.surfaces.topSurface,-Math.PI/2,this.surfaces.topSurface.points[2]),this.rotateSurfaceY(this.surfaces.rightSurface,-Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.leftSurface,Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceX(this.surfaces.bottomSurface,Math.PI/2,this.surfaces.bottomSurface.points[0])},contract:function(e){this.rotateSurfaceX(this.surfaces.bottomSurface,-Math.PI/2,this.surfaces.bottomSurface.points[0]),this.rotateSurfaceY(this.surfaces.leftSurface,-Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.rightSurface,Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceX(this.surfaces.topSurface,Math.PI/2,this.surfaces.topSurface.points[2])}}),ExpandablePrisimPyramid=ExpandableShape.extend({init:function(e,t,n,r){this._super(r),this.width=e,this.height=t,this.length=n,e/=2,t/=2,n/=2,this.setSurfaces({backSurface:new Surface([new Point3(-e,t,n),new Point3(e,t,n),new Point3(0,-t,0)]),bottomSurface:new Surface([new Point3(-e,t,n),new Point3(e,t,n),new Point3(e,t,-n),new Point3(-e,t,-n)]),leftSurface:new Surface([new Point3(0,-t,0),new Point3(-e,t,n),new Point3(-e,t,-n)]),rightSurface:new Surface([new Point3(e,t,-n),new Point3(e,t,n),new Point3(0,-t,0)]),frontSurface:new Surface([new Point3(0,-t,0),new Point3(e,t,-n),new Point3(-e,t,-n)])})},showSurfaces:function(e,t){var n=function(n,r,i){AnimationManager.delay(function(){var t=new Path,o=n.get2DPoints(r);for(var u=0;u<o.length;u++)t.add(o[u]);t.closed=!0,t.set_style(animationSurfacesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:t.remove})},t)},r=0;n(this.surfaces.bottomSurface,this.matrix,r++),n(this.surfaces.leftSurface,this.matrix,r++),n(this.surfaces.backSurface,this.matrix,r++),n(this.surfaces.rightSurface,this.matrix,r++),n(this.surfaces.frontSurface,this.matrix,r++)},showVertexes:function(e,t){t==undefined&&(t=0);var n=function(n,r){var i=new AnimationHelper({});i.animate({style:{},duration:0,delay:t,init:function(){var t=new AnimationHelper({shape:null,opacity:0});t.animate({style:{opacity:1},duration:0,delay:e*r,update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:function(){this.shape.remove()},update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],s);for(;o<i.length;o++,s++)new n(i[o],s)},showEdges:function(e,t){t==undefined&&(t=0);var n=function(n,r,i){var s=new AnimationHelper({});s.animate({style:{},duration:0,delay:t,init:function(){var t=new Path.Line(n,r);t.set_style(animationEdgesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},duration:e,delay:e*14,callback:t.remove})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],r[(s+1)%r.length],s);for(;o<i.length;o++,s++)new n(i[o],i[(o+1)%i.length],s);for(;u<i.length;u++,s++)new n(r[2-u],i[u],s)},expand:function(e){var t=Math.atan(this.width/this.height/2)+Math.PI/2,n=Math.atan(this.length/this.height/2)+Math.PI/2,r=new Point3(0,0,0);this.rotateSurfaceZ(this.surfaces.rightSurface,t,this.surfaces.rightSurface.points[0],!1),this.rotateSurfaceX(this.surfaces.backSurface,-n,this.surfaces.backSurface.points[0],!1),this.rotateSurfaceZ(this.surfaces.leftSurface,-t,this.surfaces.leftSurface.points[1],!1),this.rotateSurfaceX(this.surfaces.frontSurface,n,this.surfaces.frontSurface.points[1],!1),this.rotateSurfaceX(this.surfaces.rightSurface,Math.PI/2,r,!0),this.rotateSurfaceX(this.surfaces.leftSurface,Math.PI/2,r,!0),this.rotateSurfaceX(this.surfaces.frontSurface,Math.PI/2,r,!0),this.rotateSurfaceX(this.surfaces.backSurface
,Math.PI/2,r,!0),this.rotateSurfaceX(this.surfaces.bottomSurface,Math.PI/2,r)},contract:function(){var e=Math.atan(this.width/this.height/2)+Math.PI/2,t=Math.atan(this.length/this.height/2)+Math.PI/2,n=new Point3(0,0,0);this.rotateSurfaceX(this.surfaces.rightSurface,-Math.PI/2,n,!0),this.rotateSurfaceX(this.surfaces.leftSurface,-Math.PI/2,n,!0),this.rotateSurfaceX(this.surfaces.frontSurface,-Math.PI/2,n,!0),this.rotateSurfaceX(this.surfaces.backSurface,-Math.PI/2,n,!0),this.rotateSurfaceX(this.surfaces.bottomSurface,-Math.PI/2,n),this.rotateSurfaceX(this.surfaces.frontSurface,-t,this.surfaces.frontSurface.points[1],!1),this.rotateSurfaceZ(this.surfaces.leftSurface,e,this.surfaces.leftSurface.points[1],!1),this.rotateSurfaceX(this.surfaces.backSurface,t,this.surfaces.backSurface.points[0],!1),this.rotateSurfaceZ(this.surfaces.rightSurface,-e,this.surfaces.rightSurface.points[0],!1)}}),ExpandableRectangularPrism=ExpandableShape.extend({init:function(e,t,n,r){this._super(r),e/=1,t/=2,n/=2,this.setSurfaces({backSurface:new Surface([new Point3(-e,t,n),new Point3(e,t,n),new Point3(e,-t,n),new Point3(-e,-t,n)]),bottomSurface:new Surface([new Point3(-e,t,n),new Point3(e,t,n),new Point3(e,t,-n),new Point3(-e,t,-n)]),leftSurface:new Surface([new Point3(-e,-t,-n),new Point3(-e,-t,n),new Point3(-e,t,n),new Point3(-e,t,-n)]),rightSurface:new Surface([new Point3(e,t,-n),new Point3(e,t,n),new Point3(e,-t,n),new Point3(e,-t,-n)]),topSurface:new Surface([new Point3(-e,-t,-n),new Point3(e,-t,-n),new Point3(e,-t,n),new Point3(-e,-t,n)]),frontSurface:new Surface([new Point3(-e,-t,-n),new Point3(e,-t,-n),new Point3(e,t,-n),new Point3(-e,t,-n)])})},showSurfaces:function(e,t){var n=function(n,r,i){AnimationManager.delay(function(){var t=new Path,o=n.get2DPoints(r);for(var u=0;u<o.length;u++)t.add(o[u]);t.closed=!0,t.set_style(animationSurfacesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:t.remove})},t)},r=0;n(this.surfaces.bottomSurface,this.matrix,r++),n(this.surfaces.leftSurface,this.matrix,r++),n(this.surfaces.topSurface,this.matrix,r++),n(this.surfaces.backSurface,this.matrix,r++),n(this.surfaces.rightSurface,this.matrix,r++),n(this.surfaces.frontSurface,this.matrix,r++)},showVertexes:function(e,t){t==undefined&&(t=0);var n=function(n,r){var i=new AnimationHelper({});i.animate({style:{},duration:0,delay:t,init:function(){var t=new AnimationHelper({shape:null,opacity:0});t.animate({style:{opacity:1},duration:0,delay:e*r,update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:function(){this.shape.remove()},update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],s);for(;o<i.length;o++,s++)new n(i[o],s)},showEdges:function(e,t){t==undefined&&(t=0);var n=function(n,r,i){var s=new AnimationHelper({});s.animate({style:{},duration:0,delay:t,init:function(){var t=new Path.Line(n,r);t.set_style(animationEdgesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},duration:e,delay:e*14,callback:t.remove})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],r[(s+1)%r.length],s);for(;o<i.length;o++,s++)new n(i[o],i[(o+1)%i.length],s);for(;u<i.length;u++,s++)new n(r[3-u],i[u],s)},expand:function(e){this.rotateSurfaceX(this.surfaces.topSurface,-Math.PI/2,this.surfaces.topSurface.points[2]),this.rotateSurfaceY(this.surfaces.rightSurface,-Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.leftSurface,Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceX(this.surfaces.bottomSurface,Math.PI/2,this.surfaces.bottomSurface.points[0])},contract:function(e){this.rotateSurfaceX(this.surfaces.bottomSurface,-Math.PI/2,this.surfaces.bottomSurface.points[0]),this.rotateSurfaceY(this.surfaces.leftSurface,-Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.rightSurface,Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceX(this.surfaces.topSurface,Math.PI/2,this.surfaces.topSurface.points[2])}}),ExpandableShapeTetrahedron=ExpandableShape.extend({init:function(e,t){this._super(t),e/=2,this.size=e,this.setSurfaces({backSurface:new Surface([new Point3(e*Math.sqrt(3)/2,e*Math.sqrt(2)/3,e/2),new Point3(-e*Math.sqrt(3)/2,e*Math.sqrt(2)/3,e/2),new Point3(0,-2*e*Math.sqrt(2)/3,0)]),bottomSurface:new Surface([new Point3(-e*Math.sqrt(3)/2,e*Math.sqrt(2)/3,e/2),new Point3(e*Math.sqrt(3)/2,e*Math.sqrt(2)/3,e/2),new Point3(0,e*Math.sqrt(2)/3,-e)]),leftSurface:new Surface([new Point3(-e*Math.sqrt(3)/2,e*Math.sqrt(2)/3,e/2),new Point3(0,e*Math.sqrt(2)/3,-e),new Point3(0,-2*e*Math.sqrt(2)/3,0)]),rightSurface:new Surface([new Point3(e*Math.sqrt(3)/2,e*Math.sqrt(2)/3,e/2),new Point3(0,-2*e*Math.sqrt(2)/3,0),new Point3(0,e*Math.sqrt(2)/3,-e)])})},showSurfaces:function(e,t){var n=function(n,r,i){AnimationManager.delay(function(){var t=new Path,o=n.get2DPoints(r);for(var u=0;u<o.length;u++)t.add(o[u]);t.closed=!0,t.set_style(animationSurfacesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:t.remove})},t)},r=0;n(this.surfaces.bottomSurface,this.matrix,r++),n(this.surfaces.leftSurface,this.matrix,r++),n(this.surfaces.backSurface,this.matrix,r++),n(this.surfaces.rightSurface,this.matrix,r++)},showVertexes:function(e,t){t==undefined&&(t=0);var n=function(n,r){var i=new AnimationHelper({});i.animate({style:{},duration:0,delay:t,init:function(){var t=new AnimationHelper({shape:null,opacity:0});t.animate({style:{opacity:1},duration:0,delay:e*r,update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:function(){this.shape.remove()},update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}})}})},r=this.surfaces.bottomSurface.get2DPoints(this.matrix),i=this.surfaces.leftSurface.get2DPoints(this.matrix)[2],s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],s);new n(i,s)},showEdges:function(e,t){t==undefined&&(t=0);var n=function(n,r,i){var s=new AnimationHelper({});s.animate({style:{},duration:0,delay:t,init:function(){var t=new Path.Line(n,r);t.set_style(animationEdgesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},duration:e,delay:e*14,callback:t.remove})}})},r=this.surfaces.bottomSurface.get2DPoints(this.matrix),i=this.surfaces.leftSurface.get2DPoints(this.matrix)[2],s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],r[(s+1)%r.length],s);for(;o<r.length;o++,s++)new n(r[o],i,s)},expand:function(e){switch(e){case 0:default:var t=Math.PI-Math.atan(4*Math.sqrt(2)),n=Math.PI*5/6-Math.acos(Math.sqrt(3)/6),r=new Point3(this.size*Math.sqrt(3)/4,this.size*Math.sqrt(2)/3,-this.size/4),i=new AnimationHelper({rotation:0,rotation2:0,rotation3:0});this.rightSurfacePoint=this.surfaces.rightSurface.points[1],this.backSurfacePoint=this.surfaces.backSurface.points[2],this.leftSurfacePoint=this.surfaces.leftSurface.points[2];var s=this;i.animate({style:{rotation:t},duration:900,delay:this.delay,animationType:"easeInEaseOut",update:function(){s.surfaces.rightSurface.points[1]=s.rightSurfacePoint.getRotatedPointByX(this.rotation,r),s.surfaces.rightSurface.points[1]=s.surfaces.rightSurface.points[1].getRotatedPointByY(-n,r),s.project()}});var o=new Point3(0,this.size*Math.sqrt(2)/3,this.size/2),u=Math.asin(1/3)+Math.PI/2;i.animate({style:{rotation2:u},duration:900,delay:this.delay+1e3,animationType:"easeInEaseOut",update:function(){s.surfaces.backSurface.points[2]=s.backSurfacePoint.getRotatedPointByX(-this.rotation2,o),s.project()}});var a=new Point3(-this.size*Math.sqrt(3)/4,this.size*Math.sqrt(2)/3,-this.size/4);i.animate({style:{rotation3:t},duration:900,delay:this.delay+2e3,animationType:"easeInEaseOut",update:function(){s.surfaces.leftSurface.points[2]=s.leftSurfacePoint.getRotatedPointByX(this.rotation3,a),s.surfaces.leftSurface.points[2]=s.surfaces.leftSurface.points[2].getRotatedPointByY(n,a),s.project()}}),this.delay+=3e3;var f=new Point3(0,0,0);this.rotateSurfaceX(this.surfaces.rightSurface,Math.PI/2,f,!0),this.rotateSurfaceX(this.surfaces.backSurface,Math.PI/2,f,!0),this.rotateSurfaceX(this.surfaces.leftSurface,Math.PI/2,f,!0),this.rotateSurfaceX(this.surfaces.bottomSurface,Math.PI/2,f,!0)}},contract:function(){var e=new Point3(0,0,0);this.rotateSurfaceX(this.surfaces.rightSurface,-Math.PI/2,e,!0),this.rotateSurfaceX(this.surfaces.backSurface,-Math.PI/2,e,!0),this.rotateSurfaceX(this.surfaces.leftSurface,-Math.PI/2,e,!0),this.rotateSurfaceX(this.surfaces.bottomSurface,-Math.PI/2,e,!0);var t=Math.PI-Math.atan(4*Math.sqrt(2)),n=Math.PI*5/6-Math.acos(Math.sqrt(3)/6),r=Math.asin(1/3)+Math.PI/2,i=new Point3(this.size*Math.sqrt(3)/4,this.size*Math.sqrt(2)/3,-this.size/4),s=new AnimationHelper({rotation:t,rotation2:r,rotation3:t}),o=this,u=new Point3(-this.size*Math.sqrt(3)/4,this.size*Math.sqrt(2)/3,-this.size/4);s.animate({style:{rotation3:0},duration:900,delay:this.delay+1e3,animationType:"easeInEaseOut",update:function(){o.surfaces.leftSurface.points[2]=o.leftSurfacePoint.getRotatedPointByX(this.rotation3,u),o.surfaces.leftSurface.points[2]=o.surfaces.leftSurface.points[2].getRotatedPointByY(n,u),o.project()},callback:function(){o.surfaces.leftSurface.points[2]=o.leftSurfacePoint,o.project()}});var a=new Point3(0,this.size*Math.sqrt(2)/3,this.size/2);s.animate({style:{rotation2:0},duration:900,delay:this.delay+2e3,animationType:"easeInEaseOut",update:function(){o.surfaces.backSurface.points[2]=o.backSurfacePoint.getRotatedPointByX(-this.rotation2,a),o.project()}}),s.animate({style:{rotation:0},duration:900,delay:this.delay+3e3,animationType:"easeInEaseOut",update:function(){o.surfaces.rightSurface.points[1]=o.rightSurfacePoint.getRotatedPointByX(this.rotation,i),o.surfaces.rightSurface.points[1]=o.surfaces.rightSurface.points[1].getRotatedPointByY(-n,i),o.project()},callback:function(){o.surfaces.rightSurface.points[1]=o.rightSurfacePoint,o.project()}})}}),ExpandableTrianglePrism=ExpandableShape.extend({init:function(e,t,n,r){this._super(r),e/=2,t/=2,n/=2,this.setSurfaces({backSurface:new Surface([new Point3(-e,t,n),new Point3(e,t,-n),new Point3(e,-t,-n),new Point3(-e,-t,n)]),bottomSurface:new Surface([new Point3(-e,t,n),new Point3(0,t,0),new Point3(e,t,-n),new Point3(-e,t,-n)]),leftSurface:new Surface([new Point3(-e,t,n),new Point3(e,t,-n),new Point3(e,-t,-n),new Point3(-e,-t,n)]),rightSurface:new Surface([]),topSurface:new Surface([new Point3(-e,-t,-n),new Point3(e,-t,-n),new Point3(0,-t,0),new Point3(-e,-t,n)]),frontSurface:new Surface([new Point3(-e,-t,-n),new Point3(e,-t,-n),new Point3(e,t,-n),new Point3(-e,t,-n)])})},showSurfaces:function(e,t){var n=function(n,r,i){AnimationManager.delay(function(){var t=new Path,o=n.get2DPoints(r);for(var u=0;u<o.length;u++)t.add(o[u]);t.closed=!0,t.set_style(animationSurfacesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:t.remove})},t)},r=0;n(this.surfaces.bottomSurface,this.matrix,r++),n(this.surfaces.leftSurface,this.matrix,r++),n(this.surfaces.topSurface,this.matrix,r++),n(this.surfaces.backSurface,this.matrix,r++),n(this.surfaces.rightSurface,this.matrix,r++),n(this.surfaces.frontSurface,this.matrix,r++)},showVertexes:function(e,t){t==undefined&&(t=0);var n=function(n,r){var i=new AnimationHelper({});i.animate({style:{},duration:0,delay:t,init:function(){var t=new AnimationHelper({shape:null,opacity:0});t.animate({style:{opacity:1},duration:0,delay:e*r,update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}}),t.animate({style:{opacity:0},delay:e*8,duration:e,callback:function(){this.shape.remove()},update:function(){this.shape&&this.shape.remove(),this.shape=new Path.Circle(n,4),this.shape.set_style(animationVertexesHighlightStyle),this.shape.set_style({opacity:this.opacity})}})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],s);for(;o<i.length;o++,s++)new n(i[o],s)},showEdges:function(e,t){t==undefined&&(t=0);var n=function(n,r,i){var s=new AnimationHelper({});s.animate({style:{},duration:0,delay:t,init:function(){var t=new Path.Line(n,r);t.set_style(animationEdgesHighlightStyle),t.set_style({opacity:0}),t.animate({style:{opacity:1},duration:0,delay:e*i}),t.animate({style:{opacity:0},duration:e,delay:e*14,callback:t.remove})}})},r=this.surfaces.frontSurface.get2DPoints(this.matrix),i=this.surfaces.backSurface.get2DPoints(this.matrix),s=0,o=0,u=0;for(;s<r.length;s++)new n(r[s],r[(s+1)%r.length],s);for(;o<i.length;o++,s++)new n(i[o],i[(o+1)%i.length],s);for(;u<i.length;u++,s++)new n(r[3-u],i[u],s)},expand:function(e){this.rotateSurfaceX(this.surfaces.topSurface,-Math.PI/2,this.surfaces.topSurface.points[2]),this.rotateSurfaceY(this.surfaces.rightSurface,-Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceY(this.surfaces.frontSurface,-Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.leftSurface,Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceX(this.surfaces.bottomSurface,Math.PI/2,this.surfaces.bottomSurface.points[0])},contract:function(e){this.rotateSurfaceX(this.surfaces.bottomSurface,-Math.PI/2,this.surfaces.bottomSurface.points[0]),this.rotateSurfaceY(this.surfaces.leftSurface,-Math.PI/2,this.surfaces.leftSurface.points[1]),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[1].add(this.surfaces.rightSurface.points[1].swapXZ()).subtract(this.surfaces.rightSurface.points[3].swapXZ())),this.rotateSurfaceY(this.surfaces.rightSurface,Math.PI/2,this.surfaces.rightSurface.points[2],!0),this.rotateSurfaceY(this.surfaces.frontSurface,Math.PI/2,this.surfaces.rightSurface.points[2]),this.rotateSurfaceX(this.surfaces.topSurface,Math.PI/2,this.surfaces.topSurface.points[2])}}),GIF=function(e){var t=document.createElement("div");$(e.parent).append(t),this.count=e.count,$(t).css({width:e.width+"px",height:e.height+"px",backgroundImage:"url("+e.src+")",backgroundPosition:"0px 0px",backgroundRepeat:"no-repeat"}),this.animHelper=new AnimationHelper({position:0,width:e.width,height:e.height,div:t,count:this.count}),this.div=t,e.css&&$(t).css(e.css),this.div};GIF.prototype.play=function(e){e==undefined&&(e=15);var t=1e3/e,n=this.animHelper.width,r=(new Date).getTime(),i=this.animHelper.height,s=this.animHelper.count,o=this.animHelper.div,u=setInterval(function(){var e=(new Date).getTime()-r,a=Math.floor(GIF.MAX_ALLOWED_IMAGE_WIDTH/n),f=Math.floor(e/t),l=!1;f>=s&&(f=s-1,l=!0);var c=f%a*n,h=Math.floor(f/a)*i;$(o).css({backgroundPosition:"-"+c+"px -"+h+"px "}),l==1&&clearInterval(u)},t+1)},GIF.MAX_ALLOWED_IMAGE_WIDTH=3e4;var Language={ENGLISH:"_ENGLISH",TURKISH:"_TURKISH",GERMAN:"_GERMAN",phrases:null,selectedLanguage:null,init:function(e){Language.phrases=Language[e];if(Language.phrases==undefined)throw"Specified language `"+e+"` is not supported";Language.selectedLanguage=e},_ENGLISH:{},_TURKISH:{},_GERMAN:{},getText:function(e){Language.phrases=Language[Language.selectedLanguage];var t=Language.phrases[e];if(t==undefined)throw Language.selectedLanguage+" (selected language) does not support this phrase `"+e+"`";return t},setText:function(e){function n(e,t){for(var n in t)if(t.hasOwnProperty(n)){if(Language[n]==undefined)throw n+" language is not supported";Language[Language[n]][e]=t[n]}}for(var t in e)e.hasOwnProperty(t)&&n(t,e[t])}};LongDivision.prototype.nextStep=function(e){if(this.i>=this.numLength)return null;var t=this.i<this.numLength?parseInt(this.num[this.i],10):0,n=""+this.remainder+t,r=t+this.remainder*10,i=Math.floor(r/this.d);this.answer=this.answer+i,this.nodes.steps.length>0&&$(".down",this.nodes.steps[this.nodes.steps.length-1]).append(t);if(r<this.d)return this.i++,this.answer>0&&$(this.nodes.answer).append(parseInt(i,10)),this.remainder=r,this.nextStep(e);this.remainder=r%this.d,this.i++;var s=document.createElement("div");$(s).html('<div class="up"></div><div class="line"><span style="position:relative;top:-20px">-</span></div><div class="down"></div>').css({position:"relative",top:-this.fontSize,height:this.fontSize*2+2,"float":"left",width:$(this.container).width()}).addClass("step"),$(".up",s).html(""+i*this.d).css({height:this.fontSize,textAlign:"left",width:this.fontSize*.5*this.num.length+1});var o=0;this.nodes.steps.length>0&&(o=$(".down",this.nodes.steps[this.nodes.steps.length-1]).html().length-$(".up",s).html().length+parseInt($(this.nodes.steps[this.nodes.steps.length-1]).attr("pLeft"),10)),$(s).attr("pLeft",o),$(".line",s).css({position:"relative",height:1,borderTop:"1px solid #000",borderColor:$(this.container).css("color"),width:this.fontSize*.5*(this.num.length+2),left:-this.fontSize}),$(".line img",s).css({position:"relative",top:"-15px",left:"0px",zIndex:2});var u="";for(var a=0;a<(""+r).length-(""+this.remainder).length;a++)u+="0";return u+=this.remainder,$(".down",s).html(u).css({height:this.fontSize,paddingLeft:this.fontSize*.5*($(".up",s).html().length-$(".down",s).html().length)}),$(s).css({left:this.fontSize*.5*o}),$(this.container).append(s),i!=undefined&&$(this.nodes.answer).append('<span id="'+this.i+'">'+i+"</span>"),isNaN(e)||($(s).delay(e*.5).css({opacity:0}).animate({opacity:1},e*.5),$("span#"+this.i,this.nodes.answer).css({opacity:0}).delay(1).animate({opacity:1},1)),this.nodes.steps.push(s),s};var AnimationManager=function(){AnimationManager.animationAnimations=[],AnimationManager.interactionAnimations=[]};AnimationManager.delay=function(e,t){var n=new AnimationHelper({});n.animate({style:{},duration:0,delay:t,init:e})},AnimationManager.Animation=function(e,t){this.item=e,this.style=t.style,this.duration=t.duration,t.delay?this.startTime=(new Date).getTime()+t.delay:this.startTime=(new Date).getTime(),t.animationType?(this.animationType=t.animationType,this.animationType=="custom"&&(this.mappingFunction=t.mappingFunction)):this.animationType="linear",typeof t.init=="function"&&(this.init=t.init),typeof t.callback=="function"&&(this.callback=t.callback),typeof t.update=="function"&&(this.update=t.update),this.idle=!0,this.map=function(e){if(this.animationType=="linear")return e;if(this.animationType=="easeIn")return e*e;if(this.animationType=="easeOut")return e*(-e+2);if(this.animationType=="easeInEaseOut")return e*e*(3-2*e);if(this.animationType=="easeInOutQuad")return e<.5?2*e*e:e*(4-2*e)-1;if(this.animationType=="easeOutBounce")return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375;if(this.animationType=="easeOutElastic"){var t=.3,n=1;if(e==0)return 0;if(e==1)return 1;if(n<Math.abs(1)){n=1;var r=t/4}else var r=t/(2*Math.PI)*Math.asin(1/n);return n*Math.pow(2,-10*e)*Math.sin((e-r)*2*Math.PI/t)+1}return this.animationType=="custom"?this.mappingFunction(e):e}},AnimationManager.animate=function(e){paper.project==Main.animationProject?AnimationManager.animationAnimations.push(e):paper.project==Main.interactionProject&&AnimationManager.interactionAnimations.push(e)},AnimationManager.clearAnimations=function(){paper.project==Main.animationProject?AnimationManager.animationAnimations=[]:paper.project==Main.interactionProject&&(AnimationManager.interactionAnimations=[])},AnimationManager.update=function(e){var t;paper.project==Main.animationProject?t=AnimationManager.animationAnimations:paper.project==Main.interactionProject&&(t=AnimationManager.interactionAnimations);for(var n=0;n<t.length;n++){var r=t[n];currentTime=(new Date).getTime();if(r.startTime<currentTime)if(r.idle){r.init&&(r.item.init=r.init,r.item.init()),r.startHash={},r.endHash={};for(var i in r.style)r.style.hasOwnProperty(i)&&(r.startHash[i]=r.item[i]);r.idle=!1}else if(r.startTime+r.duration<currentTime){t.splice(n,1);for(var i in r.startHash)r.startHash.hasOwnProperty(i)&&(r.item[i]=r.style[i]);r.update&&(r.item.update=r.update,r.item.update()),r.callback&&(r.item.callback=r.callback,r.item.callback())}else{for(var i in r.startHash)if(r.startHash.hasOwnProperty(i)){var s=r.startHash[i],o=r.style[i],u=r.map((currentTime-r.startTime)/r.duration);if(Util.isNumber(s))r.item[i]=s+(o-s)*u;else if(s instanceof Point){var a=s.x+(o.x-s.x)*u,f=s.y+(o.y-s.y)*u;r.item[i]=new Point(a,f)}else if(s instanceof Point3){var a=s.x+(o.x-s.x)*u,f=s.y+(o.y-s.y)*u,l=s.z+(o.z-s.z)*u;r.item[i]=new Point3(a,f,l)}else if(s instanceof RgbColor){var c=s.red+(o.red-s.red)*u,h=s.green+(o.green-s.green)*u,p=s.blue+(o.blue-s.blue)*u,d=s.alpha+(o.alpha-s.alpha)*u;r.item[i]=new RgbColor(c,h,p,d)}}r.update&&(r.item.update=r.update,r.item.update())}}};var canvas,ctx,canvasWidth,halfCanvasWidth,canvasHeight,halfCanvasHeight,space,scene;Space.prototype.createMatrixIdentity=function(){return[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]]},Space.prototype.matrixMultiply=function(e,t){var n=this.createMatrixIdentity(),r=e[0].length,i=e.length;r!=t.length;for(var s=0;s<r;s++)for(var o=0;o<i;o++){var u=0;for(var a=0;a<r;a++)u+=e[o][a]*t[a][s];n[o][s]=u}return n},Space.prototype.flatten=function(e){var t=[[e.x,e.y,e.z,1]],n=this.matrixMultiply(t,this.m);e.tx=n[0][0],e.ty=n[0][1],e.tz=n[0][2],e.fx=halfCanvasWidth+canvasWidth*e.tx/e.tz,e.fy=halfCanvasHeight-canvasWidth*e.ty/e.tz},Space.prototype.translate=function(e,t,n){var r=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[e,t,n,1]];this.m=this.matrixMultiply(r,this.m)},Space.prototype.rotate=function(e,t,n){if(t){var r=Math.cos(t),i=Math.sin(t),s=[[r,0,i,0],[0,1,0,0],[-i,0,r,0],[0,0,0,1]];this.m=this.matrixMultiply(this.m,s)}if(e){var o=Math.cos(e),u=Math.sin(e),a=[[1,0,0,0],[0,o,-u,0],[0,u,o,0],[0,0,0,1]];this.m=this.matrixMultiply(this.m,a)}if(n){var f=Math.cos(n),l=Math.sin(n),c=[[f,-l,0,0],[l,f,0,0],[0,0,1,0],[0,0,0,1]];this.m=this.matrixMultiply(this.m,c)}},Space.prototype.push=function(){this.mStack.push(this.m),this.m=[[this.m[0][0],this.m[0][1],this.m[0][2],this.m[0][3]],[this.m[1][0],this.m[1][1],this.m[1][2],this.m[1][3]],[this.m[2][0],this.m[2][1],this.m[2][2],this.m[2][3]],[this.m[3][0],this.m[3][1],this.m[3][2],this.m[3][3]]]},Space.prototype.pop=function(){this.m=this.mStack.pop()},Shape.prototype.remove=function(){this.points=[],this.polygons=[]},Shape.prototype.draw=function(e){for(var t=0;t<this.points.length;t++){if(this.points[t]==undefined)continue;space.flatten(this.points[t])}for(var t=0;t<this.polygons.length;t++){if(this.polygons[t]==undefined){console.log(t+" is undefined ");continue}var n=this.polygons[t];space.flatten(n.origin);if(n.normal&&this.backface){space.flatten(n.normal);var r=Math.pow(n.origin.tx,2)+Math.pow(n.origin.ty,2)+Math.pow(n.origin.tz,2),i=Math.pow(n.normal.tx,2)+Math.pow(n.normal.ty,2)+Math.pow(n.normal.tz,2);r>i&&e.push(n)}else e.push(n)}},Polygon.SOLID=0,Polygon.WIRE=1,Polygon.prototype.draw=function(){ctx.beginPath(),ctx.moveTo(this.points[0].fx,this.points[0].fy);for(var e=0;e<this.points.length;e++)ctx.lineTo(this.points[e].fx,this.points[e].fy);ctx.closePath();var t=this.color;if(t.length>3)var n=["rgba(",t[0],",",t[1],",",t[2],",",t[3],")"].join("");else var n=["rgb(",t[0],",",t[1],",",t[2],")"].join("");this.type==Polygon.SOLID?(ctx.fillStyle=n,ctx.fill()):this.type==Polygon.WIRE&&(ctx.strokeStyle=n,ctx.stroke())},Scene.prototype.draw=function(){space.push(),space.translate(-this.camera.x,-this.camera.y,-this.camera.z);var e=this.cameraTarget.x-this.camera.x,t=this.cameraTarget.y-this.camera.y,n=this.cameraTarget.z-this.camera.z,r=Math.sqrt(Math.pow(e,2)+Math.pow(n,2)),i=-Math.atan2(t,r),s=Math.atan2(e,n);space.rotate(i,s,this.cameraRotation),this.drawlist=[];for(var o in this.shapes)this.shapes[o].draw(this.drawlist);this.drawlist.sort(function(e,t){return t.origin.tz-e.origin.tz});for(var o=0;o<this.drawlist.length;o++)this.drawlist[o].draw();space.pop()},function(e,t){function n(t,n){var i=t.nodeName.toLowerCase();if("area"===i){var s=t.parentNode,o=s.name,u;return!t.href||!o||s.nodeName.toLowerCase()!=="map"?!1:(u=e("img[usemap=#"+o+"]")[0],!!u&&r(u))}return(/input|select|textarea|button|object/.test(i)?!t.disabled:"a"==i?t.href||n:n)&&r(t)}function r(t){return!e(t).parents().andSelf().filter(function(){return e.curCSS(this,"visibility")==="hidden"||e.expr.filters.hidden(this)}).length}e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.8.22",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),e.fn.extend({propAttr:e.fn.prop||e.fn.attr,_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.curCSS(this,"position",1))&&/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.curCSS(this,"overflow",1)+e.curCSS(this,"overflow-y",1)+e.curCSS(this,"overflow-x",1))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function i(t,n,r,i){return e.each(s,function(){n-=parseFloat(e.curCSS(t,"padding"+this,!0))||0,r&&(n-=parseFloat(e.curCSS(t,"border"+this+"Width",!0))||0),i&&(n-=parseFloat(e.curCSS(t,"margin"+this,!0))||0)}),n}var s=r==="Width"?["Left","Right"]:["Top","Bottom"],o=r.toLowerCase(),u={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?u["inner"+r].call(this):this.each(function(){e(this).css(o,i(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?u["outer"+r].call(this,t):this.each(function(){e(this).css(o,i(this,t,!0,n)+"px")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return n(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var r=e.attr(t,"tabindex"),i=isNaN(r);return(i||r>=0)&&n(t,!i)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=n.offsetHeight===100,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e.curCSS||(e.curCSS=e.css),e.extend(e.ui,{plugin:{add:function(t,n,r){var i=e.ui[t].prototype;for(var s in r)i.plugins[s]=i.plugins[s]||[],i.plugins[s].push([n,r[s]])},call:function(e,t,n){var r=e.plugins[t];if(!r||!e.element[0].parentNode)return;for(var i=0;i<r.length;i++)e.options[r[i][0]]&&r[i][1].apply(e.element,n)}},contains:function(e,t){return document.compareDocumentPosition?e.compareDocumentPosition(t)&16:e!==t&&e.contains(t)},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&e<t+n},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}})}(jQuery),function(e,t){if(e.cleanData){var n=e.cleanData;e.cleanData=function(t){for(var r=0,i;(i=t[r])!=null;r++)try{e(i).triggerHandler("remove")}catch(s){}n(t)}}else{var r=e.fn.remove;e.fn.remove=function(t,n){return this.each(function(){return n||(!t||e.filter(t,[this]).length)&&e("*",this).add([this]).each(function(){try{e(this).triggerHandler("remove")}catch(t){}}),r.call(e(this),t,n)})}}e.widget=function(t,n,r){var i=t.split(".")[0],s;t=t.split(".")[1],s=i+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][s]=function(n){return!!e.data(n,t)},e[i]=e[i]||{},e[i][t]=function(e,t){arguments.length&&this._createWidget(e,t)};var o=new n;o.options=e.extend(!0,{},o.options),e[i][t].prototype=e.extend(!0,o,{namespace:i,widgetName:t,widgetEventPrefix:e[i][t].prototype.widgetEventPrefix||t,widgetBaseClass:s},r),e.widget.bridge(t,e[i][t])},e.widget.bridge=function(n,r){e.fn[n]=function(i){var s=typeof i=="string",o=Array.prototype.slice.call(arguments,1),u=this;return i=!s&&o.length?e.extend.apply(null,[!0,i].concat(o)):i,s&&i.charAt(0)==="_"?u:(s?this.each(function(){var r=e.data(this,n),s=r&&e.isFunction(r[i])?r[i].apply(r,o):r;if(s!==r&&s!==t)return u=s,!1}):this.each(function(){var t=e.data(this,n);t?t.option(i||{})._init():e.data(this,n,new r(i,this))}),u)}},e.Widget=function(e,t){arguments.length&&this._createWidget(e,t)},e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(t,n){e.data(n,this.widgetName,this),this.element=e(n),this.options=e.extend(!0,{},this.options,this._getCreateOptions(),t);var r=this;this.element.bind("remove."+this.widgetName,function(){r.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(n,r){var i=n;if(arguments.length===0)return e.extend({},this.options);if(typeof n=="string"){if(r===t)return this.options[n];i={},i[n]=r}return this._setOptions(i),this},_setOptions:function(t){var n=this;return e.each(t,function(e,t){n._setOption(e,t)}),this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&this.widget()[t?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",t),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent
;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.call(this.element[0],n,r)===!1||n.isDefaultPrevented())}}}(jQuery),function(e,t){var n=!1;e(document).mouseup(function(e){n=!1}),e.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which==1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return!e.browser.msie||document.documentMode>=9||!!t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target==this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}(jQuery),function(e,t){e.ui=e.ui||{};var n=/left|center|right/,r=/top|center|bottom/,i="center",s={},o=e.fn.position,u=e.fn.offset;e.fn.position=function(t){if(!t||!t.of)return o.apply(this,arguments);t=e.extend({},t);var u=e(t.of),l=u[0],h=(t.collision||"flip").split(" "),p=t.offset?t.offset.split(" "):[0,0],v,m,y;return l.nodeType===9?(v=u.width(),m=u.height(),y={top:0,left:0}):l.setTimeout?(v=u.width(),m=u.height(),y={top:u.scrollTop(),left:u.scrollLeft()}):l.preventDefault?(t.at="left top",v=m=0,y={top:t.of.pageY,left:t.of.pageX}):(v=u.outerWidth(),m=u.outerHeight(),y=u.offset()),e.each(["my","at"],function(){var e=(t[this]||"").split(" ");e.length===1&&(e=n.test(e[0])?e.concat([i]):r.test(e[0])?[i].concat(e):[i,i]),e[0]=n.test(e[0])?e[0]:i,e[1]=r.test(e[1])?e[1]:i,t[this]=e}),h.length===1&&(h[1]=h[0]),p[0]=parseInt(p[0],10)||0,p.length===1&&(p[1]=p[0]),p[1]=parseInt(p[1],10)||0,t.at[0]==="right"?y.left+=v:t.at[0]===i&&(y.left+=v/2),t.at[1]==="bottom"?y.top+=m:t.at[1]===i&&(y.top+=m/2),y.left+=p[0],y.top+=p[1],this.each(function(){var n=e(this),r=n.outerWidth(),o=n.outerHeight(),u=parseInt(e.curCSS(this,"marginLeft",!0))||0,l=parseInt(e.curCSS(this,"marginTop",!0))||0,c=r+u+(parseInt(e.curCSS(this,"marginRight",!0))||0),d=o+l+(parseInt(e.curCSS(this,"marginBottom",!0))||0),g=e.extend({},y),w;t.my[0]==="right"?g.left-=r:t.my[0]===i&&(g.left-=r/2),t.my[1]==="bottom"?g.top-=o:t.my[1]===i&&(g.top-=o/2),s.fractions||(g.left=Math.round(g.left),g.top=Math.round(g.top)),w={left:g.left-u,top:g.top-l},e.each(["left","top"],function(n,i){e.ui.position[h[n]]&&e.ui.position[h[n]][i](g,{targetWidth:v,targetHeight:m,elemWidth:r,elemHeight:o,collisionPosition:w,collisionWidth:c,collisionHeight:d,offset:p,my:t.my,at:t.at})}),e.fn.bgiframe&&n.bgiframe(),n.offset(e.extend(g,{using:t.using}))})},e.ui.position={fit:{left:function(t,n){var r=e(window),i=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft();t.left=i>0?t.left-i:Math.max(t.left-n.collisionPosition.left,t.left)},top:function(t,n){var r=e(window),i=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop();t.top=i>0?t.top-i:Math.max(t.top-n.collisionPosition.top,t.top)}},flip:{left:function(t,n){if(n.at[0]===i)return;var r=e(window),s=n.collisionPosition.left+n.collisionWidth-r.width()-r.scrollLeft(),o=n.my[0]==="left"?-n.elemWidth:n.my[0]==="right"?n.elemWidth:0,u=n.at[0]==="left"?n.targetWidth:-n.targetWidth,f=-2*n.offset[0];t.left+=n.collisionPosition.left<0?o+u+f:s>0?o+u+f:0},top:function(t,n){if(n.at[1]===i)return;var r=e(window),s=n.collisionPosition.top+n.collisionHeight-r.height()-r.scrollTop(),o=n.my[1]==="top"?-n.elemHeight:n.my[1]==="bottom"?n.elemHeight:0,u=n.at[1]==="top"?n.targetHeight:-n.targetHeight,f=-2*n.offset[1];t.top+=n.collisionPosition.top<0?o+u+f:s>0?o+u+f:0}}},e.offset.setOffset||(e.offset.setOffset=function(t,n){/static/.test(e.curCSS(t,"position"))&&(t.style.position="relative");var r=e(t),i=r.offset(),s=parseInt(e.curCSS(t,"top",!0),10)||0,o=parseInt(e.curCSS(t,"left",!0),10)||0,u={top:n.top-i.top+s,left:n.left-i.left+o};"using"in n?n.using.call(t,u):r.css(u)},e.fn.offset=function(t){var n=this[0];return!n||!n.ownerDocument?null:t?e.isFunction(t)?this.each(function(n){e(this).offset(t.call(this,n,e(this).offset()))}):this.each(function(){e.offset.setOffset(this,t)}):u.call(this)}),function(){var t=document.getElementsByTagName("body")[0],n=document.createElement("div"),r,i,o,u,l;r=document.createElement(t?"div":"body"),o={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},t&&e.extend(o,{position:"absolute",left:"-1000px",top:"-1000px"});for(var c in o)r.style[c]=o[c];r.appendChild(n),i=t||document.documentElement,i.insertBefore(r,i.firstChild),n.style.cssText="position: absolute; left: 10.7432222px; top: 10.432325px; height: 30px; width: 201px;",u=e(n).offset(function(e,t){return t}).offset(),r.innerHTML="",i.removeChild(r),l=u.top+u.left+(t?2e3:0),s.fractions=l>21&&l<22}()}(jQuery),function(e,t){e.widget("ui.draggable",e.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!this.element.data("draggable"))return;return this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(n.iframeFix&&e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);var r=this.element[0],i=!1;while(r&&(r=r.parentNode))r==document&&(i=!0);if(!i&&this.options.helper==="original")return!1;if(this.options.revert=="invalid"&&!n||this.options.revert=="valid"&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return this.options.iframeFix===!0&&e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper=="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo=="parent"?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[t.containment=="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t.containment=="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(t.containment=="document"?0:e(window).scrollLeft())+e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(t.containment=="document"?0:e(window).scrollTop())+(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)&&t.containment.constructor!=Array){var n=e(t.containment),r=n[0];if(!r)return;var i=n.offset(),s=e(r).css("overflow")!="hidden";this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else t.containment.constructor==Array&&(this.containment=t.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var f=this.relative_container.offset();u=[this.containment[0]+f.left,this.containment[1]+f.top,this.containment[2]+f.left,this.containment[3]+f.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var l=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u?l-this.offset.click.top<u[1]||l-this.offset.click.top>u[3]?l-this.offset.click.top<u[1]?l+n.grid[1]:l-n.grid[1]:l:l;var c=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u?c-this.offset.click.left<u[0]||c-this.offset.click.left>u[2]?c-this.offset.click.left<u[0]?c+n.grid[0]:c-n.grid[0]:c:c}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&e.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t=="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.extend(e.ui.draggable,{version:"1.8.22"}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this,s=function(t){var n=this.offset.click.top,r=this.offset.click.left,i=this.positionAbs.top,s=this.positionAbs.left,o=t.height,u=t.width,f=t.top,l=t.left;return e.ui.isOver(i+n,s+r,f,l,o,u)};e.each(r.sortables,function(s){this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,n){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(t,n){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,n){var r=e(this).data("draggable");r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=!1;if(r.scrollParent[0]!=document&&r.scrollParent[0].tagName!="HTML"){if(!i.axis||i.axis!="x")r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed);if(!i.axis||i.axis!="y")r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed)}else{if(!i.axis||i.axis!="x")t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed));if(!i.axis||i.axis!="y")t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed))}s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,n){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,f=n.offset.top,l=f+r.helperProportions.height;for(var c=r.snapElements.length-1;c>=0;c--){var h=r.snapElements[c].left,p=h+r.snapElements[c].width,d=r.snapElements[c].top,v=d+r.snapElements[c].height;if(!(h-s<o&&o<p+s&&d-s<f&&f<v+s||h-s<o&&o<p+s&&d-s<l&&l<v+s||h-s<u&&u<p+s&&d-s<f&&f<v+s||h-s<u&&u<p+s&&d-s<l&&l<v+s)){r.snapElements[c].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[c].item})),r.snapElements[c].snapping=!1;continue}if(i.snapMode!="inner"){var m=Math.abs(d-l)<=s,g=Math.abs(v-f)<=s,y=Math.abs(h-u)<=s,b=Math.abs(p-o)<=s;m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.top=r._convertPositionTo("relative",{top:v,left:0}).top-r.margins.top),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left),b&&(n.position.left=r._convertPositionTo("relative",{top:0,left:p}).left-r.margins.left)}var w=m||g||y||b;if(i.snapMode!="outer"){var m=Math.abs(d-f)<=s,g=Math.abs(v-l)<=s,y=Math.abs(h-o)<=s,b=Math.abs(p-u)<=s;m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.top=r._convertPositionTo("relative",{top:v-r.helperProportions.height,left:0}).top-r.margins.top),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left),b&&(n.position.left=r._convertPositionTo("relative",{top:0,left:p-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[c].snapping&&(m||g||y||b||w)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[c].item})),r.snapElements[c].snapping=m||g||y||b||w}}}),e.ui.plugin.add("draggable","stack",{start:function(t,n){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!i.length)return;var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e,t){e.widget("ui.droppable",{widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},destroy:function(){var t=e.ui.ddmanager.droppables[this.options.scope];for(var n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);return this.element.removeClass("ui-droppable ui-droppable-disabled").removeData("droppable").unbind(".droppable"),this},_setOption:function(t,n){t=="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]==this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.extend(e.ui.droppable,{version:"1.8.22"}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,f=n.offset.left,l=f+n.proportions.width,c=n.offset.top,h=c+n.proportions.height;switch(r){case"fit":return f<=i&&s<=l&&c<=o&&u<=h;case"intersect":return f<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<l&&c<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<h;case"pointer":var p=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,d=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,v=e.ui.isOver(d,p,c,f,n.proportions.height,n.proportions.width);return v;case"touch":return(o>=c&&o<=h||u>=c&&u<=h||o<c&&u>h)&&(i>=f&&i<=l||s>=f&&s<=l||i<f&&s>l);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++){if(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))continue;for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible=r[o].element.css("display")!="none";if(!r[o].visible)continue;i=="mousedown"&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parents(":not(body,html)").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r=e.ui.intersect(t,this,this.options.tolerance),i=!r&&this.isover==1?"isout":r&&this.isover==0?"isover":null;if(!i)return;var s;if(this.options.greedy){var o=this.element.parents(":data(droppable):eq(0)");o.length&&(s=e.data(o[0],"droppable"),s.greedyChild=i=="isover"?1:0)}s&&i=="isover"&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this[i=="isout"?"isover":"isout"]=0,this[i=="isover"?"_over":"_out"].call(this,n),s&&i=="isout"&&(s.isout=0,s.isover=1,s._over.call(s,n))})},dragStop:function(t,n){t.element.parents(":not(body,html)").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e,t){e.widget("ui.resizable",e.ui.mouse,{widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?
{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor==String){this.handles=="all"&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show());if(this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").hover(function(){if(n.disabled)return;e(this).removeClass("ui-resizable-autohide"),t._handles.show()},function(){if(n.disabled)return;t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;n.after(this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")})).remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof r.aspectRatio=="number"?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var f=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor",f=="auto"?this.axis+"-resize":f),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n=this.helper,r=this.options,i={},s=this,o=this.originalMousePosition,u=this.axis,f=t.pageX-o.left||0,l=t.pageY-o.top||0,c=this._change[u];if(!c)return!1;var h=c.apply(this,[t,f,l]),p=e.browser.msie&&e.browser.version<7,d=this.sizeDiff;this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)h=this._updateRatio(h,t);return h=this._respectSize(h,t),this._propagate("resize",t),n.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(h),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,f={width:r.helper.width()-u,height:r.helper.height()-o},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(f,{top:c,left:l})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t=this.options,n,i,s,o,u;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:Infinity,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:Infinity};if(this._aspectRatio||e)n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o);this._vBoundaries=u},_updateCache:function(e){var t=this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e,t){var n=this.options,i=this.position,s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),o=="sw"&&(e.left=i.left+(s.width-e.width),e.top=null),o=="nw"&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var n=this.helper,i=this._vBoundaries,s=this._aspectRatio||t.shiftKey,o=this.axis,u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),v=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&v&&(e.top=h-i.minHeight),a&&v&&(e.top=h-i.maxHeight);var m=!e.width&&!e.height;return m&&!e.left&&e.top?e.top=null:m&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){var t=this.options;if(!this._proportionallyResizeElements.length)return;var n=this.helper||this.element;for(var r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}if(!(!e.browser.msie||!e(n).is(":hidden")&&!e(n).parents(":hidden").length))continue;i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset();if(this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.browser.msie&&e.browser.version<7,i=r?1:0,s=r?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+s,height:this.element.outerHeight()+s,position:"absolute",left:this.elementOffset.left-i+"px",top:this.elementOffset.top-i+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t,n){return{width:this.originalSize.width+t}},w:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var r=this.options,i=this.originalSize,s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.extend(e.ui.resizable,{version:"1.8.22"}),e.ui.plugin.add("resizable","alsoResize",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof i.alsoResize=="object"&&!i.alsoResize.parentNode?i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)}):s(i.alsoResize)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},f=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){f(e,t)}):f(i.alsoResize)},stop:function(t,n){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,f=o?0:r.sizeDiff.width,l={width:r.size.width-f,height:r.size.height-u},c=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,h=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(l,h&&c?{top:h,left:c}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(t,r){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,f=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(!f)return;i.containerElement=e(f);if(/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var l=e(f),h=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){h[e]=n(l.css("padding"+t))}),i.containerOffset=l.offset(),i.containerPosition=l.position(),i.containerSize={height:l.innerHeight()-h[3],width:l.innerWidth()-h[1]};var p=i.containerOffset,d=i.containerSize.height,v=i.containerSize.width,m=e.ui.hasScroll(f,"left")?f.scrollWidth:v,g=e.ui.hasScroll(f)?f.scrollHeight:d;i.parentData={element:f,left:p.left,top:p.top,width:m,height:g}}},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.containerSize,o=r.containerOffset,u=r.size,f=r.position,l=r._aspectRatio||t.shiftKey,c={top:0,left:0},h=r.containerElement;h[0]!=document&&/static/.test(h.css("position"))&&(c=o),f.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-c.left),l&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),f.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),l&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var p=Math.abs((r._helper?r.offset.left-c.left:r.offset.left-c.left)+r.sizeDiff.width),d=Math.abs((r._helper?r.offset.top-c.top:r.offset.top-o.top)+r.sizeDiff.height),v=r.containerElement.get(0)==r.element.parent().get(0),m=/relative|absolute/.test(r.containerElement.css("position"));v&&m&&(p-=r.parentData.left),p+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-p,l&&(r.size.height=r.size.width/r.aspectRatio)),d+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-d,l&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.position,o=r.containerOffset,u=r.containerPosition,f=r.containerElement,l=e(r.helper),c=l.offset(),h=l.outerWidth()-r.sizeDiff.width,p=l.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(f.css("position"))&&e(this).css({left:c.left-u.left-o.left,width:h,height:p}),r._helper&&!i.animate&&/static/.test(f.css("position"))&&e(this).css({left:c.left-u.left-o.left,width:h,height:p})}}),e.ui.plugin.add("resizable","ghost",{start:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof i.ghost=="string"?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(t,n){var r=e(this).data("resizable"),i=r.options;r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,f=r.axis,l=i._aspectRatio||t.shiftKey;i.grid=typeof i.grid=="number"?[i.grid,i.grid]:i.grid;var c=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),h=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(f)?(r.size.width=o.width+c,r.size.height=o.height+h):/^(ne)$/.test(f)?(r.size.width=o.width+c,r.size.height=o.height+h,r.position.top=u.top-h):/^(sw)$/.test(f)?(r.size.width=o.width+c,r.size.height=o.height+h,r.position.left=u.left-c):(r.size.width=o.width+c,r.size.height=o.height+h,r.position.top=u.top-h,r.position.left=u.left-c)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e,t){e.widget("ui.selectable",e.ui.mouse,{options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},destroy:function(){return this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled").removeData("selectable").unbind(".selectable"),this._mouseDestroy(),this},_mouseStart:function(t){var n=this;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}})},_mouseDrag:function(t){var n=this;this.dragged=!0;if(this.options.disabled)return;var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var f=o;o=i,i=f}if(s>u){var f=u;u=s,s=f}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var f=e.data(this,"selectable-item");if(!f||f.element==n.element[0])return;var l=!1;r.tolerance=="touch"?l=!(f.left>o||f.right<i||f.top>u||f.bottom<s):r.tolerance=="fit"&&(l=f.left>i&&f.right<o&&f.top>s&&f.bottom<u),l?(f.selected&&(f.$element.removeClass("ui-selected"),f.selected=!1),f.unselecting&&(f.$element.removeClass("ui-unselecting"),f.unselecting=!1),f.selecting||(f.$element.addClass("ui-selecting"),f.selecting=!0,n._trigger("selecting",t,{selecting:f.element}))):(f.selecting&&((t.metaKey||t.ctrlKey)&&f.startselected?(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.$element.addClass("ui-selected"),f.selected=!0):(f.$element.removeClass("ui-selecting"),f.selecting=!1,f.startselected&&(f.$element.addClass("ui-unselecting"),f.unselecting=!0),n._trigger("unselecting",t,{unselecting:f.element}))),f.selected&&!t.metaKey&&!t.ctrlKey&&!f.startselected&&(f.$element.removeClass("ui-selected"),f.selected=!1,f.$element.addClass("ui-unselecting"),f.unselecting=!0,n._trigger("unselecting",t,{unselecting:f.element})))}),!1},_mouseStop:function(t){var n=this;this.dragged=!1;var r=this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}}),e.extend(e.ui.selectable,{version:"1.8.22"})}(jQuery),function(e,t){e.widget("ui.sortable",e.ui.mouse,{widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},destroy:function(){e.Widget.prototype.destroy.call(this),this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget()[n?"addClass":"removeClass"]("ui-sortable-disabled")):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type=="static")return!1;this._refreshItems(t);var i=null,s=this,o=e(t.target).parents().each(function(){if(e.data(this,r.widgetName+"-item")==s)return i=e(this),!1});e.data(t.target,r.widgetName+"-item")==s&&(i=e(t.target));if(!i)return!1;if(this.options.handle&&!n){var u=!1;e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(u=!0)});if(!u)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options,s=this;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(var o=this.containers.length-1;o>=0;o--)this.containers[o]._trigger("activate",t,s._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs);if(this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&this.scrollParent[0].tagName!="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(!u)continue;if(o!=this.currentItem[0]&&this.placeholder[u==1?"next":"prev"]()[0]!=o&&!e.ui.contains(this.placeholder[0],o)&&(this.options.type=="semi-dynamic"?!e.ui.contains(this.element[0],o):!0)){this.direction=u==1?"down":"up";if(this.options.tolerance!="pointer"&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=r.placeholder.offset();r.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-r.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-r.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){var t=this;if(this.dragging){this._mouseUp({target:null}),this.options.helper=="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var n=this.containers.length-1;n>=0;n--)this.containers[n]._trigger("deactivate",null,t._uiHash(this)),this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",null,t._uiHash(this)),this.containers[n].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance=="pointer"||this.options.forcePointerForContainers||this.options.tolerance!="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n=this.options.axis==="x"||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r=this.options.axis==="y"||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o=="right"||s=="down"?2:1:s&&(s=="down"?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s=="right"&&r||s=="left"&&!r:i&&(i=="down"&&n||i=="up"&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!=0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!=0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=this,r=[],i=[],s=this._connectWith();if(s&&t)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var f=u.length-1;f>=0;f--){var l=e.data(u[f],this.widgetName);l&&l!=this&&!l.options.disabled&&i.push([e.isFunction(l.options.items)?l.options.items.call(l.element):e(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}}i.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var o=i.length-1;o>=0;o--)i[o][0].each(function(){r.push(this)});return e(r)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");for(var t=0;t<this.items.length;t++)for(var n=0;n<e.length;n++)e[n]==this.items[t].item[0]&&this.items.splice(t,1)},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=this,i=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],s=this._connectWith();if(s&&this.ready)for(var o=s.length-1;o>=0;o--){var u=e(s[o]);for(var f=u.length-1;f>=0;f--){var l=e.data(u[f],this.widgetName);l&&l!=this&&!l.options.disabled&&(i.push([e.isFunction(l.options.items)?l.options.items.call(l.element[0],t,{item:this.currentItem}):e(l.options.items,l.element),l]),this.containers.push(l))}}for(var o=i.length-1;o>=0;o--){var c=i[o][1],h=i[o][0];for(var f=0,p=h.length;f<p;f++){var d=e(h[f]);d.data(this.widgetName+"-item",c),n.push({item:d,instance:c,width:0,height:0,left:0,top:0})}}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance!=this.currentContainer&&this.currentContainer&&r.item[0]!=this.currentItem[0])continue;var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){var n=t||this,r=n.options;if(!r.placeholder||r.placeholder.constructor==String){var i=r.placeholder;r.placeholder={element:function(){var t=e(document.createElement(n.currentItem[0].nodeName)).addClass(i||n.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return i||(t.style.visibility="hidden"),t},update:function(e,t){if(i&&!r.forcePlaceholderSize)return;t.height()||t.height(n.currentItem.innerHeight()-parseInt(n.currentItem.css("paddingTop")||0,10)-parseInt(n.currentItem.css("paddingBottom")||0,10)),t.width()||t.width(n.currentItem.innerWidth()-parseInt(n.currentItem.css("paddingLeft")||0,10)-parseInt(n.currentItem.css("paddingRight")||0,10))}}}n.placeholder=e(r.placeholder.element.call(n.element,n.currentItem)),n.currentItem.after(n.placeholder),r.placeholder.update(n,n.placeholder)},_contactContainers:function(t){var n=null,r=
null;for(var i=this.containers.length-1;i>=0;i--){if(e.ui.contains(this.currentItem[0],this.containers[i].element[0]))continue;if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.ui.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0)}if(!n)return;if(this.containers.length===1)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else if(this.currentContainer!=this.containers[r]){var s=1e4,o=null,u=this.positionAbs[this.containers[r].floating?"left":"top"];for(var f=this.items.length-1;f>=0;f--){if(!e.ui.contains(this.containers[r].element[0],this.items[f].item[0]))continue;var l=this.containers[r].floating?this.items[f].item.offset().left:this.items[f].item.offset().top;Math.abs(l-u)<s&&(s=Math.abs(l-u),o=this.items[f],this.direction=l-u>0?"down":"up")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper=="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(r[0].style.width==""||n.forceHelperSize)&&r.width(this.currentItem.width()),(r[0].style.height==""||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&e.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&e.browser.msie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;t.containment=="parent"&&(t.containment=this.helper[0].parentNode);if(t.containment=="document"||t.containment=="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(t.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(t.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i=e(n).css("overflow")!="hidden";this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r=t=="absolute"?1:-1,i=this.options,s=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r),left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(e.browser.safari&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r)}},_generatePosition:function(t){var n=this.options,r=this.cssPosition!="absolute"||this.scrollParent[0]!=document&&!!e.ui.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);this.cssPosition=="relative"&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition){this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top));if(n.grid){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment?u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3]?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u:u;var f=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment?f-this.offset.click.left<this.containment[0]||f-this.offset.click.left>this.containment[2]?f-this.offset.click.left<this.containment[0]?f+n.grid[0]:f-n.grid[0]:f:f}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(e.browser.safari&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction=="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this,s=this.counter;window.setTimeout(function(){s==i.counter&&i.refreshPositions(!r)},0)},_clear:function(t,n){this.reverting=!1;var r=[],i=this;!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]==this.currentItem[0]){for(var s in this._storedCSS)if(this._storedCSS[s]=="auto"||this._storedCSS[s]=="static")this._storedCSS[s]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())});if(!e.ui.contains(this.element[0],this.currentItem[0])){n||r.push(function(e){this._trigger("remove",e,this._uiHash())});for(var s=this.containers.length-1;s>=0;s--)e.ui.contains(this.containers[s].element[0],this.currentItem[0])&&!n&&(r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.containers[s])),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.containers[s])))}for(var s=this.containers.length-1;s>=0;s--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[s])),this.containers[s].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex=="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(var s=0;s<r.length;s++)r[s].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}}),e.extend(e.ui.sortable,{version:"1.8.22"})}(jQuery),function(e,t){e.widget("ui.accordion",{options:{active:0,animated:"slide",autoHeight:!0,clearStyle:!1,collapsible:!1,event:"click",fillSpace:!1,header:"> li > :first-child,> :not(li):even",icons:{header:"ui-icon-triangle-1-e",headerSelected:"ui-icon-triangle-1-s"},navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}},_create:function(){var t=this,n=t.options;t.running=0,t.element.addClass("ui-accordion ui-widget ui-helper-reset").children("li").addClass("ui-accordion-li-fix"),t.headers=t.element.find(n.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all").bind("mouseenter.accordion",function(){if(n.disabled)return;e(this).addClass("ui-state-hover")}).bind("mouseleave.accordion",function(){if(n.disabled)return;e(this).removeClass("ui-state-hover")}).bind("focus.accordion",function(){if(n.disabled)return;e(this).addClass("ui-state-focus")}).bind("blur.accordion",function(){if(n.disabled)return;e(this).removeClass("ui-state-focus")}),t.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom");if(n.navigation){var r=t.element.find("a").filter(n.navigationFilter).eq(0);if(r.length){var i=r.closest(".ui-accordion-header");i.length?t.active=i:t.active=r.closest(".ui-accordion-content").prev()}}t.active=t._findActive(t.active||n.active).addClass("ui-state-default ui-state-active").toggleClass("ui-corner-all").toggleClass("ui-corner-top"),t.active.next().addClass("ui-accordion-content-active"),t._createIcons(),t.resize(),t.element.attr("role","tablist"),t.headers.attr("role","tab").bind("keydown.accordion",function(e){return t._keydown(e)}).next().attr("role","tabpanel"),t.headers.not(t.active||"").attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).next().hide(),t.active.length?t.active.attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}):t.headers.eq(0).attr("tabIndex",0),e.browser.safari||t.headers.find("a").attr("tabIndex",-1),n.event&&t.headers.bind(n.event.split(" ").join(".accordion ")+".accordion",function(e){t._clickHandler.call(t,e,this),e.preventDefault()})},_createIcons:function(){var t=this.options;t.icons&&(e("<span></span>").addClass("ui-icon "+t.icons.header).prependTo(this.headers),this.active.children(".ui-icon").toggleClass(t.icons.header).toggleClass(t.icons.headerSelected),this.element.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.children(".ui-icon").remove(),this.element.removeClass("ui-accordion-icons")},destroy:function(){var t=this.options;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.unbind(".accordion").removeClass("ui-accordion-header ui-accordion-disabled ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-selected").removeAttr("tabIndex"),this.headers.find("a").removeAttr("tabIndex"),this._destroyIcons();var n=this.headers.next().css("display","").removeAttr("role").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-accordion-disabled ui-state-disabled");return(t.autoHeight||t.fillHeight)&&n.css("height",""),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),t=="active"&&this.activate(n),t=="icons"&&(this._destroyIcons(),n&&this._createIcons()),t=="disabled"&&this.headers.add(this.headers.next())[n?"addClass":"removeClass"]("ui-accordion-disabled ui-state-disabled")},_keydown:function(t){if(this.options.disabled||t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._clickHandler({target:t.target},t.target),t.preventDefault()}return s?(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),!1):!0},resize:function(){var t=this.options,n;if(t.fillSpace){if(e.browser.msie){var r=this.element.parent().css("overflow");this.element.parent().css("overflow","hidden")}n=this.element.parent().height(),e.browser.msie&&this.element.parent().css("overflow",r),this.headers.each(function(){n-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")}else t.autoHeight&&(n=0,this.headers.next().each(function(){n=Math.max(n,e(this).height("").height())}).height(n));return this},activate:function(e){this.options.active=e;var t=this._findActive(e)[0];return this._clickHandler({target:t},t),this},_findActive:function(t){return t?typeof t=="number"?this.headers.filter(":eq("+t+")"):this.headers.not(this.headers.not(t)):t===!1?e([]):this.headers.filter(":eq(0)")},_clickHandler:function(t,n){var r=this.options;if(r.disabled)return;if(!t.target){if(!r.collapsible)return;this.active.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),this.active.next().addClass("ui-accordion-content-active");var i=this.active.next(),s={options:r,newHeader:e([]),oldHeader:r.active,newContent:e([]),oldContent:i},o=this.active=e([]);this._toggle(o,i,s);return}var u=e(t.currentTarget||n),f=u[0]===this.active[0];r.active=r.collapsible&&f?!1:this.headers.index(u);if(this.running||!r.collapsible&&f)return;var l=this.active,o=u.next(),i=this.active.next(),s={options:r,newHeader:f&&r.collapsible?e([]):u,oldHeader:this.active,newContent:f&&r.collapsible?e([]):o,oldContent:i},c=this.headers.index(this.active[0])>this.headers.index(u[0]);this.active=f?e([]):u,this._toggle(o,i,s,f,c),l.removeClass("ui-state-active ui-corner-top").addClass("ui-state-default ui-corner-all").children(".ui-icon").removeClass(r.icons.headerSelected).addClass(r.icons.header),f||(u.removeClass("ui-state-default ui-corner-all").addClass("ui-state-active ui-corner-top").children(".ui-icon").removeClass(r.icons.header).addClass(r.icons.headerSelected),u.next().addClass("ui-accordion-content-active"));return},_toggle:function(t,n,r,i,s){var o=this,u=o.options;o.toShow=t,o.toHide=n,o.data=r;var f=function(){if(!o)return;return o._completed.apply(o,arguments)};o._trigger("changestart",null,o.data),o.running=n.size()===0?t.size():n.size();if(u.animated){var l={};u.collapsible&&i?l={toShow:e([]),toHide:n,complete:f,down:s,autoHeight:u.autoHeight||u.fillSpace}:l={toShow:t,toHide:n,complete:f,down:s,autoHeight:u.autoHeight||u.fillSpace},u.proxied||(u.proxied=u.animated),u.proxiedDuration||(u.proxiedDuration=u.duration),u.animated=e.isFunction(u.proxied)?u.proxied(l):u.proxied,u.duration=e.isFunction(u.proxiedDuration)?u.proxiedDuration(l):u.proxiedDuration;var c=e.ui.accordion.animations,h=u.duration,p=u.animated;p&&!c[p]&&!e.easing[p]&&(p="slide"),c[p]||(c[p]=function(e){this.slide(e,{easing:p,duration:h||700})}),c[p](l)}else u.collapsible&&i?t.toggle():(n.hide(),t.show()),f(!0);n.prev().attr({"aria-expanded":"false","aria-selected":"false",tabIndex:-1}).blur(),t.prev().attr({"aria-expanded":"true","aria-selected":"true",tabIndex:0}).focus()},_completed:function(e){this.running=e?0:--this.running;if(this.running)return;this.options.clearStyle&&this.toShow.add(this.toHide).css({height:"",overflow:""}),this.toHide.removeClass("ui-accordion-content-active"),this.toHide.length&&(this.toHide.parent()[0].className=this.toHide.parent()[0].className),this._trigger("change",null,this.data)}}),e.extend(e.ui.accordion,{version:"1.8.22",animations:{slide:function(t,n){t=e.extend({easing:"swing",duration:300},t,n);if(!t.toHide.size()){t.toShow.animate({height:"show",paddingTop:"show",paddingBottom:"show"},t);return}if(!t.toShow.size()){t.toHide.animate({height:"hide",paddingTop:"hide",paddingBottom:"hide"},t);return}var r=t.toShow.css("overflow"),i=0,s={},o={},u=["height","paddingTop","paddingBottom"],f,l=t.toShow;f=l[0].style.width,l.width(l.parent().width()-parseFloat(l.css("paddingLeft"))-parseFloat(l.css("paddingRight"))-(parseFloat(l.css("borderLeftWidth"))||0)-(parseFloat(l.css("borderRightWidth"))||0)),e.each(u,function(n,r){o[r]="hide";var i=(""+e.css(t.toShow[0],r)).match(/^([\d+-.]+)(.*)$/);s[r]={value:i[1],unit:i[2]||"px"}}),t.toShow.css({height:0,overflow:"hidden"}).show(),t.toHide.filter(":hidden").each(t.complete).end().filter(":visible").animate(o,{step:function(e,n){n.prop=="height"&&(i=n.end-n.start===0?0:(n.now-n.start)/(n.end-n.start)),t.toShow[0].style[n.prop]=i*s[n.prop].value+s[n.prop].unit},duration:t.duration,easing:t.easing,complete:function(){t.autoHeight||t.toShow.css("height",""),t.toShow.css({width:f,overflow:r}),t.complete()}})},bounceslide:function(e){this.slide(e,{easing:e.down?"easeOutBounce":"swing",duration:e.down?1e3:200})}}})}(jQuery),function(e,t){var n=0;e.widget("ui.autocomplete",{options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null},pending:0,_create:function(){var t=this,n=this.element[0].ownerDocument,r;this.isMultiLine=this.element.is("textarea"),this.element.addClass("ui-autocomplete-input").attr("autocomplete","off").attr({role:"textbox","aria-autocomplete":"list","aria-haspopup":"true"}).bind("keydown.autocomplete",function(n){if(t.options.disabled||t.element.propAttr("readOnly"))return;r=!1;var i=e.ui.keyCode;switch(n.keyCode){case i.PAGE_UP:t._move("previousPage",n);break;case i.PAGE_DOWN:t._move("nextPage",n);break;case i.UP:t._keyEvent("previous",n);break;case i.DOWN:t._keyEvent("next",n);break;case i.ENTER:case i.NUMPAD_ENTER:t.menu.active&&(r=!0,n.preventDefault());case i.TAB:if(!t.menu.active)return;t.menu.select(n);break;case i.ESCAPE:t.element.val(t.term),t.close(n);break;default:clearTimeout(t.searching),t.searching=setTimeout(function(){t.term!=t.element.val()&&(t.selectedItem=null,t.search(null,n))},t.options.delay)}}).bind("keypress.autocomplete",function(e){r&&(r=!1,e.preventDefault())}).bind("focus.autocomplete",function(){if(t.options.disabled)return;t.selectedItem=null,t.previous=t.element.val()}).bind("blur.autocomplete",function(e){if(t.options.disabled)return;clearTimeout(t.searching),t.closing=setTimeout(function(){t.close(e),t._change(e)},150)}),this._initSource(),this.menu=e("<ul></ul>").addClass("ui-autocomplete").appendTo(e(this.options.appendTo||"body",n)[0]).mousedown(function(n){var r=t.menu.element[0];e(n.target).closest(".ui-menu-item").length||setTimeout(function(){e(document).one("mousedown",function(n){n.target!==t.element[0]&&n.target!==r&&!e.ui.contains(r,n.target)&&t.close()})},1),setTimeout(function(){clearTimeout(t.closing)},13)}).menu({focus:function(e,n){var r=n.item.data("item.autocomplete");!1!==t._trigger("focus",e,{item:r})&&/^key/.test(e.originalEvent.type)&&t.element.val(r.value)},selected:function(e,r){var i=r.item.data("item.autocomplete"),s=t.previous;t.element[0]!==n.activeElement&&(t.element.focus(),t.previous=s,setTimeout(function(){t.previous=s,t.selectedItem=i},1)),!1!==t._trigger("select",e,{item:i})&&t.element.val(i.value),t.term=t.element.val(),t.close(e),t.selectedItem=i},blur:function(e,n){t.menu.element.is(":visible")&&t.element.val()!==t.term&&t.element.val(t.term)}}).zIndex(this.element.zIndex()+1).css({top:0,left:0}).hide().data("menu"),e.fn.bgiframe&&this.menu.element.bgiframe(),t.beforeunloadHandler=function(){t.element.removeAttr("autocomplete")},e(window).bind("beforeunload",t.beforeunloadHandler)},destroy:function(){this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete").removeAttr("role").removeAttr("aria-autocomplete").removeAttr("aria-haspopup"),this.menu.element.remove(),e(window).unbind("beforeunload",this.beforeunloadHandler),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments),t==="source"&&this._initSource(),t==="appendTo"&&this.menu.element.appendTo(e(n||"body",this.element[0].ownerDocument)[0]),t==="disabled"&&n&&this.xhr&&this.xhr.abort()},_initSource:function(){var t=this,n,r;e.isArray(this.options.source)?(n=this.options.source,this.source=function(t,r){r(e.ui.autocomplete.filter(n,t.term))}):typeof this.options.source=="string"?(r=this.options.source,this.source=function(n,i){t.xhr&&t.xhr.abort(),t.xhr=e.ajax({url:r,data:n,dataType:"json",success:function(e,t){i(e)},error:function(){i([])}})}):this.source=this.options.source},search:function(e,t){e=e!=null?e:this.element.val(),this.term=this.element.val();if(e.length<this.options.minLength)return this.close(t);clearTimeout(this.closing);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){!this.options.disabled&&e&&e.length?(e=this._normalize(e),this._suggest(e),this._trigger("open")):this.close()},close:function(e){clearTimeout(this.closing),this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.deactivate(),this._trigger("close",e))},_change:function(e){this.previous!==this.element.val()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.deactivate(),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next(new e.Event("mouseover"))},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItem(t,n)})},_renderItem:function(t,n){return e("<li></li>").data("item.autocomplete",n).append(e("<a></a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.first()&&/^previous/.test(e)||this.menu.last()&&/^next/.test(e)){this.element.val(this.term),this.menu.deactivate();return}this.menu[e](t)},widget:function(){return this.menu.element},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}})}(jQuery),function(e){e.widget("ui.menu",{_create:function(){var t=this;this.element.addClass("ui-menu ui-widget ui-widget-content ui-corner-all").attr({role:"listbox","aria-activedescendant":"ui-active-menuitem"}).click(function(n){if(!e(n.target).closest(".ui-menu-item a").length)return;n.preventDefault(),t.select(n)}),this.refresh()},refresh:function(){var t=this,n=this.element.children("li:not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","menuitem");n.children("a").addClass("ui-corner-all").attr("tabindex",-1).mouseenter(function(n){t.activate(n,e(this).parent())}).mouseleave(function(){t.deactivate()})},activate:function(e,t){this.deactivate();if(this.hasScroll()){var n=t.offset().top-this.element.offset().top,r=this.element.scrollTop(),i=this.element.height();n<0?this.element.scrollTop(r+n):n>=i&&this.element.scrollTop(r+n-i+t.height())}this.active=t.eq(0).children("a").addClass("ui-state-hover").attr("id","ui-active-menuitem").end(),this._trigger("focus",e,{item:t})},deactivate:function(){if(!this.active)return;this.active.children("a").removeClass("ui-state-hover").removeAttr("id"),this._trigger("blur"),this.active=null},next:function(e){this.move("next",".ui-menu-item:first",e)},previous:function(e){this.move("prev",".ui-menu-item:last",e)},first:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},last:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},move:function(e,t,n){if(!this.active){this.activate(n,this.element.children(t));return}var r=this.active[e+"All"](".ui-menu-item").eq(0);r.length?this.activate(n,r):this.activate(n,this.element.children(t))},nextPage:function(t){if(this.hasScroll()){if(!this.active||this.last()){this.activate(t,this.element.children(".ui-menu-item:first"));return}var n=this.active.offset().top,r=this.element.height(),i=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n-r+e(this).height();return t<10&&t>-10});i.length||(i=this.element.children(".ui-menu-item:last")),this.activate(t,i)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.last()?":first":":last"))},previousPage:function(t){if(this.hasScroll()){if(!this.active||this.first()){this.activate(t,this.element.children(".ui-menu-item:last"));return}var n=this.active.offset().top,r=this.element.height(),i=this.element.children(".ui-menu-item").filter(function(){var t=e(this).offset().top-n+r-e(this).height();return t<10&&t>-10});i.length||(i=this.element.children(".ui-menu-item:first")),this.activate(t,i)}else this.activate(t,this.element.children(".ui-menu-item").filter(!this.active||this.first()?":last":":first"))},hasScroll:function(){return this.element.height()<this.element[e.fn.prop?"prop":"attr"]("scrollHeight")},select:function(e){this._trigger("selected",e,{item:this.active})}})}(jQuery),function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset.button").bind("reset.button",f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.propAttr("disabled"):this.element.propAttr("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",h="ui-state-hover"+(a?"":" ui-state-active"),p="ui-state-focus";u.label===null&&(u.label=this.buttonElement.html()),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter.button",function(){if(u.disabled)return;e(this).addClass("ui-state-hover"),this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave.button",function(){if(u.disabled)return;e(this).removeClass(h)}).bind("click.button",function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus.button",function(){t.buttonElement.addClass(p)}).bind("blur.button",function(){t.buttonElement.removeClass(p)}),a&&(this.element.bind("change.button",function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown.button",function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup.button",function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click.button",function(){if(u.disabled||s)return!1;e(this).toggleClass("ui-state-active"),t.buttonElement.attr("aria-pressed",t.element[0].checked)}):this.type==="radio"?this.buttonElement.bind("click.button",function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown.button",function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,e(document).one("mouseup",function(){n=null})}).bind("mouseup.button",function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown.button",function(t){if(u.disabled)return!1;(t.keyCode==e.ui.keyCode.SPACE||t.keyCode==e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup.button",function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){this.element.is(":checkbox")?this.type="checkbox":this.element.is(":radio")?this.type="radio":this.element.is("input")?this.type="input":this.type="button";if(this.type==="checkbox"||this.type==="radio"){var e=this.element.parents().filter(":last"),t="label[for='"+this.element.attr("id")+"']";this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible");var n=this.element.is(":checked");n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.attr("aria-pressed",n)}else this.buttonElement=this.element},widget:function(){return this.buttonElement},destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title"),e.Widget.prototype.destroy.call(this)},_setOption:function(t,n){e.Widget.prototype._setOption.apply(this,arguments);if(t==="disabled"){n?this.element.propAttr("disabled",!0):this.element.propAttr("disabled",!1);return}this._resetButton()},refresh:function(
){var t=this.element.is(":disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.element[0].ownerDocument).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",n))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{options:{items:":button, :submit, :reset, :checkbox, :radio, a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,n){t==="disabled"&&this.buttons.button("option",t,n),e.Widget.prototype._setOption.apply(this,arguments)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy"),e.Widget.prototype.destroy.call(this)}})}(jQuery),function(e,t){var n="ui-dialog ui-widget ui-widget-content ui-corner-all ",r={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},i={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0},s=e.attrFn||{val:!0,css:!0,html:!0,text:!0,data:!0,width:!0,height:!0,offset:!0,click:!0};e.widget("ui.dialog",{options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),typeof this.originalTitle!="string"&&(this.originalTitle=""),this.options.title=this.options.title||this.originalTitle;var t=this,r=t.options,i=r.title||"&#160;",s=e.ui.dialog.getTitleId(t.element),o=(t.uiDialog=e("<div></div>")).appendTo(document.body).hide().addClass(n+r.dialogClass).css({zIndex:r.zIndex}).attr("tabIndex",-1).css("outline",0).keydown(function(n){r.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}).attr({role:"dialog","aria-labelledby":s}).mousedown(function(e){t.moveToTop(!1,e)}),u=t.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(o),f=(t.uiDialogTitlebar=e("<div></div>")).addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(o),l=e('<a href="#"></a>').addClass("ui-dialog-titlebar-close ui-corner-all").attr("role","button").hover(function(){l.addClass("ui-state-hover")},function(){l.removeClass("ui-state-hover")}).focus(function(){l.addClass("ui-state-focus")}).blur(function(){l.removeClass("ui-state-focus")}).click(function(e){return t.close(e),!1}).appendTo(f),h=(t.uiDialogTitlebarCloseText=e("<span></span>")).addClass("ui-icon ui-icon-closethick").text(r.closeText).appendTo(l),p=e("<span></span>").addClass("ui-dialog-title").attr("id",s).html(i).prependTo(f);e.isFunction(r.beforeclose)&&!e.isFunction(r.beforeClose)&&(r.beforeClose=r.beforeclose),f.find("*").add(f).disableSelection(),r.draggable&&e.fn.draggable&&t._makeDraggable(),r.resizable&&e.fn.resizable&&t._makeResizable(),t._createButtons(r.buttons),t._isOpen=!1,e.fn.bgiframe&&o.bgiframe()},_init:function(){this.options.autoOpen&&this.open()},destroy:function(){var e=this;return e.overlay&&e.overlay.destroy(),e.uiDialog.hide(),e.element.unbind(".dialog").removeData("dialog").removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),e.uiDialog.remove(),e.originalTitle&&e.element.attr("title",e.originalTitle),e},widget:function(){return this.uiDialog},close:function(t){var n=this,r,i;if(!1===n._trigger("beforeClose",t))return;return n.overlay&&n.overlay.destroy(),n.uiDialog.unbind("keypress.ui-dialog"),n._isOpen=!1,n.options.hide?n.uiDialog.hide(n.options.hide,function(){n._trigger("close",t)}):(n.uiDialog.hide(),n._trigger("close",t)),e.ui.dialog.overlay.resize(),n.options.modal&&(r=0,e(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(i=e(this).css("z-index"),isNaN(i)||(r=Math.max(r,i)))}),e.ui.dialog.maxZ=r),n},isOpen:function(){return this._isOpen},moveToTop:function(t,n){var r=this,i=r.options,s;return i.modal&&!t||!i.stack&&!i.modal?r._trigger("focus",n):(i.zIndex>e.ui.dialog.maxZ&&(e.ui.dialog.maxZ=i.zIndex),r.overlay&&(e.ui.dialog.maxZ+=1,r.overlay.$el.css("z-index",e.ui.dialog.overlay.maxZ=e.ui.dialog.maxZ)),s={scrollTop:r.element.scrollTop(),scrollLeft:r.element.scrollLeft()},e.ui.dialog.maxZ+=1,r.uiDialog.css("z-index",e.ui.dialog.maxZ),r.element.attr(s),r._trigger("focus",n),r)},open:function(){if(this._isOpen)return;var t=this,n=t.options,r=t.uiDialog;return t.overlay=n.modal?new e.ui.dialog.overlay(t):null,t._size(),t._position(n.position),r.show(n.show),t.moveToTop(!0),n.modal&&r.bind("keydown.ui-dialog",function(t){if(t.keyCode!==e.ui.keyCode.TAB)return;var n=e(":tabbable",this),r=n.filter(":first"),i=n.filter(":last");if(t.target===i[0]&&!t.shiftKey)return r.focus(1),!1;if(t.target===r[0]&&t.shiftKey)return i.focus(1),!1}),e(t.element.find(":tabbable").get().concat(r.find(".ui-dialog-buttonpane :tabbable").get().concat(r.get()))).eq(0).focus(),t._isOpen=!0,t._trigger("open"),t},_createButtons:function(t){var n=this,r=!1,i=e("<div></div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),o=e("<div></div>").addClass("ui-dialog-buttonset").appendTo(i);n.uiDialog.find(".ui-dialog-buttonpane").remove(),typeof t=="object"&&t!==null&&e.each(t,function(){return!(r=!0)}),r&&(e.each(t,function(t,r){r=e.isFunction(r)?{click:r,text:t}:r;var i=e('<button type="button"></button>').click(function(){r.click.apply(n.element[0],arguments)}).appendTo(o);e.each(r,function(e,t){if(e==="click")return;e in s?i[e](t):i.attr(e,t)}),e.fn.button&&i.button()}),i.appendTo(n.uiDialog))},_makeDraggable:function(){function t(e){return{position:e.position,offset:e.offset}}var n=this,r=n.options,i=e(document),s;n.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(i,o){s=r.height==="auto"?"auto":e(this).height(),e(this).height(e(this).height()).addClass("ui-dialog-dragging"),n._trigger("dragStart",i,t(o))},drag:function(e,r){n._trigger("drag",e,t(r))},stop:function(o,u){r.position=[u.position.left-i.scrollLeft(),u.position.top-i.scrollTop()],e(this).removeClass("ui-dialog-dragging").height(s),n._trigger("dragStop",o,t(u)),e.ui.dialog.overlay.resize()}})},_makeResizable:function(n){function r(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}n=n===t?this.options.resizable:n;var i=this,s=i.options,o=i.uiDialog.css("position"),u=typeof n=="string"?n:"n,e,s,w,se,sw,ne,nw";i.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:i.element,maxWidth:s.maxWidth,maxHeight:s.maxHeight,minWidth:s.minWidth,minHeight:i._minHeight(),handles:u,start:function(t,n){e(this).addClass("ui-dialog-resizing"),i._trigger("resizeStart",t,r(n))},resize:function(e,t){i._trigger("resize",e,r(t))},stop:function(t,n){e(this).removeClass("ui-dialog-resizing"),s.height=e(this).height(),s.width=e(this).width(),i._trigger("resizeStop",t,r(n)),e.ui.dialog.overlay.resize()}}).css("position",o).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(t){var n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n.join(" "),at:n.join(" "),offset:r.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.css({top:0,left:0}).position(e.extend({of:window},t)),i||this.uiDialog.hide()},_setOptions:function(t){var n=this,s={},o=!1;e.each(t,function(e,t){n._setOption(e,t),e in r&&(o=!0),e in i&&(s[e]=t)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",s)},_setOption:function(t,r){var i=this,s=i.uiDialog;switch(t){case"beforeclose":t="beforeClose";break;case"buttons":i._createButtons(r);break;case"closeText":i.uiDialogTitlebarCloseText.text(""+r);break;case"dialogClass":s.removeClass(i.options.dialogClass).addClass(n+r);break;case"disabled":r?s.addClass("ui-dialog-disabled"):s.removeClass("ui-dialog-disabled");break;case"draggable":var o=s.is(":data(draggable)");o&&!r&&s.draggable("destroy"),!o&&r&&i._makeDraggable();break;case"position":i._position(r);break;case"resizable":var u=s.is(":data(resizable)");u&&!r&&s.resizable("destroy"),u&&typeof r=="string"&&s.resizable("option","handles",r),!u&&r!==!1&&i._makeResizable(r);break;case"title":e(".ui-dialog-title",i.uiDialogTitlebar).html(""+(r||"&#160;"))}e.Widget.prototype._setOption.apply(i,arguments)},_size:function(){var t=this.options,n,r,i=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),t.minWidth>t.width&&(t.width=t.minWidth),n=this.uiDialog.css({height:"auto",width:t.width}).height(),r=Math.max(0,t.minHeight-n);if(t.height==="auto")if(e.support.minHeight)this.element.css({minHeight:r,height:"auto"});else{this.uiDialog.show();var s=this.element.css("height","auto").height();i||this.uiDialog.hide(),this.element.height(Math.max(s,r))}else this.element.height(Math.max(t.height-n,0));this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),e.extend(e.ui.dialog,{version:"1.8.22",uuid:0,maxZ:0,getTitleId:function(e){var t=e.attr("id");return t||(this.uuid+=1,t=this.uuid),"ui-dialog-title-"+t},overlay:function(t){this.$el=e.ui.dialog.overlay.create(t)}}),e.extend(e.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:e.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(e){return e+".dialog-overlay"}).join(" "),create:function(t){this.instances.length===0&&(setTimeout(function(){e.ui.dialog.overlay.instances.length&&e(document).bind(e.ui.dialog.overlay.events,function(t){if(e(t.target).zIndex()<e.ui.dialog.overlay.maxZ)return!1})},1),e(document).bind("keydown.dialog-overlay",function(n){t.options.closeOnEscape&&!n.isDefaultPrevented()&&n.keyCode&&n.keyCode===e.ui.keyCode.ESCAPE&&(t.close(n),n.preventDefault())}),e(window).bind("resize.dialog-overlay",e.ui.dialog.overlay.resize));var n=(this.oldInstances.pop()||e("<div></div>").addClass("ui-widget-overlay")).appendTo(document.body).css({width:this.width(),height:this.height()});return e.fn.bgiframe&&n.bgiframe(),this.instances.push(n),n},destroy:function(t){var n=e.inArray(t,this.instances);n!=-1&&this.oldInstances.push(this.instances.splice(n,1)[0]),this.instances.length===0&&e([document,window]).unbind(".dialog-overlay"),t.remove();var r=0;e.each(this.instances,function(){r=Math.max(r,this.css("z-index"))}),this.maxZ=r},height:function(){var t,n;return e.browser.msie&&e.browser.version<7?(t=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),n=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),t<n?e(window).height()+"px":t+"px"):e(document).height()+"px"},width:function(){var t,n;return e.browser.msie?(t=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),n=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),t<n?e(window).width()+"px":t+"px"):e(document).width()+"px"},resize:function(){var t=e([]);e.each(e.ui.dialog.overlay.instances,function(){t=t.add(this)}),t.css({width:0,height:0}).css({width:e.ui.dialog.overlay.width(),height:e.ui.dialog.overlay.height()})}}),e.extend(e.ui.dialog.overlay.prototype,{destroy:function(){e.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t=this,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=r.values&&r.values.length||1,u=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"+(r.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),r.range&&(r.range===!0&&(r.values||(r.values=[this._valueMin(),this._valueMin()]),r.values.length&&r.values.length!==2&&(r.values=[r.values[0],r.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:"")));for(var f=i.length;f<o;f+=1)u.push(s);this.handles=i.add(e(u.join("")).appendTo(t.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).hover(function(){r.disabled||e(this).addClass("ui-state-hover")},function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("index.ui-slider-handle",t)}),this.handles.keydown(function(r){var i=e(this).data("index.ui-slider-handle"),s,o,u,f;if(t.options.disabled)return;switch(r.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:r.preventDefault();if(!t._keySliding){t._keySliding=!0,e(this).addClass("ui-state-active"),s=t._start(r,i);if(s===!1)return}}f=t.options.step,t.options.values&&t.options.values.length?o=u=t.values(i):o=u=t.value();switch(r.keyCode){case e.ui.keyCode.HOME:u=t._valueMin();break;case e.ui.keyCode.END:u=t._valueMax();break;case e.ui.keyCode.PAGE_UP:u=t._trimAlignValue(o+(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:u=t._trimAlignValue(o-(t._valueMax()-t._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(o===t._valueMax())return;u=t._trimAlignValue(o+f);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(o===t._valueMin())return;u=t._trimAlignValue(o-f)}t._slide(r,i,u)}).keyup(function(n){var r=e(this).data("index.ui-slider-handle");t._keySliding&&(t._keySliding=!1,t._stop(n,r),t._change(n,r),e(this).removeClass("ui-state-active"))}),this._refreshValue(),this._animateOff=!1},destroy:function(){return this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all").removeData("slider").unbind(".slider"),this._mouseDestroy(),this},_mouseCapture:function(t){var n=this.options,r,i,s,o,u,f,l,c,h;return n.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),r={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(r),s=this._valueMax()-this._valueMin()+1,u=this,this.handles.each(function(t){var n=Math.abs(i-u.values(t));s>n&&(s=n,o=e(this),f=t)}),n.range===!0&&this.values(1)===n.min&&(f+=1,o=e(this.handles[f])),l=this._start(t,f),l===!1?!1:(this._mouseSliding=!0,u._handleIndex=f,o.addClass("ui-state-active").focus(),c=o.offset(),h=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=h?{left:0,top:0}:{left:t.pageX-c.left-o.width()/2,top:t.pageY-c.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,f,i),this._animateOff=!0,!0))},_mouseStart:function(e){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.propAttr("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.propAttr("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t=this.options.range,n=this.options,r=this,i=this._animateOff?!1:n.animate,s,o={},u,f,l,c;this.options.values&&this.options.values.length?this.handles.each(function(t,f){s=(r.values(t)-r._valueMin())/(r._valueMax()-r._valueMin())*100,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",e(this).stop(1,1)[i?"animate":"css"](o,n.animate),r.options.range===!0&&(r.orientation==="horizontal"?(t===0&&r.range.stop(1,1)[i?"animate":"css"]({left:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({width:s-u+"%"},{queue:!1,duration:n.animate})):(t===0&&r.range.stop(1,1)[i?"animate":"css"]({bottom:s+"%"},n.animate),t===1&&r.range[i?"animate":"css"]({height:s-u+"%"},{queue:!1,duration:n.animate}))),u=s}):(f=this.value(),l=this._valueMin(),c=this._valueMax(),s=c!==l?(f-l)/(c-l)*100:0,o[r.orientation==="horizontal"?"left":"bottom"]=s+"%",this.handle.stop(1,1)[i?"animate":"css"](o,n.animate),t==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[i?"animate":"css"]({width:s+"%"},n.animate),t==="max"&&this.orientation==="horizontal"&&this.range[i?"animate":"css"]({width:100-s+"%"},{queue:!1,duration:n.animate}),t==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[i?"animate":"css"]({height:s+"%"},n.animate),t==="max"&&this.orientation==="vertical"&&this.range[i?"animate":"css"]({height:100-s+"%"},{queue:!1,duration:n.animate}))}}),e.extend(e.ui.slider,{version:"1.8.22"})}(jQuery),function(e,t){function n(){return++i}function r(){return++s}var i=0,s=0;e.widget("ui.tabs",{options:{add:null,ajaxOptions:null,cache:!1,cookie:null,collapsible:!1,disable:null,disabled:[],enable:null,event:"click",fx:null,idPrefix:"ui-tabs-",load:null,panelTemplate:"<div></div>",remove:null,select:null,show:null,spinner:"<em>Loading&#8230;</em>",tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},_create:function(){this._tabify(!0)},_setOption:function(e,t){if(e=="selected"){if(this.options.collapsible&&t==this.options.selected)return;this.select(t)}else this.options[e]=t,this._tabify()},_tabId:function(e){return e.title&&e.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF-]/g,"")||this.options.idPrefix+n()},_sanitizeSelector:function(e){return e.replace(/:/g,"\\:")},_cookie:function(){var t=this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+r());return e.cookie.apply(null,[t].concat(e.makeArray(arguments)))},_ui:function(e,t){return{tab:e,panel:t,index:this.anchors.index(e)}},_cleanup:function(){this.lis.filter(".ui-state-processing").removeClass("ui-state-processing").find("span:data(label.tabs)").each(function(){var t=e(this);t.html(t.data("label.tabs")).removeData("label.tabs")})},_tabify:function(n){function r(t,n){t.css("display",""),!e.support.opacity&&n.opacity&&t[0].style.removeAttribute("filter")}var i=this,s=this.options,o=/^#.+/;this.list=this.element.find("ol,ul").eq(0),this.lis=e(" > li:has(a[href])",this.list),this.anchors=this.lis.map(function(){return e("a",this)[0]}),this.panels=e([]),this.anchors.each(function(t,n){var r=e(n).attr("href"),u=r.split("#")[0],f;u&&(u===location.toString().split("#")[0]||(f=e("base")[0])&&u===f.href)&&(r=n.hash,n.href=r);if(o.test(r))i.panels=i.panels.add(i.element.find(i._sanitizeSelector(r)));else if(r&&r!=="#"){e.data(n,"href.tabs",r),e.data(n,"load.tabs",r.replace(/#.*$/,""));var l=i._tabId(n);n.href="#"+l;var c=i.element.find("#"+l);c.length||(c=e(s.panelTemplate).attr("id",l).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").insertAfter(i.panels[t-1]||i.list),c.data("destroy.tabs",!0)),i.panels=i.panels.add(c)}else s.disabled.push(t)}),n?(this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all"),this.list.addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.lis.addClass("ui-state-default ui-corner-top"),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom"),s.selected===t?(location.hash&&this.anchors.each(function(e,t){if(t.hash==location.hash)return s.selected=e,!1}),typeof s.selected!="number"&&s.cookie&&(s.selected=parseInt(i._cookie(),10)),typeof s.selected!="number"&&this.lis.filter(".ui-tabs-selected").length&&(s.selected=this.lis.index(this.lis.filter(".ui-tabs-selected"))),s.selected=s.selected||(this.lis.length?0:-1)):s.selected===null&&(s.selected=-1),s.selected=s.selected>=0&&this.anchors[s.selected]||s.selected<0?s.selected:0,s.disabled=e.unique(s.disabled.concat(e.map(this.lis.filter(".ui-state-disabled"),function(e,t){return i.lis.index(e)}))).sort(),e.inArray(s.selected,s.disabled)!=-1&&s.disabled.splice(e.inArray(s.selected,s.disabled),1),this.panels.addClass("ui-tabs-hide"),this.lis.removeClass("ui-tabs-selected ui-state-active"),s.selected>=0&&this.anchors.length&&(i.element.find(i._sanitizeSelector(i.anchors[s.selected].hash)).removeClass("ui-tabs-hide"),this.lis.eq(s.selected).addClass("ui-tabs-selected ui-state-active"),i.element.queue("tabs",function(){i._trigger("show",null,i._ui(i.anchors[s.selected],i.element.find(i._sanitizeSelector(i.anchors[s.selected].hash))[0]))}),this.load(s.selected)),e(window).bind("unload",function(){i.lis.add(i.anchors).unbind(".tabs"),i.lis=i.anchors=i.panels=null})):s.selected=this.lis.index(this.lis.filter(".ui-tabs-selected")),this.element[s.collapsible?"addClass":"removeClass"]("ui-tabs-collapsible"),s.cookie&&this._cookie(s.selected,s.cookie);for(var u=0,f;f=this.lis[u];u++)e(f)[e.inArray(u,s.disabled)!=-1&&!e(f).hasClass("ui-tabs-selected")?"addClass":"removeClass"]("ui-state-disabled");s.cache===!1&&this.anchors.removeData("cache.tabs"),this.lis.add(this.anchors).unbind(".tabs");if(s.event!=="mouseover"){var l=function(e,t){t.is(":not(.ui-state-disabled)")&&t.addClass("ui-state-"+e)},c=function(e,t){t.removeClass("ui-state-"+e)};this.lis.bind("mouseover.tabs",function(){l("hover",e(this))}),this.lis.bind("mouseout.tabs",function(){c("hover",e(this))}),this.anchors.bind("focus.tabs",function(){l("focus",e(this).closest("li"))}),this.anchors.bind("blur.tabs",function(){c("focus",e(this).closest("li"))})}var h,p;s.fx&&(e.isArray(s.fx)?(h=s.fx[0],p=s.fx[1]):h=p=s.fx);var d=p?function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.hide().removeClass("ui-tabs-hide").animate(p,p.duration||"normal",function(){r(n,p),i._trigger("show",null,i._ui(t,n[0]))})}:function(t,n){e(t).closest("li").addClass("ui-tabs-selected ui-state-active"),n.removeClass("ui-tabs-hide"),i._trigger("show",null,i._ui(t,n[0]))},v=h?function(e,t){t.animate(h,h.duration||"normal",function(){i.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),r(t,h),i.element.dequeue("tabs")})}:function(e,t,n){i.lis.removeClass("ui-tabs-selected ui-state-active"),t.addClass("ui-tabs-hide"),i.element.dequeue("tabs")};this.anchors.bind(s.event+".tabs",function(){var t=this,n=e(t).closest("li"),r=i.panels.filter(":not(.ui-tabs-hide)"),o=i.element.find(i._sanitizeSelector(t.hash));if(n.hasClass("ui-tabs-selected")&&!s.collapsible||n.hasClass("ui-state-disabled")||n.hasClass("ui-state-processing")||i.panels.filter(":animated").length||i._trigger("select",null,i._ui(this,o[0]))===!1)return this.blur(),!1;s.selected=i.anchors.index(this),i.abort();if(s.collapsible){if(n.hasClass("ui-tabs-selected"))return s.selected=-1,s.cookie&&i._cookie(s.selected,s.cookie),i.element.queue("tabs",function(){v(t,r)}).dequeue("tabs"),this.blur(),!1;if(!r.length)return s.cookie&&i._cookie(s.selected,s.cookie),i.element.queue("tabs",function(){d(t,o)}),i.load(i.anchors.index(this)),this.blur(),!1}s.cookie&&i._cookie(s.selected,s.cookie);if(!o.length)throw"jQuery UI Tabs: Mismatching fragment identifier.";r.length&&i.element.queue("tabs",function(){v(t,r)}),i.element.queue("tabs",function(){d(t,o)}),i.load(i.anchors.index(this)),e.browser.msie&&this.blur()}),this.anchors.bind("click.tabs",function(){return!1})},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},destroy:function(){var t=this.options;return this.abort(),this.element.unbind(".tabs").removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible").removeData("tabs"),this.list.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"),this.anchors.each(function(){var t=e.data(this,"href.tabs");t&&(this.href=t);var n=e(this).unbind(".tabs");e.each(["href","load","cache"],function(e,t){n.removeData(t+".tabs")})}),this.lis.unbind(".tabs").add(this.panels).each(function(){e.data(this,"destroy.tabs")?e(this).remove():e(this).removeClass(["ui-state-default","ui-corner-top","ui-tabs-selected","ui-state-active","ui-state-hover","ui-state-focus","ui-state-disabled","ui-tabs-panel","ui-widget-content","ui-corner-bottom","ui-tabs-hide"].join(" "))}),t.cookie&&this._cookie(null,t.cookie),this},add:function(n,r,i){i===t&&(i=this.anchors.length);var s=this,o=this.options,u=e(o.tabTemplate.replace(/#\{href\}/g,n).replace(/#\{label\}/g,r)),f=n.indexOf("#")?this._tabId(e("a",u)[0]):n.replace("#","");u.addClass("ui-state-default ui-corner-top").data("destroy.tabs",!0);var l=s.element.find("#"+f);return l.length||(l=e(o.panelTemplate).attr("id",f).data("destroy.tabs",!0)),l.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom ui-tabs-hide"),i>=this.lis.length?(u.appendTo(this.list),l.appendTo(this.list[0].parentNode)):(u.insertBefore(this.lis[i]),l.insertBefore(this.panels[i])),o.disabled=e.map(o.disabled,function(e,t){return e>=i?++e:e}),this._tabify(),this.anchors.length==1&&(o.selected=0,u.addClass("ui-tabs-selected ui-state-active"),l.removeClass("ui-tabs-hide"),this.element.queue("tabs",function(){s._trigger("show",null,s._ui(s.anchors[0],s.panels[0]))}),this.load(0)),this._trigger("add",null,this._ui(this.anchors[i],this.panels[i])),this},remove:function(t){t=this._getIndex(t);var n=this.options,r=this.lis.eq(t).remove(),i=this.panels.eq(t).remove();return r.hasClass("ui-tabs-selected")&&this.anchors.length>1&&this.select(t+(t+1<this.anchors.length?1:-1)),n.disabled=e.map(e.grep(n.disabled,function(e,n){return e!=t}),function(e,n){return e>=t?--e:e}),this._tabify(),this._trigger("remove",null,this._ui(r.find("a")[0],i[0])),this},enable:function(t){t=this._getIndex(t);var n=this.options;if(e.inArray(t,n.disabled)==-1)return;return this.lis.eq(t).removeClass("ui-state-disabled"),n.disabled=e.grep(n.disabled,function(e,n){return e!=t}),this._trigger("enable",null,this._ui(this.anchors[t],this.panels[t])),this},disable:function(e){e=this._getIndex(e);var t=this,n=this.options;return e!=n.selected&&(this.lis.eq(e).addClass("ui-state-disabled"),n.disabled.push(e),n.disabled.sort(),this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))),this},select:function(e){e=this._getIndex(e);if(e==-1){if(!this.options.collapsible||this.options.selected==-1)return this;e=this.options.selected}return this.anchors.eq(e).trigger(this.options.event+".tabs"),this},load:function(t){t=this._getIndex(t);var n=this,r=this.options,i=this.anchors.eq(t)[0],s=e.data(i,"load.tabs");this.abort();if(!s||this.element.queue("tabs").length!==0&&e.
data(i,"cache.tabs")){this.element.dequeue("tabs");return}this.lis.eq(t).addClass("ui-state-processing");if(r.spinner){var o=e("span",i);o.data("label.tabs",o.html()).html(r.spinner)}return this.xhr=e.ajax(e.extend({},r.ajaxOptions,{url:s,success:function(s,o){n.element.find(n._sanitizeSelector(i.hash)).html(s),n._cleanup(),r.cache&&e.data(i,"cache.tabs",!0),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{r.ajaxOptions.success(s,o)}catch(u){}},error:function(e,s,o){n._cleanup(),n._trigger("load",null,n._ui(n.anchors[t],n.panels[t]));try{r.ajaxOptions.error(e,s,t,i)}catch(o){}}})),n.element.dequeue("tabs"),this},abort:function(){return this.element.queue([]),this.panels.stop(!1,!0),this.element.queue("tabs",this.element.queue("tabs").splice(-2,2)),this.xhr&&(this.xhr.abort(),delete this.xhr),this._cleanup(),this},url:function(e,t){return this.anchors.eq(e).removeData("cache.tabs").data("load.tabs",t),this},length:function(){return this.anchors.length}}),e.extend(e.ui.tabs,{version:"1.8.22"}),e.extend(e.ui.tabs.prototype,{rotation:null,rotate:function(e,t){var n=this,r=this.options,i=n._rotate||(n._rotate=function(t){clearTimeout(n.rotation),n.rotation=setTimeout(function(){var e=r.selected;n.select(++e<n.anchors.length?e:0)},e),t&&t.stopPropagation()}),s=n._unrotate||(n._unrotate=t?function(e){i()}:function(e){e.clientX&&n.rotate(null)});return e?(this.element.bind("tabsshow",i),this.anchors.bind(r.event+".tabs",s),i()):(clearTimeout(n.rotation),this.element.unbind("tabsshow",i),this.anchors.unbind(r.event+".tabs",s),delete this._rotate,delete this._unrotate),this}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.bind("mouseout",function(e){var n=$(e.target).closest(t);if(!n.length)return;n.removeClass("ui-state-hover ui-datepicker-prev-hover ui-datepicker-next-hover")}).bind("mouseover",function(n){var r=$(n.target).closest(t);if($.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||!r.length)return;r.parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),r.addClass("ui-state-hover"),r.hasClass("ui-datepicker-prev")&&r.addClass("ui-datepicker-prev-hover"),r.hasClass("ui-datepicker-next")&&r.addClass("ui-datepicker-next-hover")})}function extendRemove(e,t){$.extend(e,t);for(var n in t)if(t[n]==null||t[n]==undefined)e[n]=t[n];return e}function isArray(e){return e&&($.browser.safari&&typeof e=="object"&&e.length||e.constructor&&e.constructor.toString().match(/\Array\(\)/))}$.extend($.ui,{datepicker:{version:"1.8.22"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline=nodeName=="div"||nodeName=="span";target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),nodeName=="input"?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]);if(n.hasClass(this.markerClassName))return;this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e)},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");(i=="focus"||i=="both")&&e.focus(this._showDatepicker);if(i=="button"||i=="both"){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(o==""?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){var t=0,n=0;for(var r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);if(n.hasClass(this.markerClassName))return;n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block")},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)}extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null;if(!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),r=="input"?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r=="div"||r=="span")&&t.removeClass(this.markerClassName).empty()},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").removeAttr("disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(!t.hasClass(this.markerClassName))return;var r=e.nodeName.toLowerCase();if(r=="input")e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r=="div"||r=="span"){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").attr("disabled","disabled")}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(arguments.length==2&&typeof t=="string")return t=="defaults"?$.extend({},$.datepicker._defaults):r?t=="all"?$.extend({},r.settings):this._get(r,t):null;var i=t||{};typeof t=="string"&&(i={},i[t]=n);if(r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),o!==null&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),u!==null&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");t._keyEvent=!0;if($.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else e.keyCode==36&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||r<" "||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){e=e.target||e,e.nodeName.toLowerCase()!="input"&&(e=$("input",e.parentNode)[0]);if($.datepicker._isDisabledDatepicker(e)||$.datepicker._lastInput==e)return;var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r===!1)return;extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|=$(this).css("position")=="fixed",!i}),i&&$.browser.opera&&($.datepicker._pos[0]-=document.documentElement.scrollLeft,$.datepicker._pos[1]-=document.documentElement.scrollTop);var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};$.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"});if(!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(!!e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&$.effects[o]?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}},_updateDatepicker:function(e){var t=this;t.maxRows=4;var n=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var r=e.dpDiv.find("iframe.ui-datepicker-cover");!r.length||r.css({left:-n[0],top:-n[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var i=this._getNumberOfMonths(e),s=i[1],o=17;e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&e.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),e.dpDiv[(i[0]!=1||i[1]!=1?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus();if(e.yearshtml){var u=e.yearshtml;setTimeout(function(){u===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),u=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){var t=this._getInst(e),n=this._get(t,"isRTL");while(e&&(e.type=="hidden"||e.nodeType!=1||$.expr.filters.hidden(e)))e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(!t||e&&t!=$.data(e,PROP_NAME))return;if(this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&$.effects[n]?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv[n=="slideDown"?"slideUp":n=="fadeIn"?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if(!$.datepicker._curInst)return;var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&t.parents("#"+$.datepicker._mainDivId).length==0&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);if(this._isDisabledDatepicker(r[0]))return;this._adjustInstDate(i,t+(n=="M"?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i)},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+(n=="M"?"Month":"Year")]=i["draw"+(n=="M"?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if($(r).hasClass(this._unselectableClass)||this._isDisabledDatepicker(i[0]))return;var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(e){var t=$(e),n=this._getInst(t[0]);this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=t!=null?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],typeof r.input[0]!="object"&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(e==null||t==null)throw"Invalid arguments";t=typeof t=="object"?t.toString():t+"";if(t=="")return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r=typeof r!="string"?r:(new Date).getFullYear()%100+parseInt(r,10);var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r=e=="@"?14:e=="!"?20:e=="y"&&n?4:e=="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;$.each(i,function(e,n){var r=n[1];if(t.substr(g,r.length).toLowerCase()==r.toLowerCase())return s=n[0],g+=r.length,!1});if(s!=-1)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0;for(var y=0;y<e.length;y++)if(h)e.charAt(y)=="'"&&!p("'")?h=!1:m();else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length)throw"Extra/unparsed characters found in date: "+t.substring(g);a==-1?a=(new Date).getFullYear():a<100&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(a<=r?0:-100));if(c>-1){f=1,l=c;do{var w=this._getDaysInMonth(a,f-1);if(l<=w)break;f++,l-=w}while(!0)}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))while(r.length<n)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)e.charAt(h)=="'"&&!u("'")?c=!1:l+=e.charAt(h);else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=t.getTime()*1e4+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n};for(var i=0;i<e.length;i++)if(n)e.charAt(i)=="'"&&!r("'")?n=!1:t+=e.charAt(i);else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()==e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i,s;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=u.exec(t);while(f){switch(f[2]||"d"){case"d":case"D":o+=parseInt(f[1],10);break;case"w":case"W":o+=parseInt(f[1],10)*7;break;case"m":case"M":s+=parseInt(f[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(f[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}f=u.exec(t)}return new Date(i,s,o)},s=t==null||t===""?n:typeof t=="string"?i(t):typeof t=="number"?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&s.toString()=="Invalid Date"?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()==""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id;e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=o[0]!=1||o[1]!=1,l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;p<0&&(p+=12,d--);if(h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));v=c&&v<c?c:v;while(this._daylightSavingAdjust(new Date(d,p,1))>v)p--,p<0&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),k=this._get(e,"dayNamesShort"),L=this._get(e,"dayNamesMin"),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),P=this._get(e,"calculateWeek")||this.iso8601Week,H=this._getDefaultDate(e),B="";for(var j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){U+='<div class="ui-datepicker-group';if(o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&j==0?n?b:g:"")+(/all|right/.test(R)&&j==0?n?g:b:"")+this._generateMonthYearHeader
(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead>'+"<tr>";var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"";for(var W=0;W<7;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+">"+'<span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f?this.maxRows>K?this.maxRows:K:K;this.maxRows=Q;var G=this._daylightSavingAdjust(new Date(d,p,1-J));for(var Y=0;Y<Q;Y++){U+="<tr>";var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"";for(var W=0;W<7;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&G<c||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+((!tt||_)&&et[2]?' title="'+et[2]+'"':"")+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.browser.msie&&parseInt($.browser.version,10)<7&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;v<12;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}l||(c+=h+(s||!a||!f?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';for(;b<=w;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}}return c+=this._get(e,"yearSuffix"),l&&(c+=(s||!a||!f?"&#xa0;":"")+h),c+="</div>",c},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n=="Y"?t:0),i=e.drawMonth+(n=="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n=="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n=="M"||n=="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return i=r&&i>r?r:i,i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find("body").append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return typeof e!="string"||e!="isDisabled"&&e!="getDate"&&e!="widget"?e=="option"&&arguments.length==2&&typeof arguments[1]=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){typeof e=="string"?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.8.22",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e,t){e.widget("ui.progressbar",{options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove(),e.Widget.prototype.destroy.apply(this,arguments)},value:function(e){return e===t?this._value():(this._setOption("value",e),this)},_setOption:function(t,n){t==="value"&&(this.options.value=n,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),e.Widget.prototype._setOption.apply(this,arguments)},_value:function(){var e=this.options.value;return typeof e!="number"&&(e=0),Math.min(this.options.max,Math.max(this.min,e))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var e=this.value(),t=this._percentage();this.oldValue!==e&&(this.oldValue=e,this._trigger("change")),this.valueDiv.toggle(e>this.min).toggleClass("ui-corner-right",e===this.options.max).width(t.toFixed(0)+"%"),this.element.attr("aria-valuenow",e)}}),e.extend(e.ui.progressbar,{version:"1.8.22"})}(jQuery),jQuery.effects||function(e,t){function n(t){var n;return t&&t.constructor==Array&&t.length==3?t:(n=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(t))?[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10)]:(n=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(t))?[parseFloat(n[1])*2.55,parseFloat(n[2])*2.55,parseFloat(n[3])*2.55]:(n=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(t))?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16)]:(n=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(t))?[parseInt(n[1]+n[1],16),parseInt(n[2]+n[2],16),parseInt(n[3]+n[3],16)]:(n=/rgba\(0, 0, 0, 0\)/.exec(t))?f.transparent:f[e.trim(t).toLowerCase()]}function r(t,r){var i;do{i=(e.curCSS||e.css)(t,r);if(i!=""&&i!="transparent"||e.nodeName(t,"body"))break;r="backgroundColor"}while(t=t.parentNode);return n(i)}function i(){var e=document.defaultView?document.defaultView.getComputedStyle(this,null):this.currentStyle,t={},n,r;if(e&&e.length&&e[0]&&e[e[0]]){var i=e.length;while(i--)n=e[i],typeof e[n]=="string"&&(r=n.replace(/\-(\w)/g,function(e,t){return t.toUpperCase()}),t[r]=e[n])}else for(n in e)typeof e[n]=="string"&&(t[n]=e[n]);return t}function s(t){var n,r;for(n in t)r=t[n],(r==null||e.isFunction(r)||n in c||/scrollbar/.test(n)||!/color/i.test(n)&&isNaN(parseFloat(r)))&&delete t[n];return t}function o(e,t){var n={_:0},r;for(r in t)e[r]!=t[r]&&(n[r]=t[r]);return n}function u(t,n,r,i){typeof t=="object"&&(i=n,r=null,n=t,t=n.effect),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n=n||{},r=r||n.duration,r=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,i=i||n.complete,[t,n,r,i]}function a(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects[t]?!0:!1}e.effects={},e.each(["backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","borderColor","color","outlineColor"],function(t,i){e.fx.step[i]=function(e){e.colorInit||(e.start=r(e.elem,i),e.end=n(e.end),e.colorInit=!0),e.elem.style[i]="rgb("+Math.max(Math.min(parseInt(e.pos*(e.end[0]-e.start[0])+e.start[0],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[1]-e.start[1])+e.start[1],10),255),0)+","+Math.max(Math.min(parseInt(e.pos*(e.end[2]-e.start[2])+e.start[2],10),255),0)+")"}});var f={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0],transparent:[255,255,255]},l=["add","remove","toggle"],c={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.effects.animateClass=function(t,n,r,u){return e.isFunction(r)&&(u=r,r=null),this.queue(function(){var a=e(this),f=a.attr("style")||" ",c=s(i.call(this)),p,v=a.attr("class")||"";e.each(l,function(e,n){t[n]&&a[n+"Class"](t[n])}),p=s(i.call(this)),a.attr("class",v),a.animate(o(c,p),{queue:!1,duration:n,easing:r,complete:function(){e.each(l,function(e,n){t[n]&&a[n+"Class"](t[n])}),typeof a.attr("style")=="object"?(a.attr("style").cssText="",a.attr("style").cssText=f):a.attr("style",f),u&&u.apply(this,arguments),e.dequeue(this)}})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{add:t},n,r,i]):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.apply(this,[{remove:t},n,r,i]):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.apply(this,[r?{add:n}:{remove:n},i,s,o]):this._toggleClass(n,r):e.effects.animateClass.apply(this,[{toggle:n},r,i,s])},switchClass:function(t,n,r,i,s){return e.effects.animateClass.apply(this,[{add:n,remove:t},r,i,s])}}),e.extend(e.effects,{version:"1.8.22",save:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.data("ec.storage."+t[n],e[0].style[t[n]])},restore:function(e,t){for(var n=0;n<t.length;n++)t[n]!==null&&e.css(t[n],e.data("ec.storage."+t[n]))},setMode:function(e,t){return t=="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i=document.activeElement;try{i.id}catch(s){i=document.body}return t.wrap(r),(t[0]===i||e.contains(t[0],i))&&e(i).focus(),r=t.parent(),t.css("position")=="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),r.css(n).show()},removeWrapper:function(t){var n,r=document.activeElement;return t.parent().is(".ui-effects-wrapper")?(n=t.parent().replaceWith(t),(t[0]===r||e.contains(t[0],r))&&e(r).focus(),n):t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(t,n,r,i){var s=u.apply(this,arguments),o={options:s[1],duration:s[2],callback:s[3]},a=o.options.mode,f=e.effects[t];return e.fx.off||!f?a?this[a](o.duration,o.callback):this.each(function(){o.callback&&o.callback.call(this)}):f.call(this,o)},_show:e.fn.show,show:function(e){if(a(e))return this._show.apply(this,arguments);var t=u.apply(this,arguments);return t[1].mode="show",this.effect.apply(this,t)},_hide:e.fn.hide,hide:function(e){if(a(e))return this._hide.apply(this,arguments);var t=u.apply(this,arguments);return t[1].mode="hide",this.effect.apply(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(a(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=u.apply(this,arguments);return n[1].mode="toggle",this.effect.apply(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}}),e.easing.jswing=e.easing.swing,e.extend(e.easing,{def:"easeOutQuad",swing:function(t,n,r,i,s){return e.easing[e.easing.def](t,n,r,i,s)},easeInQuad:function(e,t,n,r,i){return r*(t/=i)*t+n},easeOutQuad:function(e,t,n,r,i){return-r*(t/=i)*(t-2)+n},easeInOutQuad:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t+n:-r/2*(--t*(t-2)-1)+n},easeInCubic:function(e,t,n,r,i){return r*(t/=i)*t*t+n},easeOutCubic:function(e,t,n,r,i){return r*((t=t/i-1)*t*t+1)+n},easeInOutCubic:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t+n:r/2*((t-=2)*t*t+2)+n},easeInQuart:function(e,t,n,r,i){return r*(t/=i)*t*t*t+n},easeOutQuart:function(e,t,n,r,i){return-r*((t=t/i-1)*t*t*t-1)+n},easeInOutQuart:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t+n:-r/2*((t-=2)*t*t*t-2)+n},easeInQuint:function(e,t,n,r,i){return r*(t/=i)*t*t*t*t+n},easeOutQuint:function(e,t,n,r,i){return r*((t=t/i-1)*t*t*t*t+1)+n},easeInOutQuint:function(e,t,n,r,i){return(t/=i/2)<1?r/2*t*t*t*t*t+n:r/2*((t-=2)*t*t*t*t+2)+n},easeInSine:function(e,t,n,r,i){return-r*Math.cos(t/i*(Math.PI/2))+r+n},easeOutSine:function(e,t,n,r,i){return r*Math.sin(t/i*(Math.PI/2))+n},easeInOutSine:function(e,t,n,r,i){return-r/2*(Math.cos(Math.PI*t/i)-1)+n},easeInExpo:function(e,t,n,r,i){return t==0?n:r*Math.pow(2,10*(t/i-1))+n},easeOutExpo:function(e,t,n,r,i){return t==i?n+r:r*(-Math.pow(2,-10*t/i)+1)+n},easeInOutExpo:function(e,t,n,r,i){return t==0?n:t==i?n+r:(t/=i/2)<1?r/2*Math.pow(2,10*(t-1))+n:r/2*(-Math.pow(2,-10*--t)+2)+n},easeInCirc:function(e,t,n,r,i){return-r*(Math.sqrt(1-(t/=i)*t)-1)+n},easeOutCirc:function(e,t,n,r,i){return r*Math.sqrt(1-(t=t/i-1)*t)+n},easeInOutCirc:function(e,t,n,r,i){return(t/=i/2)<1?-r/2*(Math.sqrt(1-t*t)-1)+n:r/2*(Math.sqrt(1-(t-=2)*t)+1)+n},easeInElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return-(u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o))+n},easeOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i)==1)return n+r;o||(o=i*.3);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return u*Math.pow(2,-10*t)*Math.sin((t*i-s)*2*Math.PI/o)+r+n},easeInOutElastic:function(e,t,n,r,i){var s=1.70158,o=0,u=r;if(t==0)return n;if((t/=i/2)==2)return n+r;o||(o=i*.3*1.5);if(u<Math.abs(r)){u=r;var s=o/4}else var s=o/(2*Math.PI)*Math.asin(r/u);return t<1?-0.5*u*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)+n:u*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*2*Math.PI/o)*.5+r+n},easeInBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158),i*(n/=s)*n*((o+1)*n-o)+r},easeOutBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158),i*((n=n/s-1)*n*((o+1)*n+o)+1)+r},easeInOutBack:function(e,n,r,i,s,o){return o==t&&(o=1.70158),(n/=s/2)<1?i/2*n*n*(((o*=1.525)+1)*n-o)+r:i/2*((n-=2)*n*(((o*=1.525)+1)*n+o)+2)+r},easeInBounce:function(t,n,r,i,s){return i-e.easing.easeOutBounce(t,s-n,0,i,s)+r},easeOutBounce:function(e,t,n,r,i){return(t/=i)<1/2.75?r*7.5625*t*t+n:t<2/2.75?r*(7.5625*(t-=1.5/2.75)*t+.75)+n:t<2.5/2.75?r*(7.5625*(t-=2.25/2.75)*t+.9375)+n:r*(7.5625*(t-=2.625/2.75)*t+.984375)+n},easeInOutBounce:function(t,n,r,i,s){return n<s/2?e.easing.easeInBounce(t,n*2,0,i,s)*.5+r:e.easing.easeOutBounce(t,n*2-s,0,i,s)*.5+i*.5+r}})}(jQuery),function(e,t){e.effects.blind=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var o=e.effects.createWrapper(n).css({overflow:"hidden"}),u=s=="vertical"?"height":"width",f=s=="vertical"?o.height():o.width();i=="show"&&o.css(u,0);var l={};l[u]=i=="show"?f:0,o.animate(l,t.duration,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e,t){e.effects.bounce=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"up",o=t.options.distance||20,u=t.options.times||5,f=t.duration||250;/show|hide/.test(i)&&r.push("opacity"),e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",o=t.options.distance||(l=="top"?n.outerHeight(!0)/3:n.outerWidth(!0)/3);i=="show"&&n.css("opacity",0).css(l,c=="pos"?-o:o),i=="hide"&&(o/=u*2),i!="hide"&&u--;if(i=="show"){var h={opacity:1};h[l]=(c=="pos"?"+=":"-=")+o,n.animate(h,f/2,t.options.easing),o/=2,u--}for(var p=0;p<u;p++){var d={},v={};d[l]=(c=="pos"?"-=":"+=")+o,v[l]=(c=="pos"?"+=":"-=")+o,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing),o=i=="hide"?o*2:o/2}if(i=="hide"){var h={opacity:0};h[l]=(c=="pos"?"-=":"+=")+o,n.animate(h,f/2,t.options.easing,function(){n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}else{var d={},v={};d[l]=(c=="pos"?"-=":"+=")+o,v[l]=(c=="pos"?"+=":"-=")+o,n.animate(d,f/2,t.options.easing).animate(v,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)})}n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e,t){e.effects.clip=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","height","width"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"vertical";e.effects.save(n,r),n.show();var o=e.effects.createWrapper(n).css({overflow:"hidden"}),u=n[0].tagName=="IMG"?o:n,f={size:s=="vertical"?"height":"width",position:s=="vertical"?"top":"left"},l=s=="vertical"?u.height():u.width();i=="show"&&(u.css(f.size,0),u.css(f.position,l/2));var c={};c[f.size]=i=="show"?l:0,c[f.position]=i=="show"?0:l/2,u.animate(c,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.drop=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","opacity"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var o=s=="up"||s=="down"?"top":"left",u=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(o=="top"?n.outerHeight(!0)/2:n.outerWidth(!0)/2);i=="show"&&n.css("opacity",0).css(o,u=="pos"?-f:f);var l={opacity:i=="show"?1:0};l[o]=(i=="show"?u=="pos"?"+=":"-=":u=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.explode=function(t){return this.queue(function(){var n=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3,r=t.options.pieces?Math.round(Math.sqrt(t.options.pieces)):3;t.options.mode=t.options.mode=="toggle"?e(this).is(":visible")?"hide":"show":t.options.mode;var i=e(this).show().css("visibility","hidden"),s=i.offset();s.top-=parseInt(i.css("marginTop"),10)||0,s.left-=parseInt(i.css("marginLeft"),10)||0;var o=i.outerWidth(!0),u=i.outerHeight(!0);for(var f=0;f<n;f++)for(var l=0;l<r;l++)i.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-l*(o/r),top:-f*(u/n)}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:o/r,height:u/n,left:s.left+l*(o/r)+(t.options.mode=="show"?(l-Math.floor(r/2))*(o/r):0),top:s.top+f*(u/n)+(t.options.mode=="show"?(f-Math.floor(n/2))*(u/n):0),opacity:t.options.mode=="show"?0:1}).animate({left:s.left+l*(o/r)+(t.options.mode=="show"?0:(l-Math.floor(r/2))*(o/r)),top:s.top+f*(u/n)+(t.options.mode=="show"?0:(f-Math.floor(n/2))*(u/n)),opacity:t.options.mode=="show"?1:0},t.duration||500);setTimeout(function(){t.options.mode=="show"?i.css({visibility:"visible"}):i.css({visibility:"visible"}).hide(),t.callback&&t.callback.apply(i[0]),i.dequeue(),e("div.ui-effects-explode").remove()},t.duration||500)})}}(jQuery),function(e,t){e.effects.fade=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"hide");n.animate({opacity:r},{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.fold=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"hide"),s=t.options.size||15,o=!!t.options.horizFirst,u=t.duration?t.duration/2:e.fx.speeds._default/2;e.effects.save(n,r),n.show();var f=e.effects.createWrapper(n).css({overflow:"hidden"}),l=i=="show"!=o,c=l?["width","height"]:["height","width"],h=l?[f.width(),f.height()]:[f.height(),f.width()],p=/([0-9]+)%/.exec(s);p&&(s=parseInt(p[1],10)/100*h[i=="hide"?0:1]),i=="show"&&f.css(o?{height:0,width:s}:{height:s,width:0});var d={},v={};d[c[0]]=i=="show"?h[0]:s,v[c[1]]=i=="show"?h[1]:0,f.animate(d,u,t.options.easing).animate(v,u,t.options.easing,function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery),function(e,t){e.effects.highlight=function(t){return this.queue(function(){var n=e(this),r=["backgroundImage","backgroundColor","opacity"],i=e.effects.setMode(n,t.options.mode||"show"),s={backgroundColor:n.css("backgroundColor")};i=="hide"&&(s.opacity=0),e.effects.save(n,r),n.show().css({backgroundImage:"none",backgroundColor:t.options.color||"#ffff99"}).animate(s,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),i=="show"&&!e.support.opacity&&this.style.removeAttribute("filter"),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.pulsate=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"show"),i=(t.options.times||5)*2-1,s=t.duration?t.duration/2:e.fx.speeds._default/2,o=n.is(":visible"),u=0;o||(n.css("opacity",0).show(),u=1),(r=="hide"&&o||r=="show"&&!o)&&i--;for(var f=0;f<i;f++)n.animate({opacity:u},s,t.options.easing),u=(u+1)%2;n.animate({opacity:u},s,t.options.easing,function(){u==0&&n.hide(),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}).dequeue()})}}(jQuery),function(e,t){e.effects.puff=function(t){return this.queue(function(){var n=e(this),r=e.effects.setMode(n,t.options.mode||"hide"),i=parseInt(t.options.percent,10)||150,s=i/100,o={height:n.height(),width:n.width()};e.extend(t.options,{fade:!0,mode:r,percent:r=="hide"?i:100,from:r=="hide"?o:{height:o.height*s,width:o.width*s}}),n.effect("scale",t.options,t.duration,t.callback),n.dequeue()})},e.effects.scale=function(t){return this.queue(function(){var n=e(this),r=e.extend(!0,{},t.options),i=e.effects.setMode(n,t.options.mode||"effect"),s=parseInt(t.options.percent,10)||(parseInt(t.options.percent,10)==0?0:i=="hide"?0:100),o=t.options.direction||"both",u=t.options.origin;i!="effect"&&(r.origin=u||["middle","center"],r.restore=!0);var f={height:n.height(),width:n.width()};n.from=t.options.from||(i=="show"?{height:0,width:0}:f);var l={y:o!="horizontal"?s/100:1,x:o!="vertical"?s/100:1};n.to={height:f.height*l.y,width:f.width*l.x},t.options.fade&&(i=="show"&&(n.from.opacity=0,n.to.opacity=1),i=="hide"&&(n.from.opacity=1,n.to.opacity=0)),r.from=n.from,r.to=n.to,r.mode=i,n.effect("size",r,t.duration,t.callback),n.dequeue()})},e.effects.size=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],i=["position","top","bottom","left","right","overflow","opacity"],s=["width","height","overflow"],o=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],f=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],l=e.effects.setMode(n,t.options.mode||"effect"),c=t.options.restore||!1,h=t.options.scale||"both",p=t.options.origin,d={height:n.height(),width:n.width()};n.from=t.options.from||d,n.to=t.options.to||d;if(p){var v=e.effects.getBaseline(p,d);n.from.top=(d.height-n.from.height)*v.y,n.from.left=(d.width-n.from.width)*v.x,n.to.top=(d.height-n.to.height)*v.y,n.to.left=(d.width-n.to.width)*v.x}var m={from:{y:n.from.height/d.height,x:n.from.width/d.width},to:{y:n.to.height/d.height,x:n.to.width/d.width}};if(h=="box"||h=="both")m.from.y!=m.to.y&&(r=r.concat(u),n.from=e.effects.setTransition(n,u,m.from.y,n.from),n.to=e.effects.setTransition(n,u,m.to.y,n.to)),m.from.x!=m.to.x&&(r=r.concat(f),n.from=e.effects.setTransition(n,f,m.from.x,n.from),n.to=e.effects.setTransition(n,f,m.to.x,n.to));(h=="content"||h=="both")&&m.from.y!=m.to.y&&(r=r.concat(o),n.from=e.effects.setTransition(n,o,m.from.y,n.from),n.to=e.effects.setTransition(n,o,m.to.y,n.to)),e.effects.save(n,c?r:i),n.show(),e.effects.createWrapper(n),n.css("overflow","hidden").css(n.from);if(h=="content"||h=="both")u=u.concat(["marginTop","marginBottom"]).concat(o),f=f.concat(["marginLeft","marginRight"]),s=r.concat(u).concat(f),n.find("*[width]").each(function(){var n=e(this);c&&e.effects.save(n,s);var r={height:n.height(),width:n.width()};n.from={height:r.height*m.from.y,width:r.width*m.from.x},n.to={height:r.height*m.to.y,width:r.width*m.to.x},m.from.y!=m.to.y&&(n.from=e.effects.setTransition(n,u,m.from.y,n.from),n.to=e.effects.setTransition(n,u,m.to.y,n.to)),m.from.x!=m.to.x&&(n.from=e.effects.setTransition(n,f,m.from.x,n.from),n.to=e.effects.setTransition(n,f,m.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.options.easing,function(){c&&e.effects.restore(n,s)})});n.animate(n.to,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){n.to.opacity===0&&n.css("opacity",n.from.opacity),l=="hide"&&n.hide(),e.effects.restore(n,c?r:i),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.shake=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"effect"),s=t.options.direction||"left",o=t.options.distance||20,u=t.options.times||3,f=t.duration||t.options.duration||140;e.effects.save(n,r),n.show(),e.effects.createWrapper(n);var l=s=="up"||s=="down"?"top":"left",c=s=="up"||s=="left"?"pos":"neg",h={},p={},d={};h[l]=(c=="pos"?"-=":"+=")+o,p[l]=(c=="pos"?"+=":"-=")+o*2,d[l]=(c=="pos"?"-=":"+=")+o*2,n.animate(h,f,t.options.easing);for(var v=1;v<u;v++)n.animate(p,f,t.options.easing).animate(d,f,t.options.easing);n.animate(p,f,t.options.easing).animate(h,f/2,t.options.easing,function(){e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments)}),n.queue("fx",function(){n.dequeue()}),n.dequeue()})}}(jQuery),function(e,t){e.effects.slide=function(t){return this.queue(function(){var n=e(this),r=["position","top","bottom","left","right"],i=e.effects.setMode(n,t.options.mode||"show"),s=t.options.direction||"left";e.effects.save(n,r),n.show(),e.effects.createWrapper(n).css({overflow:"hidden"});var o=s=="up"||s=="down"?"top":"left",u=s=="up"||s=="left"?"pos":"neg",f=t.options.distance||(o=="top"?n.outerHeight(!0):n.outerWidth(!0));i=="show"&&n.css(o,u=="pos"?isNaN(f)?"-"+f:-f:f);var l={};l[o]=(i=="show"?u=="pos"?"+=":"-=":u=="pos"?"-=":"+=")+f,n.animate(l,{queue:!1,duration:t.duration,easing:t.options.easing,complete:function(){i=="hide"&&n.hide(),e.effects.restore(n,r),e.effects.removeWrapper(n),t.callback&&t.callback.apply(this,arguments),n.dequeue()}})})}}(jQuery),function(e,t){e.effects.transfer=function(t){return this.queue(function(){var n=e(this),r=e(t.options.to),i=r.offset(),s={top:i.top,left:i.left,height:r.innerHeight(),width:r.innerWidth()},o=n.offset(),u=e('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(t.options.className).css({top:o.top,left:o.left,height:n.innerHeight(),width:n.innerWidth(),position:"absolute"}).animate(s,t.duration,t.options.easing,function(){u.remove(),t.callback&&t.callback.apply(n[0],arguments),n.dequeue()})})}}(jQuery);var paper=new function(){var Base=new function(){function c(e,t,n){if(f)try{return delete e[t],f(e,t,n)}catch(r){}return(n.get||n.set)&&e.__defineGetter__?(n.get&&e.__defineGetter__(t,n.get),n.set&&e.__defineSetter__(t,n.set)):e[t]=n.value,e}function h(e,t){if(l)try{return l(e,t)}catch(n){}var i=e.__lookupGetter__&&e.__lookupGetter__(t);return i?{get:i,set:e.__lookupSetter__(t),enumerable:!0,configurable:!0}:r.call(e,t)?{value:e[t],enumerable:!0,configurable:!0,writable:!0}:null}function p(e,n,i,s,u,a){function p(t,a,p,d){var a=a||(a=h(n,t))&&(a.get?a:a.value),v=typeof a=="function",m=a,g=u||v?a&&a.get?t in e:e[t]:null;d&&v&&(!u||!d[t])&&(d[t]=function(n){return n&&e[t].apply(n,o.call(arguments,1))});if((p||a!==undefined&&r.call(n,t))&&(!u||!g)){if(v){if(g&&/\bthis\.base\b/.test(a)){var y=s&&s[t]==g;m=function(){var e=h(this,"base");c(this,"base",{value:y?s[t]:g,configurable:!0});try{return a.apply(this,arguments)}finally{e?c(this,"base",e):delete this.base}},m.toString=function(){return a.toString()},m.valueOf=function(){return a.valueOf()}}f&&a.length==0&&(l=t.match(/^(get|is)(([A-Z])(.*))$/))&&f.push([l[3].toLowerCase()+l[4],l[2]])}if(!m||v||!m.get&&!m.set)m={value:m,writable:!0};(h(e,t)||{configurable:!0}).configurable&&(m.configurable=!0,m.enumerable=i),c(e,t,m)}}var f,l;if(n){f=[];for(var d in 
n)r.call(n,d)&&!t.test(d)&&p(d,null,!0,a);p("toString"),p("valueOf");for(var v=0,m=f&&f.length;v<m;v++)try{var l=f[v],g=l[1];p(l[0],{get:e["get"+g]||e["is"+g],set:e["set"+g]},!0)}catch(y){}}return e}function d(t){var n=function(r){e&&c(this,"__proto__",{value:t});if(this.initialize&&r!==n.dont)return this.initialize.apply(this,arguments)};return n.prototype=t,n.toString=function(){return(this.prototype.initialize||function(){}).toString()},n}function v(e){return e?typeof e!="function"?function(t){return t==e}:e:function(e){return e}}function m(e,t,n,r){try{e&&(r||r===undefined&&s(e)?u:a).call(e,v(t),n=n||e)}catch(i){if(i!==Base.stop)throw i}return n}function g(e){return m(e,function(e,t){this[t]=e},new e.constructor)}var e=!this.__proto__,t=/^(statics|generics|preserve|enumerable|prototype|__proto__|toString|valueOf)$/,n=Object.prototype,r=e?function(e){return e!=="__proto__"&&this.hasOwnProperty(e)}:n.hasOwnProperty,i=n.toString,n=Array.prototype,s=Array.isArray=Array.isArray||function(e){return i.call(e)==="[object Array]"},o=n.slice,u=n.forEach=n.forEach||function(e,t){for(var n=0,r=this.length;n<r;n++)e.call(t,this[n],n,this)},a=function(e,t){for(var n in this)this.hasOwnProperty(n)&&e.call(t,this[n],n,this)},f=Object.defineProperty,l=Object.getOwnPropertyDescriptor;return p(function(){},{inject:function(e){if(e){var t=this.prototype,n=t.__proto__&&t.__proto__.constructor,r=e.statics==1?e:e.statics;r!=e&&p(t,e,e.enumerable,n&&n.prototype,e.preserve,e.generics&&this),p(this,r,!0,n,e.preserve)}for(var i=1,s=arguments.length;i<s;i++)this.inject(arguments[i]);return this},extend:function(e){var t=new this(this.dont),n=d(t);return c(t,"constructor",{value:n,writable:!0,configurable:!0}),n.dont={},p(n,this,!0),arguments.length?this.inject.apply(n,arguments):n}},!0).inject({has:r,each:m,inject:function(){for(var e=0,t=arguments.length;e<t;e++)p(this,arguments[e]);return this},extend:function(){var e=new(d(this));return e.inject.apply(e,arguments)},each:function(e,t){return m(this,e,t)},clone:function(){return g(this)},statics:{each:m,clone:g,define:c,describe:h,iterator:v,has:function(e,t){return r.call(e,t)},type:function(e){return(e||e===0)&&(e._type||typeof e)||null},check:function(e){return!!e||e===0},pick:function(){for(var e=0,t=arguments.length;e<t;e++)if(arguments[e]!==undefined)return arguments[e];return null},stop:{}}})};this.Base=Base.inject({generics:!0,clone:function(){return new this.constructor(this)},toString:function(){return"{ "+Base.each(this,function(e,t){if(t.charAt(0)!="_"){var n=typeof e;this.push(t+": "+(n==="number"?Base.formatNumber(e):n==="string"?"'"+e+"'":e))}},[]).join(", ")+" }"},statics:{read:function(e,t,n){var t=t||0,n=n||e.length-t,r=e[t];return r instanceof this||this.prototype._readNull&&r==null&&n<=1?r:(r=new this(this.dont),r.initialize.apply(r,t>0||n<e.length?Array.prototype.slice.call(e,t,t+n):e)||r)},readAll:function(e,t){var n=[],r;for(var i=t||0,s=e.length;i<s;i++)n.push(Array.isArray(r=e[i])?this.read(r,0):this.read(e,i,1));return n},splice:function(e,t,n,r){var i=t&&t.length,s=n===undefined;n=s?e.length:n;for(var o=0;o<i;o++)t[o]._index=n+o;if(s)return e.push.apply(e,t),[];var u=[n,r];t&&u.push.apply(u,t);var a=e.splice.apply(e,u);for(var o=0,f=a.length;o<f;o++)delete a[o]._index;for(var o=n+i,f=e.length;o<f;o++)e[o]._index=o;return a},merge:function(){return Base.each(arguments,function(e){Base.each(e,function(e,t){this[t]=e},this)},new Base,!0)},capitalize:function(e){return e.replace(/\b[a-z]/g,function(e){return e.toUpperCase()})},camelize:function(e){return e.replace(/-(\w)/g,function(e,t){return t.toUpperCase()})},hyphenate:function(e){return e.replace(/[a-z][A-Z0-9]|[0-9][a-zA-Z]|[A-Z]{2}[a-z]/g,function(e){return e.charAt(0)+"-"+e.substring(1)}).toLowerCase()},formatNumber:function(e){return(Math.round(e*1e5)/1e5).toString()}}});var PaperScope=this.PaperScope=Base.extend({initialize:function(e){paper=this,this.view=null,this.views=[],this.project=null,this.projects=[],this.tool=null,this.tools=[],this._id=e&&(e.getAttribute("id")||e.src)||"paperscope-"+PaperScope._id++,e&&e.setAttribute("id",this._id),PaperScope._scopes[this._id]=this},version:.22,evaluate:function(e){var t=PaperScript.evaluate(e,this);return View.updateFocus(),t},install:function(e){var t=this;Base.each(["project","view","tool"],function(n){Base.define(e,n,{configurable:!0,writable:!0,get:function(){return t[n]}})});for(var n in this)!/^(version|_id|load)/.test(n)&&!(n in e)&&(e[n]=this[n])},setup:function(e){paper=this,this.project=new Project,e&&(this.view=new View(e))},clear:function(){for(var e=this.projects.length-1;e>=0;e--)this.projects[e].remove();for(var e=this.views.length-1;e>=0;e--)this.views[e].remove();for(var e=this.tools.length-1;e>=0;e--)this.tools[e].remove()},remove:function(){this.clear(),delete PaperScope._scopes[this._id]},_needsRedraw:function(){if(!this._redrawNotified){for(var e=this.views.length-1;e>=0;e--)this.views[e]._redrawNeeded=!0;this._redrawNotified=!0}},statics:{_scopes:{},_id:0,get:function(e){return typeof e=="object"&&(e=e.getAttribute("id")),this._scopes[e]||null},each:function(e){Base.each(this._scopes,e)}}}),PaperScopeItem=Base.extend({initialize:function(e){this._scope=paper,this._index=this._scope[this._list].push(this)-1,(e||!this._scope[this._reference])&&this.activate()},activate:function(){return this._scope?(this._scope[this._reference]=this,!0):!1},remove:function(){return this._index==null?!1:(Base.splice(this._scope[this._list],null,this._index,1),this._scope[this._reference]==this&&(this._scope[this._reference]=null),this._scope=null,!0)}}),Point=this.Point=Base.extend({initialize:function(e,t){t!==undefined?(this.x=e,this.y=t):e!==undefined?e==null?this.x=this.y=0:e.x!==undefined?(this.x=e.x,this.y=e.y):e.width!==undefined?(this.x=e.width,this.y=e.height):Array.isArray(e)?(this.x=e[0],this.y=e.length>1?e[1]:e[0]):e.angle!==undefined?(this.x=e.length,this.y=0,this.setAngle(e.angle)):typeof e=="number"?this.x=this.y=e:this.x=this.y=0:this.x=this.y=0},set:function(e,t){return this.x=e,this.y=t,this},clone:function(){return Point.create(this.x,this.y)},toString:function(){var e=Base.formatNumber;return"{ x: "+e(this.x)+", y: "+e(this.y)+" }"},add:function(e){return e=Point.read(arguments),Point.create(this.x+e.x,this.y+e.y)},subtract:function(e){return e=Point.read(arguments),Point.create(this.x-e.x,this.y-e.y)},multiply:function(e){return e=Point.read(arguments),Point.create(this.x*e.x,this.y*e.y)},divide:function(e){return e=Point.read(arguments),Point.create(this.x/e.x,this.y/e.y)},modulo:function(e){return e=Point.read(arguments),Point.create(this.x%e.x,this.y%e.y)},negate:function(){return Point.create(-this.x,-this.y)},transform:function(e){return e?e._transformPoint(this):this},getDistance:function(e,t){e=Point.read(arguments);var n=e.x-this.x,r=e.y-this.y,i=n*n+r*r;return t?i:Math.sqrt(i)},getLength:function(){var e=this.x*this.x+this.y*this.y;return arguments[0]?e:Math.sqrt(e)},setLength:function(e){if(this.isZero()){var t=this._angle||0;this.set(Math.cos(t)*e,Math.sin(t)*e)}else{var n=e/this.getLength();n==0&&this.getAngle(),this.set(this.x*n,this.y*n)}return this},normalize:function(e){e===undefined&&(e=1);var t=this.getLength(),n=t!=0?e/t:0,r=Point.create(this.x*n,this.y*n);return r._angle=this._angle,r},getAngle:function(){return this.getAngleInRadians(arguments[0])*180/Math.PI},setAngle:function(e){e=this._angle=e*Math.PI/180;if(!this.isZero()){var t=this.getLength();this.set(Math.cos(e)*t,Math.sin(e)*t)}return this},getAngleInRadians:function(){if(arguments[0]===undefined)return this._angle==null&&(this._angle=Math.atan2(this.y,this.x)),this._angle;var e=Point.read(arguments),t=this.getLength()*e.getLength();return t==0?NaN:Math.acos(this.dot(e)/t)},getAngleInDegrees:function(){return this.getAngle(arguments[0])},getQuadrant:function(){return this.x>=0?this.y>=0?1:4:this.y>=0?2:3},getDirectedAngle:function(e){return e=Point.read(arguments),Math.atan2(this.cross(e),this.dot(e))*180/Math.PI},rotate:function(e,t){e=e*Math.PI/180;var n=t?this.subtract(t):this,r=Math.sin(e),i=Math.cos(e);return n=Point.create(n.x*i-n.y*r,n.y*i+n.x*r),t?n.add(t):n},equals:function(e){return e=Point.read(arguments),this.x==e.x&&this.y==e.y},isInside:function(e){return e.contains(this)},isClose:function(e,t){return this.getDistance(e)<t},isColinear:function(e){return this.cross(e)<Numerical.TOLERANCE},isOrthogonal:function(e){return this.dot(e)<Numerical.TOLERANCE},isZero:function(){return this.x==0&&this.y==0},isNaN:function(){return isNaN(this.x)||isNaN(this.y)},dot:function(e){return e=Point.read(arguments),this.x*e.x+this.y*e.y},cross:function(e){return e=Point.read(arguments),this.x*e.y-this.y*e.x},project:function(e){e=Point.read(arguments);if(e.isZero())return Point.create(0,0);var t=this.dot(e)/e.dot(e);return Point.create(e.x*t,e.y*t)},statics:{create:function(e,t){var n=new Point(Point.dont);return n.x=e,n.y=t,n},min:function(e,t){return e=Point.read(arguments,0,1),t=Point.read(arguments,1,1),Point.create(Math.min(e.x,t.x),Math.min(e.y,t.y))},max:function(e,t){return e=Point.read(arguments,0,1),t=Point.read(arguments,1,1),Point.create(Math.max(e.x,t.x),Math.max(e.y,t.y))},random:function(){return Point.create(Math.random(),Math.random())}}},new function(){return Base.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return Point.create(t(this.x),t(this.y))}},{})}),LinkedPoint=Point.extend({set:function(e,t,n){return this._x=e,this._y=t,n||this._owner[this._setter](this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner[this._setter](this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner[this._setter](this)},statics:{create:function(e,t,n,r,i){if(i)return Point.create(n,r);var s=new LinkedPoint(LinkedPoint.dont);return s._x=n,s._y=r,s._owner=e,s._setter=t,s}}}),Size=this.Size=Base.extend({initialize:function(e,t){t!==undefined?(this.width=e,this.height=t):e!==undefined?e==null?this.width=this.height=0:e.width!==undefined?(this.width=e.width,this.height=e.height):e.x!==undefined?(this.width=e.x,this.height=e.y):Array.isArray(e)?(this.width=e[0],this.height=e.length>1?e[1]:e[0]):typeof e=="number"?this.width=this.height=e:this.width=this.height=0:this.width=this.height=0},toString:function(){var e=Base.formatNumber;return"{ width: "+e(this.width)+", height: "+e(this.height)+" }"},set:function(e,t){return this.width=e,this.height=t,this},clone:function(){return Size.create(this.width,this.height)},add:function(e){return e=Size.read(arguments),Size.create(this.width+e.width,this.height+e.height)},subtract:function(e){return e=Size.read(arguments),Size.create(this.width-e.width,this.height-e.height)},multiply:function(e){return e=Size.read(arguments),Size.create(this.width*e.width,this.height*e.height)},divide:function(e){return e=Size.read(arguments),Size.create(this.width/e.width,this.height/e.height)},modulo:function(e){return e=Size.read(arguments),Size.create(this.width%e.width,this.height%e.height)},negate:function(){return Size.create(-this.width,-this.height)},equals:function(e){return e=Size.read(arguments),this.width==e.width&&this.height==e.height},isZero:function(){return this.width==0&&this.height==0},isNaN:function(){return isNaN(this.width)||isNaN(this.height)},statics:{create:function(e,t){return(new Size(Size.dont)).set(e,t)},min:function(e,t){return Size.create(Math.min(e.width,t.width),Math.min(e.height,t.height))},max:function(e,t){return Size.create(Math.max(e.width,t.width),Math.max(e.height,t.height))},random:function(){return Size.create(Math.random(),Math.random())}}},new function(){return Base.each(["round","ceil","floor","abs"],function(e){var t=Math[e];this[e]=function(){return Size.create(t(this.width),t(this.height))}},{})}),LinkedSize=Size.extend({set:function(e,t,n){return this._width=e,this._height=t,n||this._owner[this._setter](this),this},getWidth:function(){return this._width},setWidth:function(e){this._width=e,this._owner[this._setter](this)},getHeight:function(){return this._height},setHeight:function(e){this._height=e,this._owner[this._setter](this)},statics:{create:function(e,t,n,r,i){if(i)return Size.create(n,r);var s=new LinkedSize(LinkedSize.dont);return s._width=n,s._height=r,s._owner=e,s._setter=t,s}}}),Rectangle=this.Rectangle=Base.extend({initialize:function(e,t,n,r){if(arguments.length==4)this.x=e,this.y=t,this.width=n,this.height=r;else if(arguments.length==2)if(t&&t.x!==undefined){var i=Point.read(arguments,0,1),s=Point.read(arguments,1,1);this.x=i.x,this.y=i.y,this.width=s.x-i.x,this.height=s.y-i.y,this.width<0&&(this.x=s.x,this.width=-this.width),this.height<0&&(this.y=s.y,this.height=-this.height)}else{var o=Point.read(arguments,0,1),u=Size.read(arguments,1,1);this.x=o.x,this.y=o.y,this.width=u.width,this.height=u.height}else e?(this.x=e.x||0,this.y=e.y||0,this.width=e.width||0,this.height=e.height||0):this.x=this.y=this.width=this.height=0},set:function(e,t,n,r){return this.x=e,this.y=t,this.width=n,this.height=r,this},getPoint:function(){return LinkedPoint.create(this,"setPoint",this.x,this.y,arguments[0])},setPoint:function(e){return e=Point.read(arguments),this.x=e.x,this.y=e.y,this},getSize:function(){return LinkedSize.create(this,"setSize",this.width,this.height,arguments[0])},setSize:function(e){return e=Size.read(arguments),this.width=e.width,this.height=e.height,this},getLeft:function(){return this.x},setLeft:function(e){return this.width-=e-this.x,this.x=e,this},getTop:function(){return this.y},setTop:function(e){return this.height-=e-this.y,this.y=e,this},getRight:function(){return this.x+this.width},setRight:function(e){return this.width=e-this.x,this},getBottom:function(){return this.y+this.height},setBottom:function(e){return this.height=e-this.y,this},getCenterX:function(){return this.x+this.width*.5},setCenterX:function(e){return this.x=e-this.width*.5,this},getCenterY:function(){return this.y+this.height*.5},setCenterY:function(e){return this.y=e-this.height*.5,this},getCenter:function(){return LinkedPoint.create(this,"setCenter",this.getCenterX(),this.getCenterY(),arguments[0])},setCenter:function(e){return e=Point.read(arguments),this.setCenterX(e.x).setCenterY(e.y)},equals:function(e){return e=Rectangle.read(arguments),this.x==e.x&&this.y==e.y&&this.width==e.width&&this.height==e.height},isEmpty:function(){return this.width==0||this.height==0},toString:function(){var e=Base.formatNumber;return"{ x: "+e(this.x)+", y: "+e(this.y)+", width: "+e(this.width)+", height: "+e(this.height)+" }"},contains:function(e){return e&&e.width!==undefined||(Array.isArray(e)?e:arguments).length==4?this._containsRectangle(Rectangle.read(arguments)):this._containsPoint(Point.read(arguments))},_containsPoint:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t<=this.x+this.width&&n<=this.y+this.height},_containsRectangle:function(e){var t=e.x,n=e.y;return t>=this.x&&n>=this.y&&t+e.width<=this.x+this.width&&n+e.height<=this.y+this.height},intersects:function(e){return e=Rectangle.read(arguments),e.x+e.width>this.x&&e.y+e.height>this.y&&e.x<this.x+this.width&&e.y<this.y+this.height},intersect:function(e){e=Rectangle.read(arguments);var t=Math.max(this.x,e.x),n=Math.max(this.y,e.y),r=Math.min(this.x+this.width,e.x+e.width),i=Math.min(this.y+this.height,e.y+e.height);return Rectangle.create(t,n,r-t,i-n)},unite:function(e){e=Rectangle.read(arguments);var t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x+e.width),i=Math.max(this.y+this.height,e.y+e.height);return Rectangle.create(t,n,r-t,i-n)},include:function(e){e=Point.read(arguments);var t=Math.min(this.x,e.x),n=Math.min(this.y,e.y),r=Math.max(this.x+this.width,e.x),i=Math.max(this.y+this.height,e.y);return Rectangle.create(t,n,r-t,i-n)},expand:function(e,t){return t===undefined&&(t=e),Rectangle.create(this.x-e/2,this.y-t/2,this.width+e,this.height+t)},scale:function(e,t){return this.expand(this.width*e-this.width,this.height*(t===undefined?e:t)-this.height)},statics:{create:function(e,t,n,r){return(new Rectangle(Rectangle.dont)).set(e,t,n,r)}}},new function(){return Base.each([["Top","Left"],["Top","Right"],["Bottom","Left"],["Bottom","Right"],["Left","Center"],["Top","Center"],["Right","Center"],["Bottom","Center"]],function(e,t){var n=e.join(""),r=/^[RL]/.test(n);t>=4&&(e[1]+=r?"Y":"X");var i=e[r?0:1],s=e[r?1:0],o="get"+i,u="get"+s,a="set"+i,f="set"+s,l="get"+n,c="set"+n;this[l]=function(){return LinkedPoint.create(this,c,this[o](),this[u](),arguments[0])},this[c]=function(e){return e=Point.read(arguments),this[a](e.x)[f](e.y)}},{})}),LinkedRectangle=Rectangle.extend({set:function(e,t,n,r,i){return this._x=e,this._y=t,this._width=n,this._height=r,i||this._owner[this._setter](this),this},statics:{create:function(e,t,n,r,i,s){var o=(new LinkedRectangle(LinkedRectangle.dont)).set(n,r,i,s,!0);return o._owner=e,o._setter=t,o}}},new function(){var e=Rectangle.prototype;return Base.each(["x","y","width","height"],function(e){var t=Base.capitalize(e),n="_"+e;this["get"+t]=function(){return this[n]},this["set"+t]=function(e){this[n]=e,this._dontNotify||this._owner[this._setter](this)}},Base.each(["Point","Size","Center","Left","Top","Right","Bottom","CenterX","CenterY","TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],function(t){var n="set"+t;this[n]=function(t){return this._dontNotify=!0,e[n].apply(this,arguments),delete this._dontNotify,this._owner[this._setter](this),this}},{}))}),Matrix=this.Matrix=Base.extend({initialize:function(e){var t=arguments.length,n=!0;t==6?this.set.apply(this,arguments):t==1?e instanceof Matrix?this.set(e._a,e._c,e._b,e._d,e._tx,e._ty):Array.isArray(e)?this.set.apply(this,e):n=!1:t==0?(this._a=this._d=1,this._c=this._b=this._tx=this._ty=0):n=!1;if(!n)throw new Error("Unsupported matrix parameters")},clone:function(){return Matrix.create(this._a,this._c,this._b,this._d,this._tx,this._ty)},set:function(e,t,n,r,i,s){return this._a=e,this._c=t,this._b=n,this._d=r,this._tx=i,this._ty=s,this},scale:function(e,t,n){return arguments.length<2||typeof t=="object"?(n=Point.read(arguments,1),t=e):n=Point.read(arguments,2),n&&this.translate(n),this._a*=e,this._c*=e,this._b*=t,this._d*=t,n&&this.translate(n.negate()),this},translate:function(e){e=Point.read(arguments);var t=e.x,n=e.y;return this._tx+=t*this._a+n*this._b,this._ty+=t*this._c+n*this._d,this},rotate:function(e,t){return this.concatenate(Matrix.getRotateInstance.apply(Matrix,arguments))},shear:function(e,t,n){arguments.length<2||typeof t=="object"?(n=Point.read(arguments,1),t=e):n=Point.read(arguments,2),n&&this.translate(n);var r=this._a,i=this._c;return this._a+=t*this._b,this._c+=t*this._d,this._b+=e*r,this._d+=e*i,n&&this.translate(n.negate()),this},toString:function(){var e=Base.formatNumber;return"[["+[e(this._a),e(this._b),e(this._tx)].join(", ")+"], ["+[e(this._c),e(this._d),e(this._ty)].join(", ")+"]]"},getValues:function(){return[this._a,this._c,this._b,this._d,this._tx,this._ty]},concatenate:function(e){var t=this._a,n=this._b,r=this._c,i=this._d;return this._a=e._a*t+e._c*n,this._b=e._b*t+e._d*n,this._tx+=e._tx*t+e._ty*n,this._c=e._a*r+e._c*i,this._d=e._b*r+e._d*i,this._ty+=e._tx*r+e._ty*i,this},preConcatenate:function(e){var t=this._a,n=this._b,r=this._c,i=this._d,s=this._tx,o=this._ty;return this._a=e._a*t+e._b*r,this._c=e._c*t+e._d*r,this._b=e._a*n+e._b*i,this._d=e._c*n+e._d*i,this._tx=e._a*s+e._b*o+e._tx,this._ty=e._c*s+e._d*o+e._ty,this},transform:function(e,t,n,r,i){return arguments.length<5?this._transformPoint(Point.read(arguments)):this._transformCoordinates(e,t,n,r,i)},_transformPoint:function(e,t,n){var r=e.x,i=e.y;return t||(t=new Point(Point.dont)),t.set(r*this._a+i*this._b+this._tx,r*this._c+i*this._d+this._ty,n)},_transformCoordinates:function(e,t,n,r,i){var s=t,o=r,u=t+2*i;while(s<u){var a=e[s++],f=e[s++];n[o++]=a*this._a+f*this._b+this._tx,n[o++]=a*this._c+f*this._d+this._ty}return n},_transformCorners:function(e){var t=e.x,n=e.y,r=t+e.width,i=n+e.height,s=[t,n,r,n,r,i,t,i];return this._transformCoordinates(s,0,s,0,4)},_transformBounds:function(e){var t=this._transformCorners(e),n=t.slice(0,2),r=t.slice(0);for(var i=2;i<8;i++){var s=t[i],o=i&1;s<n[o]?n[o]=s:s>r[o]&&(r[o]=s)}return Rectangle.create(n[0],n[1],r[0]-n[0],r[1]-n[1])},inverseTransform:function(e){return this._inverseTransform(Point.read(arguments))},_getDeterminant:function(){var e=this._a*this._d-this._b*this._c;return isFinite(e)&&Math.abs(e)>Numerical.EPSILON&&isFinite(this._tx)&&isFinite(this._ty)?e:null},_inverseTransform:function(e,t,n){var r=this._getDeterminant();if(!r)return null;var i=e.x-this._tx,s=e.y-this._ty;return t||(t=new Point(Point.dont)),t.set((i*this._d-s*this._b)/r,(s*this._a-i*this._c)/r,n)},getTranslation:function(){return new Point(this._tx,this._ty)},getScaling:function(){var e=Math.sqrt(this._a*this._a+this._c*this._c),t=Math.sqrt(this._b*this._b+this._d*this._d);return new Point(this._a<0?-e:e,this._b<0?-t:t)},getRotation:function(){var e=-Math.atan2(this._b,this._d),t=Math.atan2(this._c,this._a);return Math.abs(e-t)<Numerical.TOLERANCE?e*180/Math.PI:undefined},isIdentity:function(){return this._a==1&&this._c==0&&this._b==0&&this._d==1&&this._tx==0&&this._ty==0},isInvertible:function(){return!!this._getDeterminant()},isSingular:function(){return!this._getDeterminant()},createInverse:function(){var e=this._getDeterminant();return e&&Matrix.create(this._d/e,-this._c/e,-this._b/e,this._a/e,(this._b*this._ty-this._d*this._tx)/e,(this._c*this._tx-this._a*this._ty)/e)},createShiftless:function(){return Matrix.create(this._a,this._c,this._b,this._d,0,0)},setToScale:function(e,t){return this.set(e,0,0,t,0,0)},setToTranslation:function(e){return e=Point.read(arguments),this.set(1,0,0,1,e.x,e.y)},setToShear:function(e,t){return this.set(1,t,e,1,0,0)},setToRotation:function(e,t){t=Point.read(arguments,1),e=e*Math.PI/180;var n=t.x,r=t.y,i=Math.cos(e),s=Math.sin(e);return this.set(i,s,-s,i,n-n*i+r*s,r-n*s-r*i)},applyToContext:function(e,t){return e[t?"setTransform":"transform"](this._a,this._c,this._b,this._d,this._tx,this._ty),this},statics:{create:function(e,t,n,r,i,s){return(new Matrix(Matrix.dont)).set(e,t,n,r,i,s)},getScaleInstance:function(e,t){var n=new Matrix;return n.setToScale.apply(n,arguments)},getTranslateInstance:function(e){var t=new Matrix;return t.setToTranslation.apply(t,arguments)},getShearInstance:function(e,t,n){var r=new Matrix;return r.setToShear.apply(r,arguments)},getRotateInstance:function(e,t){var n=new Matrix;return n.setToRotation.apply(n,arguments)}}},new function(){return Base.each({scaleX:"_a",scaleY:"_d",translateX:"_tx",translateY:"_ty",shearX:"_b",shearY:"_c"},function(e,t){t=Base.capitalize(t),this["get"+t]=function(){return this[e]},this["set"+t]=function(t){this[e]=t}},{})}),Line=this.Line=Base.extend({initialize:function(e,t,n){e=Point.read(arguments,0,1),t=Point.read(arguments,1,1),arguments.length==3?(this.point=e,this.vector=t.subtract(e),this.infinite=n):(this.point=e,this.vector=t,this.infinite=!0)},intersect:function(e){var t=this.vector.cross(e.vector);if(Math.abs(t)<=Numerical.EPSILON)return null;var n=e.point.subtract(this.point),r=n.cross(e.vector)/t,i=n.cross(this.vector)/t;return(this.infinite||0<=r&&r<=1)&&(e.infinite||0<=i&&i<=1)?this.point.add(this.vector.multiply(r)):null},getSide:function(e){var t=this.vector,n=e.subtract(this.point),r=n.cross(t);return r==0&&(r=n.dot(t),r>0&&(r=n.subtract(t).dot(t),r<0&&(r=0))),r<0?-1:r>0?1:0},getDistance:function(e){var t=this.vector.y/this.vector.x,n=this.point.y-t*this.point.x,r=Math.abs(e.y-t*e.x-n)/Math.sqrt(t*t+1);return this.infinite?r:Math.min(r,e.getDistance(this.point),e.getDistance(this.point.add(this.vector)))}}),Project=this.Project=PaperScopeItem.extend({_list:"projects",_reference:"project",initialize:function(){this.base(!0),this._currentStyle=new PathStyle,this._selectedItems={},this._selectedItemCount=0,this.layers=[],this.symbols=[],this.activeLayer=new Layer},_needsRedraw:function(){this._scope&&this._scope._needsRedraw()},getCurrentStyle:function(){return this._currentStyle},setCurrentStyle:function(e){this._currentStyle.initialize(e)},getIndex:function(){return this._index},getSelectedItems:function(){var e=[];return Base.each(this._selectedItems,function(t){e.push(t)}),e},_updateSelection:function(e){e._selected?(this._selectedItemCount++,this._selectedItems[e.getId()]=e):(this._selectedItemCount--,delete this._selectedItems[e.getId()])},selectAll:function(){for(var e=0,t=this.layers.length;e<t;e++)this.layers[e].setSelected(!0)},deselectAll:function(){for(var e in this._selectedItems)this._selectedItems[e].setSelected(!1)},hitTest:function(e,t){t=HitResult.getOptions(e,t),e=t.point;for(var n=this.layers.length-1;n>=0;n--){var r=this.layers[n].hitTest(e,t);if(r)return r}return null},draw:function(e){e.save();var t={offset:new Point(0,0)};for(var n=0,r=this.layers.length;n<r;n++)Item.draw(this.layers[n],e,t);e.restore(),this._selectedItemCount>0&&(e.save(),e.strokeWidth=1,e.strokeStyle=e.fillStyle="#009dec",t={selection:!0},Base.each(this._selectedItems,function(n){n.draw(e,t)}),e.restore())}}),Symbol=this.Symbol=Base.extend({initialize:function(e){this.project=paper.project,this.project.symbols.push(this),this.setDefinition(e),this._instances={}},_changed:function(e){Base.each(this._instances,function(t){t._changed(e)})},getDefinition:function(){return this._definition},setDefinition:function(e){e._parentSymbol&&(e=e.clone()),this._definition&&delete this._definition._parentSymbol,this._definition=e,e.remove(),e.setPosition(new Point),e._parentSymbol=this,this._changed(Change.GEOMETRY)},place:function(e){return new PlacedSymbol(this,e)},clone:function(){return new Symbol(this._definition.clone())}}),ChangeFlag={APPEARANCE:1,HIERARCHY:2,GEOMETRY:4,STROKE:8,STYLE:16,ATTRIBUTE:32,CONTENT:64,PIXELS:128,CLIPPING:256},Change={HIERARCHY:ChangeFlag.HIERARCHY|ChangeFlag.APPEARANCE,GEOMETRY:ChangeFlag.GEOMETRY|ChangeFlag.APPEARANCE,STROKE:ChangeFlag.STROKE|ChangeFlag.STYLE|ChangeFlag.APPEARANCE,STYLE:ChangeFlag.STYLE|ChangeFlag.APPEARANCE,ATTRIBUTE:ChangeFlag.ATTRIBUTE|ChangeFlag.APPEARANCE,CONTENT:ChangeFlag.CONTENT|ChangeFlag.APPEARANCE,PIXELS:ChangeFlag.PIXELS|ChangeFlag.APPEARANCE},Item=this.Item=Base.extend({initialize:function(){this._id=++Item._id,this._project||paper.project.activeLayer.addChild(this),this._style=PathStyle.create(this),this.setStyle(this._project.getCurrentStyle())},_changed:function(e){e&ChangeFlag.GEOMETRY&&(delete this._bounds,delete this._position,delete this._strokeBounds,delete this._handleBounds,delete this._roughBounds),e&ChangeFlag.APPEARANCE&&this._project._needsRedraw(),this._parentSymbol&&this._parentSymbol._changed(e);if(this._project._changes){var t=this._project._changesById[this._id];t?t.flags|=e:(t={item:this,flags:e},this._project._changesById[this._id]=t,this._project._changes.push(t))}},getId:function(){return this._id},getName:function(){return this._name},setName:function(e){this._name&&this._removeFromNamed(),this._name=e||undefined;if(e){var t=this._parent._children,n=this._parent._namedChildren;(n[e]=n[e]||[]).push(this),t[e]=this}this._changed(ChangeFlag.ATTRIBUTE)},getPosition:function(){var e=this._position||(this._position=this.getBounds().getCenter());return LinkedPoint.create(this,"setPosition",e._x,e._y)},setPosition:function(e){this.translate(Point.read(arguments).subtract(this.getPosition()))},getStyle:function(){return this._style},setStyle:function(e){this._style.initialize(e)},statics:{_id:0}},new function(){return Base.each(["locked","visible","blendMode","opacity","guide"],function(e){var t=Base.capitalize(e),e="_"+e;this["get"+t]=function(){return this[e]},this["set"+t]=function(t){t!=this[e]&&(this[e]=t,this._changed(e==="_locked"?ChangeFlag.ATTRIBUTE:Change.ATTRIBUTE))}},{})},{_locked:!1,_visible:!0,_blendMode:"normal",_opacity:1,_guide:!1,isSelected:function(){if(this._children)for(var e=0,t=this._children.length;e<t;e++)if(this._children[e].isSelected())return!0;return this._selected},setSelected:function(e){if(this._children)for(var t=0,n=this._children.length;t<n;t++)this._children[t].setSelected(e);else(e=!!e)!=this._selected&&(this._selected=e,this._project._updateSelection(this),this._changed(Change.ATTRIBUTE))},_selected:!1,isFullySelected:function(){if(this._children&&this._selected){for(var e=0,t=this._children.length;e<t;e++)if(!this._children[e].isFullySelected())return!1;return!0}return this._selected},setFullySelected:function(e){if(this._children)for(var t=0,n=this._children.length;t<n;t++)this._children[t].setFullySelected(e);this.setSelected(e)},isClipMask:function(){return this._clipMask},setClipMask:function(e){this._clipMask!=(e=!!e)&&(this._clipMask=e,e&&(this.setFillColor(null),this.setStrokeColor(null)),this._changed(Change.ATTRIBUTE),this._parent&&this._parent._changed(ChangeFlag.CLIPPING))},_clipMask:!1,getProject:function(){return this._project},_setProject:function(e){if(this._project!=e){this._project=e;if(this._children)for(var t=0,n=this._children.length;t<n;t++)this._children[t]._setProject(e)}},getLayer:function(){var e=this;while(e=e._parent)if(e instanceof Layer)return e;return null},getParent:function(){return this._parent},getChildren:function(){return this._children},setChildren:function(e){this.removeChildren(),this.addChildren(e)},getFirstChild:function(){return this._children&&this._children[0]||null},getLastChild:function(){return this._children&&this._children[this._children.length-1]||null},getNextSibling:function(){return this._parent&&this._parent._children[this._index+1]||null},getPreviousSibling:function(){return this._parent&&this._parent._children[this._index-1]||null},getIndex:function(){return this._index},clone:function(){return this._clone(new this.constructor)},_clone:function(e){e.setStyle(this._style);if(this._children)for(var t=0,n=this._children.length;t<n;t++)e.addChild(this._children[t].clone());var r=["_locked","_visible","_blendMode","_opacity","_clipMask","_guide"];for(var t=0,n=r.length;t<n;t++){var i=r[t];this.hasOwnProperty(i)&&(e[i]=this[i])}return e.setSelected(this._selected),this._name&&e.setName(this._name),e},copyTo:function(e){var t=this.clone();return e.layers?e.activeLayer.addChild(t):e.addChild(t),t},rasterize:function(e){var t=this.getStrokeBounds(),n=(e||72)/72,r=CanvasProvider.getCanvas(t.getSize().multiply(n)),i=r.getContext("2d"),s=(new Matrix).scale(n).translate(-t.x,-t.y);s.applyToContext(i),this.draw(i,{});var o=new Raster(r);return o.setBounds(t),o},hitTest:function(e,t,n){t=HitResult.getOptions(e,t),e=t.point;if(!this._children&&!this.getRoughBounds(n).expand(t.tolerance)._containsPoint(e))return null;if((t.center||t.bounds)&&!(this instanceof Layer&&!this._parent)){var r=this.getBounds(),i=this,s=["TopLeft","TopRight","BottomLeft","BottomRight","LeftCenter","TopCenter","RightCenter","BottomCenter"],o;function u(s,o){var u=r["get"+o]().transform(n);if(e.getDistance(u)<t.tolerance)return new HitResult(s,i,{name:Base.hyphenate(o),point:u})}if(t.center&&(o=u("center","Center")))return o;if(t.bounds)for(var a=0;a<8;a++)if(o=u("bounds",s[a]))return o}return this._children||!(t.guides&&!this._guide||t.selected&&!this._selected)?this._hitTest(e,t,n):null},_hitTest:function(e,t,n){if(this._children)for(var r=this._children.length-1;r>=0;r--){var i=this._children[r].hitTest(e,t,n);if(i)return i}},addChild:function(e){return this.insertChild(undefined,e)},insertChild:function(e,t){return this._children?(t._remove(!1,!0),Base.splice(this._children,[t],e,0),t._parent=this,t._setProject(this._project),t._name&&t.setName(t._name),this._changed(Change.HIERARCHY),!0):!1},addChildren:function(e){for(var t=0,n=e&&e.length;t<n;t++)this.insertChild(undefined,e[t])},insertChildren:function(e,t){for(var n=0,r=t&&t.length;n<r;n++)this.insertChild(e,t[n])&&e++},insertAbove:function(e){return e._parent&&e._parent.insertChild(e._index+1,this)},insertBelow:function(e){return e._parent&&e._parent.insertChild(e._index-1,this)},appendTop:function(e){return this.addChild(e)},appendBottom:function(e){return this.insertChild(0,e)},moveAbove:function(e){return this.insertAbove(e)},moveBelow:function(e){return this.insertBelow(e)},_removeFromNamed:function(){var e=this._parent._children,t=this._parent._namedChildren,n=this._name,r=t[n],i=r?r.indexOf(this):-1;if(i==-1)return;e[n]==this&&delete e[n],r.splice(i,1),r.length?e[n]=r[r.length-1]:delete t[n]},_remove:function(e,t){return this._parent?(e&&this.setSelected(!1),this._name&&this._removeFromNamed(),Base.splice(this._parent._children,null,this._index,1),t&&this._parent._changed(Change.HIERARCHY),this._parent=null,!0):!1},remove:function(){return this._remove(!0,!0
)},removeChildren:function(e,t){if(!this._children)return null;e=e||0,t=Base.pick(t,this._children.length);var n=this._children.splice(e,t-e);for(var r=n.length-1;r>=0;r--)n[r]._remove(!0,!1);return n.length>0&&this._changed(Change.HIERARCHY),n},reverseChildren:function(){if(this._children){this._children.reverse();for(var e=0,t=this._children.length;e<t;e++)this._children[e]._index=e;this._changed(Change.HIERARCHY)}},isEditable:function(){var e=this;while(e){if(!e._visible||e._locked)return!1;e=e._parent}return!0},_getOrder:function(e){function t(e){var t=[];do t.unshift(e);while(e=e._parent);return t}var n=t(this),r=t(e);for(var i=0,s=Math.min(n.length,r.length);i<s;i++)if(n[i]!=r[i])return n[i]._index<r[i]._index?1:-1;return 0},hasChildren:function(){return this._children&&this._children.length>0},isAbove:function(e){return this._getOrder(e)==-1},isBelow:function(e){return this._getOrder(e)==1},isParent:function(e){return this._parent==e},isChild:function(e){return e&&e._parent==this},isDescendant:function(e){var t=this;while(t=t._parent)if(t==e)return!0;return!1},isAncestor:function(e){return e?e.isDescendant(this):!1},isGroupedWith:function(e){var t=this._parent;while(t){if(t._parent&&(t instanceof Group||t instanceof CompoundPath)&&e.isDescendant(t))return!0;t=t._parent}return!1},_getBounds:function(e,t,n){var r=this._children;if(!r||r.length==0)return new Rectangle;var i=Infinity,s=-i,o=i,u=s;for(var a=0,f=r.length;a<f;a++){var l=r[a];if(l._visible){var c=l[e](n[0]);i=Math.min(c.x,i),o=Math.min(c.y,o),s=Math.max(c.x+c.width,s),u=Math.max(c.y+c.height,u)}}var h=Rectangle.create(i,o,s-i,u-o);return e=="getBounds"?this._createBounds(h):h},_createBounds:function(e){return LinkedRectangle.create(this,"setBounds",e.x,e.y,e.width,e.height)},getBounds:function(){return this._getBounds("getBounds","_bounds",arguments)},setBounds:function(e){e=Rectangle.read(arguments);var t=this.getBounds(),n=new Matrix,r=e.getCenter();n.translate(r),(e.width!=t.width||e.height!=t.height)&&n.scale(t.width!=0?e.width/t.width:1,t.height!=0?e.height/t.height:1),r=t.getCenter(),n.translate(-r.x,-r.y),this.transform(n)},getStrokeBounds:function(){return this._getBounds("getStrokeBounds","_strokeBounds",arguments)},getHandleBounds:function(){return this._getBounds("getHandleBounds","_handleBounds",arguments)},getRoughBounds:function(){return this._getBounds("getRoughBounds","_roughBounds",arguments)},scale:function(e,t,n){if(arguments.length<2||typeof t=="object")n=t,t=e;return this.transform((new Matrix).scale(e,t,n||this.getPosition()))},translate:function(e){var t=new Matrix;return this.transform(t.translate.apply(t,arguments))},rotate:function(e,t){return this.transform((new Matrix).rotate(e,t||this.getPosition()))},shear:function(e,t,n){if(arguments.length<2||typeof t=="object")n=t,t=e;return this.transform((new Matrix).shear(e,t,n||this.getPosition()))},transform:function(e,t){var n=this._bounds,r=this._position,i=this._children;this._transform&&(this._transform(e,t),this._changed(Change.GEOMETRY)),n&&e.getRotation()%90===0?(this._bounds=this._createBounds(e._transformBounds(n)),this._position=this._bounds.getCenter()):r&&(this._position=e._transformPoint(r,r,!0));for(var s=0,o=i&&i.length;s<o;s++)i[s].transform(e,t);return this},fitBounds:function(e,t){e=Rectangle.read(arguments);var n=this.getBounds(),r=n.height/n.width,i=e.height/e.width,s=(t?r>i:r<i)?e.width/n.width:e.height/n.height,o=e.getCenter().subtract(n.getCenter()),u=new Rectangle(new Point,new Size(n.width*s,n.height*s));u.setCenter(e.getCenter()),this.setBounds(u)},toString:function(){return(this.constructor._name||"Item")+(this._name?" '"+this._name+"'":" @"+this._id)},statics:{drawSelectedBounds:function(e,t,n){var r=n._transformCorners(e);t.beginPath();for(var i=0;i<8;i++)t[i==0?"moveTo":"lineTo"](r[i],r[++i]);t.closePath(),t.stroke();for(var i=0;i<8;i++)t.beginPath(),t.rect(r[i]-2,r[++i]-2,4,4),t.fill()},draw:function(e,t,n){if(!e._visible||e._opacity==0)return;var r,i,s;if(e._blendMode!=="normal"||e._opacity<1&&(!e._segments||!!e.getFillColor()&&!!e.getStrokeColor())){var o=e.getStrokeBounds()||e.getBounds();if(!o.width||!o.height)return;var s=o.getTopLeft().floor(),u=o.getSize().ceil().add(new Size(1,1));r=CanvasProvider.getCanvas(u),i=t,t=r.getContext("2d"),t.save(),t.translate(-s.x,-s.y)}var a;s&&(a=n.offset,n.offset=s),e.draw(t,n),s&&(n.offset=a);if(r){t.restore();if(e._blendMode!=="normal"){var f=s.subtract(n.offset);BlendMode.process(e._blendMode,t,i,e._opacity,f)}else i.save(),i.globalAlpha=e._opacity,i.drawImage(r,s.x,s.y),i.restore();CanvasProvider.returnCanvas(r)}}}},new function(){function t(t){for(var n in t){var r=t[n];r.remove();for(var i in e){var s=e[i];s!=t&&s[r.getId()]&&delete s[r.getId()]}}}function n(n){var r="onMouse"+Base.capitalize(n),i=paper.tool[r];if(!i||!i._installed){var s={};s[r]=function(r){n==="up"&&(e.drag={}),t(e[n]),e[n]={},this.base&&this.base(r)},paper.tool.inject(s),paper.tool[r]._installed=!0}}var e={down:{},drag:{},up:{},move:{}};return Base.each(["down","drag","up","move"],function(e){this["removeOn"+Base.capitalize(e)]=function(){var t={};return t[e]=!0,this.removeOn(t)}},{removeOn:function(t){for(var r in t)t[r]&&(e[r][this.getId()]=this,r==="drag"&&n("up"),n(r));return this}})}),PlacedItem=this.PlacedItem=Item.extend({_transform:function(e,t){this._matrix.preConcatenate(e)},_changed:function(e){Item.prototype._changed.call(this,e),e&ChangeFlag.GEOMETRY&&(delete this._strokeBounds,delete this._handleBounds,delete this._roughBounds)},getMatrix:function(){return this._matrix},setMatrix:function(e){this._matrix=e.clone(),this._changed(Change.GEOMETRY)},getBounds:function(){var e=arguments[0]===undefined;if(e&&this._bounds)return this._bounds;var t=this.getStrokeBounds(arguments[0]);return e&&(t=this._bounds=this._createBounds(t)),t},_getBounds:function(e,t,n){var r=n[0],i=r===undefined;if(i&&this[t])return this[t];r=r?r.clone().concatenate(this._matrix):this._matrix;var s=this._calculateBounds(e,r);return i&&(this[t]=s),s}}),Group=this.Group=PlacedItem.extend({initialize:function(e){this.base(),this._children=[],this._namedChildren={},this.addChildren(!e||!Array.isArray(e)||typeof e[0]!="object"?arguments:e),this._matrix=new Matrix},_changed:function(e){Item.prototype._changed.call(this,e),e&(ChangeFlag.HIERARCHY|ChangeFlag.CLIPPING)&&delete this._clipItem},_getClipItem:function(){if(this._clipItem!==undefined)return this._clipItem;for(var e=0,t=this._children.length;e<t;e++){var n=this._children[e];if(n._clipMask)return this._clipItem=n}return this._clipItem=null},isClipped:function(){return!!this._getClipItem()},setClipped:function(e){var t=this.getFirstChild();return t&&t.setClipMask(e),this},draw:function(e,t){var n=this._getClipItem();n&&Item.draw(n,e,t);for(var r=0,i=this._children.length;r<i;r++){var s=this._children[r];s!=n&&Item.draw(s,e,t)}},getBounds:function(){return this._getBounds("getBounds","_bounds",arguments)},_getBounds:function(e,t,n){var r=this._children;if(!r||r.length==0)return new Rectangle;var i=Infinity,s=-i,o=i,u=s;for(var a=0,f=r.length;a<f;a++){var l=r[a];if(l._visible){var c=l[e](n[0]);i=Math.min(c.x,i),o=Math.min(c.y,o),s=Math.max(c.x+c.width,s),u=Math.max(c.y+c.height,u)}}var h=Rectangle.create(i,o,s-i,u-o);return e=="getBounds"?this._createBounds(h):h}}),Layer=this.Layer=Group.extend({initialize:function(e){this._project=paper.project,this._index=this._project.layers.push(this)-1,this.base.apply(this,arguments),this.activate()},_remove:function(e,t){return this._parent?this.base(e,t):this._index!=null?(e&&this.setSelected(!1),Base.splice(this._project.layers,null,this._index,1),this._project._needsRedraw(),!0):!1},getNextSibling:function(){return this._parent?this.base():this._project.layers[this._index+1]||null},getPreviousSibling:function(){return this._parent?this.base():this._project.layers[this._index-1]||null},activate:function(){this._project.activeLayer=this}},new function(){function e(e){return function(t){return t instanceof Layer&&!t._parent&&this._remove(!1,!0)?(Base.splice(t._project.layers,[this],t._index+(e?1:-1),0),this._setProject(t._project),!0):this.base(t)}}return{insertAbove:e(!0),insertBelow:e(!1)}}),Raster=this.Raster=PlacedItem.extend({initialize:function(e){this.base(),e.getContext?this.setCanvas(e):(typeof e=="string"&&(e=document.getElementById(e)),this.setImage(e)),this._matrix=new Matrix},clone:function(){var e=this._image;e||(e=CanvasProvider.getCanvas(this._size),e.getContext("2d").drawImage(this._canvas,0,0));var t=new Raster(e);return t._matrix=this._matrix.clone(),this._clone(t)},getSize:function(){return this._size},setSize:function(){var e=Size.read(arguments),t=this.getImage();this.setCanvas(CanvasProvider.getCanvas(e)),this.getContext(!0).drawImage(t,0,0,e.width,e.height)},getWidth:function(){return this._size.width},getHeight:function(){return this._size.height},getPpi:function(){var e=this._matrix,t=(new Point(0,0)).transform(e),n=(new Point(1,0)).transform(e).subtract(t),r=(new Point(0,1)).transform(e).subtract(t);return new Size(72/n.getLength(),72/r.getLength())},getContext:function(){return this._context||(this._context=this.getCanvas().getContext("2d")),arguments[0]&&this._changed(Change.PIXELS),this._context},setContext:function(e){this._context=e},getCanvas:function(){return this._canvas||(this._canvas=CanvasProvider.getCanvas(this._size),this._image&&this.getContext(!0).drawImage(this._image,0,0)),this._canvas},setCanvas:function(e){this._canvas&&CanvasProvider.returnCanvas(this._canvas),this._canvas=e,this._size=new Size(e.width,e.height),this._image=null,this._context=null,this._changed(Change.GEOMETRY)},getImage:function(){return this._image||this.getCanvas()},setImage:function(e){this._canvas&&CanvasProvider.returnCanvas(this._canvas),this._image=e,this._size=new Size(e.naturalWidth,e.naturalHeight),this._canvas=null,this._context=null,this._changed(Change.GEOMETRY)},getSubImage:function(e){e=Rectangle.read(arguments);var t=CanvasProvider.getCanvas(e.getSize());return t.getContext("2d").drawImage(this.getCanvas(),e.x,e.y,t.width,t.height,0,0,t.width,t.height),t},drawImage:function(e,t){t=Point.read(arguments,1),this.getContext(!0).drawImage(e,t.x,t.y)},getAverageColor:function(e){e||(e=this.getBounds());var t,n;e instanceof PathItem?(n=e,t=e.getBounds()):e.width?t=new Rectangle(e):e.x&&(t=Rectangle.create(e.x-.5,e.y-.5,1,1));var r=32,i=Math.min(t.width,r),s=Math.min(t.height,r),o=Raster._sampleContext;o?o.clearRect(0,0,r,r):o=Raster._sampleContext=CanvasProvider.getCanvas(new Size(r)).getContext("2d"),o.save(),o.scale(i/t.width,s/t.height),o.translate(-t.x,-t.y),n&&n.draw(o,{clip:!0}),this._matrix.applyToContext(o),o.drawImage(this._canvas||this._image,-this._size.width/2,-this._size.height/2),o.restore();var u=o.getImageData(.5,.5,Math.ceil(i),Math.ceil(s)).data,a=[0,0,0],f=0;for(var l=0,c=u.length;l<c;l+=4){var h=u[l+3];f+=h,h/=255,a[0]+=u[l]*h,a[1]+=u[l+1]*h,a[2]+=u[l+2]*h}for(var l=0;l<3;l++)a[l]/=f;return f?Color.read(a):null},getPixel:function(e){e=Point.read(arguments);var t=this.getContext().getImageData(e.x,e.y,1,1).data,n=new Array(4);for(var r=0;r<4;r++)n[r]=t[r]/255;return RgbColor.read(n)},setPixel:function(e,t){var n=arguments.length==2;e=Point.read(arguments,0,n?1:2),t=Color.read(arguments,n?1:2);var r=this.getContext(!0),i=r.createImageData(1,1),s=t.getAlpha();i.data[0]=t.getRed()*255,i.data[1]=t.getGreen()*255,i.data[2]=t.getBlue()*255,i.data[3]=s!=null?s*255:255,r.putImageData(i,e.x,e.y)},createData:function(e){return e=Size.read(arguments),this.getContext().createImageData(e.width,e.height)},getData:function(e){return e=Rectangle.read(arguments),e.isEmpty()&&(e=new Rectangle(this.getSize())),this.getContext().getImageData(e.x,e.y,e.width,e.height)},setData:function(e,t){t=Point.read(arguments,1),this.getContext(!0).putImageData(e,t.x,t.y)},_calculateBounds:function(e,t){return t._transformBounds((new Rectangle(this._size)).setCenter(0,0))},getHandleBounds:function(){return this.getStrokeBounds(arguments[0])},getRoughBounds:function(){return this.getStrokeBounds(arguments[0])},draw:function(e,t){if(t.selection){var n=(new Rectangle(this._size)).setCenter(0,0);Item.drawSelectedBounds(n,e,this._matrix)}else e.save(),this._matrix.applyToContext(e),e.drawImage(this._canvas||this._image,-this._size.width/2,-this._size.height/2),e.restore()}}),PlacedSymbol=this.PlacedSymbol=PlacedItem.extend({initialize:function(e,t){this.base(),this.setSymbol(e instanceof Symbol?e:new Symbol(e)),this._matrix=t!==undefined?t instanceof Matrix?t:(new Matrix).translate(Point.read(arguments,1)):new Matrix},getSymbol:function(){return this._symbol},setSymbol:function(e){this._symbol&&delete this._symbol._instances[this._id],this._symbol=e,e._instances[this._id]=this},clone:function(){return this._clone(new PlacedSymbol(this.symbol,this._matrix.clone()))},_calculateBounds:function(e,t){return this.symbol._definition[e](t)},draw:function(e,t){t.selection?Item.drawSelectedBounds(this.symbol._definition.getStrokeBounds(),e,this._matrix):(e.save(),this._matrix.applyToContext(e),Item.draw(this.symbol.getDefinition(),e,t),e.restore())}});HitResult=Base.extend({initialize:function(e,t,n){this.type=e,this.item=t,n&&Base.each(n,function(e,t){this[t]=e},this)},statics:{getOptions:function(e,t){return t&&t._merged?t:Base.merge({point:Point.read(arguments,0,1),type:null,tolerance:2,fill:!t,stroke:!t,segments:!t,handles:!1,ends:!1,center:!1,bounds:!1,guides:!1,selected:!1,_merged:!0},t)}}});var Segment=this.Segment=Base.extend({initialize:function(e,t,n,r,i,s){var o=arguments.length,u=SegmentPoint.create,a,f,l;o!=0&&(o==1?e.point?(a=e.point,f=e.handleIn,l=e.handleOut):a=e:o<6?o==2&&t.x===undefined?a=[e,t]:(a=e,f=t,l=n):o==6&&(a=[e,t],f=[n,r],l=[i,s])),u(this,"_point",a),u(this,"_handleIn",f),u(this,"_handleOut",l)},_changed:function(e){if(!this._path)return;var t=this._path._curves&&this.getCurve(),n;t&&(t._changed(),(n=t[e==this._point||e==this._handleIn&&t._segment1==this?"getPrevious":"getNext"]())&&n._changed()),this._path._changed(Change.GEOMETRY)},getPoint:function(){return this._point},setPoint:function(e){e=Point.read(arguments),this._point.set(e.x,e.y)},getHandleIn:function(){return this._handleIn},setHandleIn:function(e){e=Point.read(arguments),this._handleIn.set(e.x,e.y)},getHandleOut:function(){return this._handleOut},setHandleOut:function(e){e=Point.read(arguments),this._handleOut.set(e.x,e.y)},_isSelected:function(e){var t=this._selectionState;return e==this._point?!!(t&SelectionState.POINT):e==this._handleIn?!!(t&SelectionState.HANDLE_IN):e==this._handleOut?!!(t&SelectionState.HANDLE_OUT):!1},_setSelected:function(e,t){var n=this._path,t=!!t,r=this._selectionState||0,i=[!!(r&SelectionState.POINT),!!(r&SelectionState.HANDLE_IN),!!(r&SelectionState.HANDLE_OUT)];if(e==this._point){if(t)i[1]=i[2]=!1;else{var s=this.getPrevious(),o=this.getNext();i[1]=s&&(s._point.isSelected()||s._handleOut.isSelected()),i[2]=o&&(o._point.isSelected()||o._handleIn.isSelected())}i[0]=t}else{var u=e==this._handleIn?1:2;i[u]!=t&&(t&&(i[0]=!1),i[u]=t,n._changed(Change.ATTRIBUTE))}this._selectionState=(i[0]?SelectionState.POINT:0)|(i[1]?SelectionState.HANDLE_IN:0)|(i[2]?SelectionState.HANDLE_OUT:0),n&&r!=this._selectionState&&n._updateSelection(this,r,this._selectionState)},isSelected:function(){return this._isSelected(this._point)},setSelected:function(e){this._setSelected(this._point,e)},getIndex:function(){return this._index!==undefined?this._index:null},getPath:function(){return this._path||null},getCurve:function(){if(this._path){var e=this._index;return!this._path._closed&&e==this._path._segments.length-1&&e--,this._path.getCurves()[e]||null}return null},getNext:function(){var e=this._path&&this._path._segments;return e&&(e[this._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._segments;return e&&(e[this._index-1]||this._path._closed&&e[e.length-1])||null},reverse:function(){return new Segment(this._point,this._handleOut,this._handleIn)},remove:function(){return this._path?!!this._path.removeSegment(this._index):!1},toString:function(){var e=["point: "+this._point];return this._handleIn.isZero()||e.push("handleIn: "+this._handleIn),this._handleOut.isZero()||e.push("handleOut: "+this._handleOut),"{ "+e.join(", ")+" }"},_transformCoordinates:function(e,t,n){var r=this._point,i=!n||!this._handleIn.isZero()?this._handleIn:null,s=!n||!this._handleOut.isZero()?this._handleOut:null,o=r._x,u=r._y,a=2;t[0]=o,t[1]=u,i&&(t[a++]=i._x+o,t[a++]=i._y+u),s&&(t[a++]=s._x+o,t[a++]=s._y+u);if(!e)return;e._transformCoordinates(t,0,t,0,a/2),o=t[0],u=t[1],n?(r._x=o,r._y=u,a=2,i&&(i._x=t[a++]-o,i._y=t[a++]-u),s&&(s._x=t[a++]-o,s._y=t[a++]-u)):(i||(t[a++]=o,t[a++]=u),s||(t[a++]=o,t[a++]=u))}}),SegmentPoint=Point.extend({set:function(e,t){return this._x=e,this._y=t,this._owner._changed(this),this},getX:function(){return this._x},setX:function(e){this._x=e,this._owner._changed(this)},getY:function(){return this._y},setY:function(e){this._y=e,this._owner._changed(this)},isZero:function(){return this._x==0&&this._y==0},setSelected:function(e){this._owner._setSelected(this,e)},isSelected:function(){return this._owner._isSelected(this)},statics:{create:function(e,t,n){var r=new SegmentPoint(SegmentPoint.dont),i,s,o;return n?(i=n[0])!==undefined?s=n[1]:((i=n.x)===undefined&&(n=Point.read(arguments,2,1),i=n.x),s=n.y,o=n.selected):i=s=0,r._x=i,r._y=s,r._owner=e,e[t]=r,o&&r.setSelected(!0),r}}}),SelectionState={HANDLE_IN:1,HANDLE_OUT:2,POINT:4},Curve=this.Curve=Base.extend({initialize:function(e,t,n,r,i,s,o,u){var a=arguments.length;if(a==0)this._segment1=new Segment,this._segment2=new Segment;else if(a==1)this._segment1=new Segment(e.segment1),this._segment2=new Segment(e.segment2);else if(a==2)this._segment1=new Segment(e),this._segment2=new Segment(t);else if(a==4)this._segment1=new Segment(e,null,t),this._segment2=new Segment(r,n,null);else if(a==8){var f=Point.create(e,t),l=Point.create(o,u);this._segment1=new Segment(f,null,Point.create(n,r).subtract(f)),this._segment2=new Segment(l,Point.create(i,s).subtract(l),null)}},_changed:function(){delete this._length},getPoint1:function(){return this._segment1._point},setPoint1:function(e){e=Point.read(arguments),this._segment1._point.set(e.x,e.y)},getPoint2:function(){return this._segment2._point},setPoint2:function(e){e=Point.read(arguments),this._segment2._point.set(e.x,e.y)},getHandle1:function(){return this._segment1._handleOut},setHandle1:function(e){e=Point.read(arguments),this._segment1._handleOut.set(e.x,e.y)},getHandle2:function(){return this._segment2._handleIn},setHandle2:function(e){e=Point.read(arguments),this._segment2._handleIn.set(e.x,e.y)},getSegment1:function(){return this._segment1},getSegment2:function(){return this._segment2},getPath:function(){return this._path},getIndex:function(){return this._segment1._index},getNext:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index+1]||this._path._closed&&e[0])||null},getPrevious:function(){var e=this._path&&this._path._curves;return e&&(e[this._segment1._index-1]||this._path._closed&&e[e.length-1])||null},isSelected:function(){return this.getHandle1().isSelected()&&this.getHandle2().isSelected()},setSelected:function(e){this.getHandle1().setSelected(e),this.getHandle2().setSelected(e)},getValues:function(e){return Curve.getValues(this._segment1,this._segment2,e)},getPoints:function(e){var t=this.getValues(e),n=[];for(var r=0;r<8;r+=2)n.push(Point.create(t[r],t[r+1]));return n},getLength:function(){var e=arguments[0],t=arguments[1];fullLength=arguments.length==0||e==0&&t==1;if(fullLength&&this._length!=null)return this._length;var n=Curve.getLength(this.getValues(),e,t);return fullLength&&(this._length=n),n},getPart:function(e,t){return new Curve(Curve.getPart(this.getValues(),e,t))},isLinear:function(){return this._segment1._handleOut.isZero()&&this._segment2._handleIn.isZero()},getParameterAt:function(e,t){return Curve.getParameterAt(this.getValues(),e,t!==undefined?t:e<0?1:0)},getPoint:function(e){return Curve.evaluate(this.getValues(),e,0)},getTangent:function(e){return Curve.evaluate(this.getValues(),e,1)},getNormal:function(e){return Curve.evaluate(this.getValues(),e,2)},getParameter:function(e){return e=Point.read(e),Curve.getParameter(this.getValues(),e.x,e.y)},getCrossings:function(e,t,n){var r=this.getValues(t),i=Curve.solveCubic(r,1,e.y,n),s=0;for(var o=0;o<i;o++){var u=n[o];if(u>=0&&u<1&&Curve.evaluate(r,u,0).x>e.x){if(u<Numerical.TOLERANCE&&Curve.evaluate(this.getPrevious().getValues(t),1,1).y*Curve.evaluate(r,u,1).y>=0)continue;s++}}return s},reverse:function(){return new Curve(this._segment2.reverse(),this._segment1.reverse())},clone:function(){return new Curve(this._segment1,this._segment2)},toString:function(){var e=["point1: "+this._segment1._point];return this._segment1._handleOut.isZero()||e.push("handle1: "+this._segment1._handleOut),this._segment2._handleIn.isZero()||e.push("handle2: "+this._segment2._handleIn),e.push("point2: "+this._segment2._point),"{ "+e.join(", ")+" }"},statics:{create:function(e,t,n){var r=new Curve(Curve.dont);return r._path=e,r._segment1=t,r._segment2=n,r},getValues:function(e,t,n){var r=e._point,i=e._handleOut,s=t._handleIn,o=t._point,u=[r._x,r._y,r._x+i._x,r._y+i._y,o._x+s._x,o._y+s._y,o._x,o._y];return n?n._transformCoordinates(u,0,u,0,4):u},evaluate:function(e,t,n){var r=e[0],i=e[1],s=e[2],o=e[3],u=e[4],a=e[5],f=e[6],l=e[7],c,h;if(n!=0||t!=0&&t!=1){var p=Numerical.TOLERANCE;t<p&&s==r&&o==i?t=p:t>1-p&&u==f&&a==l&&(t=1-p);var d=3*(s-r),v=3*(u-s)-d,m=f-r-d-v,g=3*(o-i),y=3*(a-o)-g,b=l-i-g-y;switch(n){case 0:c=((m*t+v)*t+d)*t+r,h=((b*t+y)*t+g)*t+i;break;case 1:case 2:c=(3*m*t+2*v)*t+d,h=(3*b*t+2*y)*t+g}}else c=t==0?r:f,h=t==0?i:l;return n==2?new Point(h,-c):new Point(c,h)},subdivide:function(e,t){var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],u=e[5],a=e[6],f=e[7];t===undefined&&(t=.5);var l=1-t,c=l*n+t*i,h=l*r+t*s,p=l*i+t*o,d=l*s+t*u,v=l*o+t*a,m=l*u+t*f,g=l*c+t*p,y=l*h+t*d,b=l*p+t*v,w=l*d+t*m,E=l*g+t*b,S=l*y+t*w;return[[n,r,c,h,g,y,E,S],[E,S,b,w,v,m,a,f]]},solveCubic:function(e,t,n,r){var i=e[t],s=e[t+2],o=e[t+4],u=e[t+6],a=3*(s-i),f=3*(o-s)-a,l=u-i-a-f;return Numerical.solveCubic(l,f,a,i-n,r,Numerical.TOLERANCE)},getParameter:function(e,t,n){var r=[],i=[],s=Curve.solveCubic(e,0,t,r),o=Curve.solveCubic(e,1,n,i),u,a;for(var f=0;s==-1||f<s;)if(s==-1||(u=r[f++])>=0&&u<=1){for(var l=0;o==-1||l<o;)if(o==-1||(a=i[l++])>=0&&a<=1){s==-1?u=a:o==-1&&(a=u);if(Math.abs(u-a)<Numerical.TOLERANCE)return(u+a)*.5}if(s==-1)break}return null},getPart:function(e,t,n){return t>0&&(e=Curve.subdivide(e,t)[1]),n<1&&(e=Curve.subdivide(e,(n-t)/(1-t))[0]),e},isFlatEnough:function(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=n-a,l=u-t,c=t*a-u*n,h=f*r+l*i+c,p=f*s+l*o+c;return Math.abs((h*h+p*p)/(f*(f*f+l*l)))<.005}}},new function(){function e(e){var t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],u=e[6],a=e[7],f=9*(r-s)+3*(u-t),l=6*(t+s)-12*r,c=3*(r-t),h=9*(i-o)+3*(a-n),p=6*(n+o)-12*i,d=3*(i-n);return function(e){var t=(f*e+l)*e+c,n=(h*e+p)*e+d;return Math.sqrt(t*t+n*n)}}function t(e,t){return Math.max(2,Math.min(16,Math.ceil(Math.abs(t-e)*32)))}return{statics:!0,getLength:function(n,r,i){r===undefined&&(r=0),i===undefined&&(i=1);if(n[0]==n[2]&&n[1]==n[3]&&n[6]==n[4]&&n[7]==n[5]){var s=n[6]-n[0],o=n[7]-n[1];return(i-r)*Math.sqrt(s*s+o*o)}var u=e(n);return Numerical.integrate(u,r,i,t(r,i))},getParameterAt:function(n,r,i){function h(e){var n=t(i,e);return c+=i<e?Numerical.integrate(a,i,e,n):-Numerical.integrate(a,e,i,n),i=e,c-r}if(r==0)return i;var s=r>0,o=s?i:0,u=s?1:i,r=Math.abs(r),a=e(n),f=Numerical.integrate(a,o,u,t(o,u));if(r>=f)return s?u:o;var l=r/f,c=0;return Numerical.findRoot(h,a,s?o+l:u-l,o,u,16,Numerical.TOLERANCE)}}},new function(){function i(e,t){var r=3,i=5,s=[],o=[],u=[],a=[];for(var f=0;f<=r;f++)s[f]=e[f].subtract(t),f<r&&(o[f]=e[f+1].subtract(e[f]).multiply(r));for(var l=0;l<r;l++){u[l]=[];for(var c=0;c<=r;c++)u[l][c]=o[l].dot(s[c])}for(var f=0;f<=i;f++)a[f]=new Point(f/i,0);for(k=0;k<=i;k++){var h=Math.max(0,k-r+1),p=Math.min(k,r);for(var f=h;f<=p;f++){var d=k-f;a[k].y+=u[d][f]*n[d][f]}}return a}function s(t,n){switch(o(t)){case 0:return[];case 1:if(n>=e)return[.5*(t[0].x+t[5].x)];if(u(t)){var i=new Line(t[0],t[5],!0);return[i.vector.getLength(!0)<=Numerical.EPSILON?i.point.x:r.intersect(i).x]}}var a=[[]],f=[],l=[];for(var c=0;c<=5;c++)a[0][c]=new Point(t[c]);for(var h=1;h<=5;h++){a[h]=[];for(var c=0;c<=5-h;c++)a[h][c]=a[h-1][c].add(a[h-1][c+1]).multiply(.5)}for(var c=0;c<=5;c++)f[c]=a[c][0],l[c]=a[5-c][c];return s(f,n+1).concat(s(l,n+1))}function o(e){var t=0,n=null;for(var r=0,i=e.length;r<i;r++){var s=e[r].y<0?-1:1;n!=null&&s!=n&&t++,n=s}return t}function u(e){var n=e.length-1,r=e[0].y-e[n].y,i=e[n].x-e[0].x,s=e[0].x*e[n].y-e[n].x*e[0].y,o=0,u=0;for(var a=1;a<n;a++){var f=r*e[a].x+i*e[a].y+s,l=f*f;f<0&&l>u?u=l:l>o&&(o=l)}return Math.abs((o+u)/(2*r*(r*r+i*i)))<t}var e=32,t=Math.pow(2,-e-1),n=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],r=new Line(new Point(0,0),new Point(1,0));return{getNearestLocation:function(e,t){var n=i(this.getPoints(t),e),r=s(n,0).concat([0,1]),o=Infinity,u,a;for(var f=0;f<r.length;f++){var l=this.getPoint(r[f]),c=e.getDistance(l,!0);c<o&&(o=c,u=r[f],a=l)}return new CurveLocation(this,u,a,Math.sqrt(o))},getNearestPoint:function(e,t){return this.getNearestLocation(e,t).getPoint()}}});CurveLocation=Base.extend({initialize:function(e,t,n,r){this._curve=e,this._parameter=t,this._point=n,this._distance=r},getSegment:function(){if(!this._segment){var e=this._curve,t=this.getParameter();if(t==0)this._segment=e._segment1;else if(t==1)this._segment=e._segment2;else{if(t==null)return null;this._segment=e.getLength(0,t)<e.getLength(t,1)?e._segment1:e._segment2}}return this._segment},getCurve:function(){return this._curve},getPath:function(){return this._curve&&this._curve._path},getIndex:function(){return this._curve&&this._curve.getIndex()},getOffset:function(){var e=this._curve&&this._curve._path;return e&&e._getOffset(this)},getCurveOffset:function(){var e=this.getParameter();return e!=null&&this._curve&&this._curve.getLength(0,e)},getParameter:function(){return this._parameter==null&&this._curve&&this._point&&(this._parameter=this._curve.getParameterAt(this._point)),this._parameter},getPoint:function(){return!this._point&&this._curve&&this._parameter!=null&&(this._point=this._curve.getPoint(this._parameter)),this._point},getTangent:function(){var e=this.getParameter();return e!=null&&this._curve&&this._curve.getTangent(e)},getNormal:function(){var e=this.getParameter();return e!=null&&this._curve&&this._curve.getNormal(e)},getDistance:function(){return this._distance},toString:function(){var e=[],t=this.getPoint();t&&e.push("point: "+t);var n=this.getIndex();n!=null&&e.push("index: "+n);var r=this.getParameter();return r!=null&&e.push("parameter: "+Base.formatNumber(r)),this._distance!=null&&e.push("distance: "+Base.formatNumber(this._distance)),"{ "+e.join(", ")+" }"}});var PathItem=this.PathItem=PlacedItem.extend({}),Path=this.Path=PathItem.extend({initialize:function(e){this.base(),this._closed=!1,this._selectedSegmentState=0,this.setSegments(!e||!Array.isArray(e)||typeof e[0]!="object"?arguments:e),this._matrix=new Matrix},clone:function(){var e=this._clone(new Path(this._segments));return e._closed=this._closed,this._clockwise!==undefined&&(e._clockwise=this._clockwise),e},_changed:function(e){Item.prototype._changed.call(this,e),e&ChangeFlag.GEOMETRY?(delete this._strokeBounds,delete this._handleBounds,delete this._roughBounds,delete this._length,delete this._clockwise):e&ChangeFlag.STROKE&&delete this._strokeBounds},getSegments:function(){return this._segments},setSegments:function(e){this._segments?(this._selectedSegmentState=0,this._segments.length=0,this._curves&&delete this._curves):this._segments=[],this._add(Segment.readAll(e))},getFirstSegment:function(){return this._segments[0]},getLastSegment:function(){return this._segments[this._segments.length-1]},getCurves:function(){if(!this._curves){var e=this._segments,t=e.length;!this._closed&&t>0&&t--,this._curves=new Array(t);for(var n=0;n<t;n++)this._curves[n]=Curve.create(this,e[n],e[n+1]||e[0])}return this._curves},getFirstCurve:function(){return this.getCurves()[0]},getLastCurve:function(){var e=this.getCurves();return e[e.length-1]},getClosed:function(){return this._closed},setClosed:function(e){if(this._closed!=(e=!!e)){this._closed=e;if(this._curves){var t=this._segments.length,n;!e&&t>0&&t--,this._curves.length=t,e&&(this._curves[n=t-1]=Curve.create(this,this._segments[n],this._segments[0]))}this._changed(Change.GEOMETRY)}},_transform:function(e,t){if(!e.isIdentity()){var n=new Array(6);for(var r=0,i=this._segments.length;r<i;r++)this._segments[r]._transformCoordinates(e,n,!0);var s=this.getFillColor(),o=this.getStrokeColor();s&&s.transform&&s.transform(e),o&&o.transform&&o.transform(e)}},_add:function(e,t){var n=this._segments,r=this._curves,i=e.length,s=t==null,t=s?n.length:t,o=this.isFullySelected();for(var u=0;u<i;u++){var a=e[u];a._path&&(a=e[u]=new Segment(a)),a._path=this,a._index=t+u,o&&(a._selectionState=SelectionState.POINT),a._selectionState&&this._updateSelection(a,0,a._selectionState)}if(s)n.push.apply(n,e);else{n.splice.apply(n,[t,0].concat(e));for(var u=t+i,f=n.length;u<f;u++)n[u]._index=u}if(r&&--t>=0){r.splice(t,0,Curve.create(this,n[t],n[t+1]));var l=r[t+i];l&&(l._segment1=n[t+i])}return this._changed(Change.GEOMETRY),e},add:function(e){return arguments.length>1&&typeof e!="number"?this._add(Segment.readAll(arguments)):this._add([Segment.read(arguments)])[0]},insert:function(e,t){return arguments.length>2&&typeof t!="number"?this._add(Segment.readAll(arguments,1),e):this._add([Segment.read(arguments,1)],e)[0]},addSegment:function(e){return this._add([Segment.read(arguments)])[0]},insertSegment:function(e,t){return this._add([Segment.read(arguments,1)],e)[0]},addSegments:function(e){return this._add(Segment.readAll(e))},insertSegments:function(e,t){return this._add(Segment.readAll(t),e)},removeSegment:function(e){var t=this.removeSegments(e,e+1);return t[0]||null},removeSegments:function(e,t){e=e||0,t=Base.pick(t,this._segments.length);var n=this._segments,r=this._curves,i=t>=n.length,s=n.splice(e,t-e),o=s.length;if(!o)return s;for(var u=0;u<o;u++){var a=s[u];a._selectionState&&this._updateSelection(a,a._selectionState,0),s._index=s._path=undefined}for(var u=e,f=n.length;u<f;u++)n[u]._index=u;if(r){r.splice(e,o);var l;if(l=r[e-1])l._segment2=n[e];if(l=r[e])l._segment1=n[e];i&&this._closed&&(l=r[r.length-1])&&(l._segment2=n[0])}return this._changed(Change.GEOMETRY),s},isFullySelected:function(){return this._selected&&this._selectedSegmentState==this._segments.length*SelectionState.POINT},setFullySelected:function(e){var t=this._segments.length;this._selectedSegmentState=e?t*SelectionState.POINT:0;for(var n=0;n<t;n++)this._segments[n]._selectionState=e?SelectionState.POINT:0;this.setSelected(e)},_updateSelection:function(e,t,n){e._selectionState=n;var r=this._selectedSegmentState+=n-t;r>0&&this.setSelected(!0)},flatten:function(e){var t=new PathFlattener(this),n=0,r=t.length/Math.ceil(t.length/e),i=t.length+(this._closed?-r:r)/2,s=[];while(n<=i)s.push(new Segment(t.evaluate(n,0))),n+=r;this.setSegments(s)},simplify:function(e){if(this._segments.length>2){var t=new PathFitter(this,e||2.5);this.setSegments(t.fit())}},isClockwise:function(){function r(r,i){t!==undefined&&(e+=(t-r)*(i+n)),t=r,n=i}if(this._clockwise!==undefined)return this._clockwise;var e=0,t,n;for(var i=0,s=this._segments.length;i<s;i++){var o=this._segments[i],u=this._segments[i+1<s?i+1:0],a=o._point,f=o._handleOut,l=u._handleIn,c=u._point;r(a._x,a._y),r(a._x+f._x,a._y+f._y),r(c._x+l._x,c._y+l._y),r(c._x,c._y)}return e>0},setClockwise:function(e){this.isClockwise()!=(e=!!e)&&(this.reverse(),this._clockwise=e)},reverse:function(){this._segments.reverse();for(var e=0,t=this._segments.length;e<t;e++){var n=this._segments[e],r=n._handleIn;n._handleIn=n._handleOut,n._handleOut=r}this._clockwise!==undefined&&(this._clockwise=!this._clockwise)},join:function(e){if(e){var t=e._segments,n=this.getLastSegment(),r=e.getLastSegment();n._point.equals(r._point)&&e.reverse();var i=e.getFirstSegment();if(n._point.equals(i._point))n.setHandleOut(i._handleOut),this._add(t.slice(1));else{var s=this.getFirstSegment();s._point.equals(i._point)&&e.reverse(),r=e.getLastSegment(),s._point.equals(r._point)?(s.setHandleIn(r._handleIn),this._add(t.slice(0,t.length-1),0)):this._add(t.slice(0))}e.remove();var s=this.getFirstSegment();return n=this.getLastSegment(),n._point.equals(s._point)&&(s.setHandleIn(n._handleIn),n.remove(),this.setClosed(!0)),this._changed(Change
.GEOMETRY),!0}return!1},getLength:function(){if(this._length==null){var e=this.getCurves();this._length=0;for(var t=0,n=e.length;t<n;t++)this._length+=e[t].getLength()}return this._length},_getOffset:function(e){var t=e&&e.getIndex();if(t!=null){var n=this.getCurves(),r=0;for(var i=0;i<t;i++)r+=n[i].getLength();var s=n[t];return r+s.getLength(0,e.getParameter())}return null},getLocation:function(e){var t=this.getCurves();for(var n=0,r=t.length;n<r;n++){var i=t[n],s=i.getParameter(e);if(s!=null)return new CurveLocation(i,s)}return null},getLocationAt:function(e,t){var n=this.getCurves(),r=0;if(t){var i=~~e;return new CurveLocation(n[i],e-i)}for(var s=0,o=n.length;s<o;s++){var u=r,a=n[s];r+=a.getLength();if(r>=e)return new CurveLocation(a,a.getParameterAt(e-u))}return e<=this.getLength()?new CurveLocation(n[n.length-1],1):null},getPointAt:function(e,t){var n=this.getLocationAt(e,t);return n&&n.getPoint()},getTangentAt:function(e,t){var n=this.getLocationAt(e,t);return n&&n.getTangent()},getNormalAt:function(e,t){var n=this.getLocationAt(e,t);return n&&n.getNormal()},getNearestLocation:function(e,t){var n=this.getCurves(),r=Infinity,i=null;for(var s=0,o=n.length;s<o;s++){var u=n[s].getNearestLocation(e,t);u._distance<r&&(r=u._distance,i=u)}return i},getNearestPoint:function(e,t){return this.getNearestLocation(e,t).getPoint()},contains:function(e,t){e=Point.read(arguments);if(!this._closed||!this.getRoughBounds(t)._containsPoint(e))return!1;var n=this.getCurves(),r=0,i=[];for(var s=0,o=n.length;s<o;s++)r+=n[s].getCrossings(e,t,i);return(r&1)==1},_hitTest:function(e,t,n){function f(i,s){i._transformCoordinates(n,u);for(var o=s||t.segments?0:2,f=!s&&t.handles?6:2;o<f;o+=2)if(e.getDistance(u[o],u[o+1])<r)return new HitResult(o==0?"segment":"handle-"+(o==2?"in":"out"),a,{segment:i})}if(t.class&&t.class!=this.class)return null;var r=t.tolerance||0,i=(t.stroke?this.getStrokeWidth()/2:0)+r,s,o,u=[],a=this;if(t.ends&&!t.segments&&!this._closed){if(o=f(this.getFirstSegment(),!0)||f(this.getLastSegment(),!0))return o}else if(t.segments||t.handles)for(var l=0,c=this._segments.length;l<c;l++)if(o=f(this._segments[l]))return o;t.stroke&&i>0&&(s=this.getNearestLocation(e,n));if(!(s&&s._distance<=i)&&t.fill&&this.getFillColor()&&this.contains(e,n))return new HitResult("fill",this);!s&&t.stroke&&i>0&&(s=this.getNearestLocation(e,n));if(s&&s._distance<=i)return t.stroke?new HitResult("stroke",this,{location:s}):new HitResult("fill",this)}},new function(){function e(e,n){for(var r=0,i=n.length;r<i;r++){var s=n[r],o=s._point,u=s._selectionState,a=u&SelectionState.POINT;(a||u&SelectionState.HANDLE_IN)&&t(e,o,s._handleIn),(a||u&SelectionState.HANDLE_OUT)&&t(e,o,s._handleOut),e.save(),e.beginPath(),e.rect(o._x-2,o._y-2,4,4),e.fill(),a||(e.beginPath(),e.rect(o._x-1,o._y-1,2,2),e.fillStyle="#ffffff",e.fill()),e.restore()}}function t(e,t,n){if(!n.isZero()){var r=t._x+n._x,i=t._y+n._y;e.beginPath(),e.moveTo(t._x,t._y),e.lineTo(r,i),e.stroke(),e.beginPath(),e.arc(r,i,1.75,0,Math.PI*2,!0),e.fill()}}function n(e,t){function u(t){var r=n[t],u=r._point,a=u._x,f=u._y,l=r._handleIn;i?l.isZero()&&i.isZero()?e.lineTo(a,f):e.bezierCurveTo(s,o,l._x+a,l._y+f,a,f):e.moveTo(a,f),i=r._handleOut,s=i._x+a,o=i._y+f}var n=t._segments,r=n.length,i,s,o;for(var a=0;a<r;a++)u(a);t._closed&&r>1&&u(0)}function r(e,t,n,r){var i=new PathFlattener(t),s=r,o,u=0;while(s<i.length)o=s+n[u++%n.length],i.drawPart(e,s,o),s=o+n[u++%n.length]}return{draw:function(t,i){t.save(),this._matrix.applyToContext(t),i.compound||t.beginPath();var s=this.getFillColor(),o=this.getStrokeColor(),u=this.getDashArray()||[],a=!!u.length;(i.compound||i.selection||this._clipMask||s||o&&!a)&&n(t,this);if(i.selection)t.stroke(),e(t,this._segments);else if(this._clipMask)t.clip();else if(!i.compound&&(s||o)){t.save(),this._setStyles(t);if(!s||!o)t.globalAlpha=this._opacity;s&&(t.fillStyle=s.getCanvasStyle(t),t.fill()),o&&(t.strokeStyle=o.getCanvasStyle(t),a&&(t.beginPath(),r(t,this,u,this.getDashOffset())),t.stroke()),t.restore()}t.restore()}}},new function(){function e(e){var t=e.length,n=[],r=[],i=2;n[0]=e[0]/i;for(var s=1;s<t;s++)r[s]=1/i,i=(s<t-1?4:2)-r[s],n[s]=(e[s]-n[s-1])/i;for(var s=1;s<t;s++)n[t-s-1]-=r[t-s]*n[t-s];return n}var t={getStrokeWidth:"lineWidth",getStrokeJoin:"lineJoin",getStrokeCap:"lineCap",getMiterLimit:"miterLimit"};return{_setStyles:function(e){for(var n in t){var r=this._style[n]();r&&(e[t[n]]=r)}},smooth:function(){var t=this._segments,n=t.length,r=n,i;if(n<=2)return;this._closed?(i=Math.min(n,4),r+=Math.min(n,i)*2):i=0;var s=[];for(var o=0;o<n;o++)s[o+i]=t[o]._point;if(this._closed)for(var o=0;o<i;o++)s[o]=t[o+n-i]._point,s[o+n+i]=t[o]._point;else r--;var u=[];for(var o=1;o<r-1;o++)u[o]=4*s[o]._x+2*s[o+1]._x;u[0]=s[0]._x+2*s[1]._x,u[r-1]=3*s[r-1]._x;var a=e(u);for(var o=1;o<r-1;o++)u[o]=4*s[o]._y+2*s[o+1]._y;u[0]=s[0]._y+2*s[1]._y,u[r-1]=3*s[r-1]._y;var f=e(u);if(this._closed){for(var o=0,l=n;o<i;o++,l++){var c=o/i,h=1-c;a[l]=a[o]*c+a[l]*h,f[l]=f[o]*c+f[l]*h;var p=o+i,d=l+i;a[d]=a[p]*h+a[d]*c,f[d]=f[p]*h+f[d]*c}r--}var v=null;for(var o=i;o<=r-i;o++){var m=t[o-i];v&&m.setHandleIn(v.subtract(m._point)),o<r&&(m.setHandleOut((new Point(a[o],f[o])).subtract(m._point)),o<r-1?v=new Point(2*s[o+1]._x-a[o+1],2*s[o+1]._y-f[o+1]):v=new Point((s[r]._x+a[r-1])/2,(s[r]._y+f[r-1])/2))}if(this._closed&&v){var m=this._segments[0];m.setHandleIn(v.subtract(m._point))}}}},new function(){function e(e){var t=e._segments;if(t.length==0)throw new Error("Use a moveTo() command first");return t[t.length-1]}return{moveTo:function(e){this._segments.length||this._add([new Segment(Point.read(arguments))])},moveBy:function(e){throw new Error("moveBy() is unsupported on Path items.")},lineTo:function(e){this._add([new Segment(Point.read(arguments))])},cubicCurveTo:function(t,n,r){t=Point.read(arguments,0,1),n=Point.read(arguments,1,1),r=Point.read(arguments,2,1);var i=e(this);i.setHandleOut(t.subtract(i._point)),this._add([new Segment(r,n.subtract(r))])},quadraticCurveTo:function(t,n){t=Point.read(arguments,0,1),n=Point.read(arguments,1,1);var r=e(this)._point;this.cubicCurveTo(t.add(r.subtract(t).multiply(1/3)),t.add(n.subtract(t).multiply(1/3)),n)},curveTo:function(t,n,r){t=Point.read(arguments,0,1),n=Point.read(arguments,1,1);var i=Base.pick(r,.5),s=1-i,o=e(this)._point,u=t.subtract(o.multiply(s*s)).subtract(n.multiply(i*i)).divide(2*i*s);if(u.isNaN())throw new Error("Cannot put a curve through points with parameter = "+i);this.quadraticCurveTo(u,n)},arcTo:function(t,n){var r=e(this),i=r._point,s;n===undefined&&(n=!0);if(typeof n=="boolean"){t=Point.read(arguments,0,1);var o=i.add(t).divide(2),s=o.add(o.subtract(i).rotate(n?-90:90))}else s=Point.read(arguments,0,1),t=Point.read(arguments,1,1);var u=new Line(i.add(s).divide(2),s.subtract(i).rotate(90)),a=new Line(s.add(t).divide(2),t.subtract(s).rotate(90)),f=u.intersect(a),l=new Line(i,t,!0),c=l.getSide(s);if(!f){if(!c)return this.lineTo(t);throw new Error("Cannot put an arc through the given points: "+[i,s,t])}var h=i.subtract(f),p=h.getLength(),d=h.getDirectedAngle(t.subtract(f)),v=l.getSide(f);v==0?d=c*Math.abs(d):c==v&&(d-=360*(d<0?-1:1));var m=Math.abs(d),g=m>=360?4:Math.ceil(m/90),y=d/g,b=y*Math.PI/360,w=4/3*Math.sin(b)/(1+Math.cos(b)),E=[];for(var S=0;S<=g;S++){var x=S<g?f.add(h):t,T=S<g?h.rotate(90).multiply(w):null;S==0?r.setHandleOut(T):E.push(new Segment(x,h.rotate(-90).multiply(w),T)),h=h.rotate(y)}this._add(E)},lineBy:function(t){t=Point.read(arguments);var n=e(this);this.lineTo(n._point.add(t))},curveBy:function(t,n,r){t=Point.read(t),n=Point.read(n);var i=e(this)._point;this.curveTo(i.add(t),i.add(n),r)},arcBy:function(t,n){t=Point.read(t),n=Point.read(n);var r=e(this)._point;this.arcBy(r.add(t),r.add(n))},closePath:function(){this.setClosed(!0)}}},new function(){function e(e,t,n){function c(e){e._transformCoordinates(t,s,!1);for(var r=0;r<2;r++){var i=o[r],c=o[r+4],h=s[r+2],p=s[r];function d(e,t){var s=0;if(e==null){var o=1-t;e=o*o*o*i+3*o*o*t*c+3*o*t*t*h+t*t*t*p,s=n?n[r]:0}var f=e-s,l=e+s;f<u[r]&&(u[r]=f),l>a[r]&&(a[r]=l)}d(p,null);var v=3*(c-h)-i+p,m=2*(i+h)-4*c,g=c-i;if(v==0){if(m==0)continue;var y=-g/m;f<y&&y<l&&d(null,y);continue}var b=m*m-4*v*g;if(b<0)continue;var w=Math.sqrt(b),E=-0.5/v,S=(m-w)*E,x=(m+w)*E;f<S&&S<l&&d(null,S),f<x&&x<l&&d(null,x)}var T=o;o=s,s=T}var r=e._segments,i=r[0];if(!i)return null;var s=new Array(6),o=new Array(6);t&&t.isIdentity()&&(t=null),i._transformCoordinates(t,o,!1);var u=o.slice(0,2),a=u.slice(0),f=Numerical.TOLERANCE,l=1-f;for(var h=1,p=r.length;h<p;h++)c(r[h]);return e._closed&&c(i),Rectangle.create(u[0],u[1],a[0]-u[0],a[1]-u[1])}function t(e,t){if(!t)return[e,e];var n=t.createShiftless(),r=n.transform(new Point(e,0)),i=n.transform(new Point(0,e)),s=r.getAngleInRadians(),o=r.getLength(),u=i.getLength(),a=-Math.atan(u*Math.tan(s)),f=+Math.atan(u/Math.tan(s)),l=o*Math.cos(a)*Math.cos(s)-u*Math.sin(a)*Math.sin(s),c=u*Math.sin(f)*Math.cos(s)+o*Math.cos(f)*Math.sin(s);return[Math.abs(l),Math.abs(c)]}return{getBounds:function(){var t=arguments[0]===undefined;if(t&&this._bounds)return this._bounds;var n=this._createBounds(e(this,arguments[0]));return t&&(this._bounds=n),n},getStrokeBounds:function(){function d(e){h=h.include(r?r.transform(e):e)}function v(e,t){var n=e.getPoint(t),r=e.getNormal(t).normalize(s);d(n.add(r)),d(n.subtract(r))}function m(e,t){if(t==="round"||!e._handleIn.isZero()&&!e._handleOut.isZero())h=h.unite(p.setCenter(r?r.transform(e._point):e._point));else if(t=="bevel"){var n=e.getCurve();v(n,0),v(n.getPrevious(),1)}else if(t=="miter"){var i=e.getCurve(),o=i.getPrevious(),u=i.getPoint(0),a=o.getNormal(1).normalize(s),l=i.getNormal(0).normalize(s),c=new Line(u.subtract(a),new Point(-a.y,a.x)),g=new Line(u.subtract(l),new Point(-l.y,l.x)),y=c.intersect(g);!y||u.getDistance(y)>f?m(e,"bevel"):d(y)}}function g(e,t,n){switch(t){case"round":return m(e,t);case"butt":case"square":var r=e.getCurve(),i=r.getPoint(n),o=r.getNormal(n).normalize(s);t==="square"&&(i=i.add(o.y,-o.x)),d(i.add(o)),d(i.subtract(o))}}if(!this._style._strokeColor||!this._style._strokeWidth)return this.getBounds.apply(this,arguments);var n=arguments[0]===undefined;if(n&&this._strokeBounds)return this._strokeBounds;var r=arguments[0],i=this.getStrokeWidth(),s=i/2,o=t(s,r),u=this.getStrokeJoin(),a=this.getStrokeCap(),f=this.getMiterLimit()*i/2,l=this._segments,c=l.length,h=e(this,r,t(s)),p=new Rectangle((new Size(o)).multiply(2));for(var y=1,b=c-(this._closed?0:1);y<b;y++)m(l[y],u);return this._closed?m(l[0],u):(g(l[0],a,0),g(l[c-1],a,1)),n&&(this._strokeBounds=h),h},getHandleBounds:function(){var e=arguments[0],t=e===undefined;if(t&&this._handleBounds)return this._handleBounds;var n=new Array(6),r=arguments[1]/2||0,i=arguments[2]/2||0,s=!this._closed,o=Infinity,u=-o,a=o,f=u;for(var l=0,c=this._segments.length;l<c;l++){var h=this._segments[l];h._transformCoordinates(e,n,!1);for(var p=0;p<6;p+=2){var d=p==0?i:r,v=n[p],m=n[p+1],g=v-d,y=v+d,b=m-d,w=m+d;g<o&&(o=g),y>u&&(u=y),b<a&&(a=b),w>f&&(f=w)}}var E=Rectangle.create(o,a,u-o,f-a);return t&&(this._handleBounds=E),E},getRoughBounds:function(){var e=arguments[0]===undefined;if(e&&this._roughBounds)return this._roughBounds;var t=this.getHandleBounds(arguments[0],this.strokeWidth,this.getStrokeJoin()=="miter"?this.strokeWidth*this.getMiterLimit():this.strokeWidth);return e&&(this._roughBounds=t),t}}});Path.inject({statics:new function(){var e=2/3*(Math.sqrt(2)-1),t=[new Segment([0,.5],[0,e],[0,-e]),new Segment([.5,0],[-e,0],[e,0]),new Segment([1,.5],[0,-e],[0,e]),new Segment([.5,1],[e,0],[-e,0])];return{Line:function(){var e=Math.floor(arguments.length/2);return new Path(Segment.read(arguments,0,e),Segment.read(arguments,e,e))},Rectangle:function(e){e=Rectangle.read(arguments);var t=e.x,n=e.y;return right=t+e.width,bottom=n+e.height,path=new Path,path._add([new Segment(Point.create(t,n)),new Segment(Point.create(t,bottom)),new Segment(Point.create(right,bottom)),new Segment(Point.create(right,n))]),path._closed=!0,path},RoundRectangle:function(t,n){arguments.length==2?(t=Rectangle.read(arguments,0,1),n=Size.read(arguments,1,1)):arguments.length==6&&(t=Rectangle.read(arguments,0,4),n=Size.read(arguments,4,2)),n=Size.min(n,t.getSize(!0).divide(2));var r=new Path,i=n.multiply(e*2),s=t.getBottomLeft(!0),o=t.getTopLeft(!0),u=t.getTopRight(!0),a=t.getBottomRight(!0);return r._add([new Segment(s.add(n.width,0),null,[-i.width,0]),new Segment(s.subtract(0,n.height),[0,i.height],null),new Segment(o.add(0,n.height),null,[0,-i.height]),new Segment(o.add(n.width,0),[-i.width,0],null),new Segment(u.subtract(n.width,0),null,[i.width,0]),new Segment(u.add(0,n.height),[0,-i.height],null),new Segment(a.subtract(0,n.height),null,[0,i.height]),new Segment(a.subtract(n.width,0),[i.width,0],null)]),r._closed=!0,r},Oval:function(e){e=Rectangle.read(arguments);var n=new Path,r=e.getPoint(!0),i=e.getSize(!0),s=new Array(4);for(var o=0;o<4;o++){var u=t[o];s[o]=new Segment(u._point.multiply(i).add(r),u._handleIn.multiply(i),u._handleOut.multiply(i))}return n._add(s),n._closed=!0,n},Circle:function(e,t){return arguments.length==3?(e=Point.read(arguments,0,2),t=arguments[2]):e=Point.read(arguments,0,1),Path.Oval(new Rectangle(e.subtract(t),Size.create(t*2,t*2)))},Arc:function(e,t,n){var r=new Path;return r.moveTo(e),r.arcTo(t,n),r},RegularPolygon:function(e,t,n){e=Point.read(arguments,0,1);var r=new Path,i=360/t,s=!(t%3),o=new Point(0,s?-n:n),u=s?-1:.5,a=new Array(t);for(var f=0;f<t;f++)a[f]=new Segment(e.add(o.rotate((f+u)*i)));return r._add(a),r._closed=!0,r},Star:function(e,t,n,r){e=Point.read(arguments,0,1),t*=2;var i=new Path,s=360/t,o=new Point(0,-1),u=new Array(t);for(var a=0;a<t;a++)u[a]=new Segment(e.add(o.rotate(s*a).multiply(a%2?r:n)));return i._add(u),i._closed=!0,i}}}});var CompoundPath=this.CompoundPath=PathItem.extend({initialize:function(e){this.base(),this._children=[],this._namedChildren={};var t=!e||!Array.isArray(e)||typeof e[0]!="object"?arguments:e;this.addChildren(t)},insertChild:function(e,t){this.base(e,t),t._clockwise===undefined&&t.setClockwise(t._index==0)},simplify:function(){if(this._children.length==1){var e=this._children[0];return e.insertAbove(this),this.remove(),e}return this},smooth:function(){for(var e=0,t=this._children.length;e<t;e++)this._children[e].smooth()},draw:function(e,t){var n=this._children.length;if(n==0)return;var r=this._children[0];e.beginPath(),t.compound=!0;for(var i=0;i<n;i++)Item.draw(this._children[i],e,t);r._setStyles(e);var s=r.getFillColor(),o=r.getStrokeColor();s&&(e.fillStyle=s.getCanvasStyle(e),e.fill()),o&&(e.strokeStyle=o.getCanvasStyle(e),e.stroke()),t.compound=!1}},new function(){function e(e){if(!e._children.length)throw new Error("Use a moveTo() command first");return e._children[e._children.length-1]}var t={moveTo:function(e){var t=new Path;this.addChild(t),t.moveTo.apply(t,arguments)},moveBy:function(t){this.moveTo(e(this).getLastSegment()._point.add(Point.read(arguments)))},closePath:function(){e(this).setClosed(!0)}};return Base.each(["lineTo","cubicCurveTo","quadraticCurveTo","curveTo","arcTo","lineBy","curveBy","arcBy"],function(n){t[n]=function(){var t=e(this);t[n].apply(t,arguments)}}),t}),PathFlattener=Base.extend({initialize:function(e){function s(e,t){var n=Curve.getValues(e,t);i.curves.push(n),i._computeParts(n,e._index,0,1)}this.curves=[],this.parts=[],this.length=0,this.index=0;var t=e._segments,n=t[0],r,i=this;for(var o=1,u=t.length;o<u;o++)r=t[o],s(n,r),n=r;e._closed&&s(r,t[0])},_computeParts:function(e,t,n,r){if(r-n>1/32&&!Curve.isFlatEnough(e)){var i=Curve.subdivide(e),s=(n+r)/2;this._computeParts(i[0],t,n,s),this._computeParts(i[1],t,s,r)}else{var o=e[6]-e[0],u=e[7]-e[1],a=Math.sqrt(o*o+u*u);a>Numerical.TOLERANCE&&(this.length+=a,this.parts.push({offset:this.length,value:r,index:t}))}},getParameterAt:function(e){var t,n=this.index;for(;;){t=n;if(n==0||this.parts[--n].offset<e)break}for(var r=this.parts.length;t<r;t++){var i=this.parts[t];if(i.offset>=e){this.index=t;var s=this.parts[t-1],o=s&&s.index==i.index?s.value:0,u=s?s.offset:0;return{value:o+(i.value-o)*(e-u)/(i.offset-u),index:i.index}}}var i=this.parts[this.parts.length-1];return{value:1,index:i.index}},evaluate:function(e,t){var n=this.getParameterAt(e);return Curve.evaluate(this.curves[n.index],n.value,t)},drawPart:function(e,t,n){t=this.getParameterAt(t),n=this.getParameterAt(n);for(var r=t.index;r<=n.index;r++){var i=Curve.getPart(this.curves[r],r==t.index?t.value:0,r==n.index?n.value:1);r==t.index&&e.moveTo(i[0],i[1]),e.bezierCurveTo.apply(e,i.slice(2))}}}),PathFitter=Base.extend({initialize:function(e,t){this.points=[];var n=e._segments,r;for(var i=0,s=n.length;i<s;i++){var o=n[i].point.clone();if(!r||!r.equals(o))this.points.push(o),r=o}this.error=t},fit:function(){return this.segments=[new Segment(this.points[0])],this.fitCubic(0,this.points.length-1,this.points[1].subtract(this.points[0]).normalize(),this.points[this.points.length-2].subtract(this.points[this.points.length-1]).normalize()),this.segments},fitCubic:function(e,t,n,r){if(t-e==1){var i=this.points[e],s=this.points[t],o=i.getDistance(s)/3;this.addCurve([i,i.add(n.normalize(o)),s.add(r.normalize(o)),s]);return}var u=this.chordLengthParameterize(e,t),a=Math.max(this.error,this.error*this.error),f,l;for(var c=0;c<=4;c++){var h=this.generateBezier(e,t,u,n,r),p=this.findMaxError(e,t,h,u);if(p.error<this.error){this.addCurve(h);return}l=p.index;if(p.error>=a)break;this.reparameterize(e,t,u,h),a=p.error}var d=this.points[l-1].subtract(this.points[l]),v=this.points[l].subtract(this.points[l+1]),m=d.add(v).divide(2).normalize();this.fitCubic(e,l,n,m),this.fitCubic(l,t,m.negate(),r)},addCurve:function(e){var t=this.segments[this.segments.length-1];t.setHandleOut(e[1].subtract(e[0])),this.segments.push(new Segment(e[3],e[2].subtract(e[3])))},generateBezier:function(e,t,n,r,i){var s=Numerical.EPSILON,o=this.points[e],u=this.points[t],a=[[0,0],[0,0]],f=[0,0];for(var l=0,c=t-e+1;l<c;l++){var h=n[l],p=1-h,d=3*h*p,v=p*p*p,m=d*p,g=d*h,y=h*h*h,b=r.normalize(m),w=i.normalize(g),E=this.points[e+l].subtract(o.multiply(v+m)).subtract(u.multiply(g+y));a[0][0]+=b.dot(b),a[0][1]+=b.dot(w),a[1][0]=a[0][1],a[1][1]+=w.dot(w),f[0]+=b.dot(E),f[1]+=w.dot(E)}var S=a[0][0]*a[1][1]-a[1][0]*a[0][1],x,T;if(Math.abs(S)>s){var N=a[0][0]*f[1]-a[1][0]*f[0],C=f[0]*a[1][1]-f[1]*a[0][1];x=C/S,T=N/S}else{var k=a[0][0]+a[0][1],L=a[1][0]+a[1][1];Math.abs(k)>s?x=T=f[0]/k:Math.abs(k)>s?x=T=f[1]/L:x=T=0}var A=u.getDistance(o);s*=A;if(x<s||T<s)x=T=A/3;return[o,o.add(r.normalize(x)),u.add(i.normalize(T)),u]},reparameterize:function(e,t,n,r){for(var i=e;i<=t;i++)n[i-e]=this.findRoot(r,this.points[i],n[i-e])},findRoot:function(e,t,n){var r=[],i=[];for(var s=0;s<=2;s++)r[s]=e[s+1].subtract(e[s]).multiply(3);for(var s=0;s<=1;s++)i[s]=r[s+1].subtract(r[s]).multiply(2);var o=this.evaluate(3,e,n),u=this.evaluate(2,r,n),a=this.evaluate(1,i,n),f=o.subtract(t),l=u.dot(u)+f.dot(a);return Math.abs(l)<Numerical.TOLERANCE?n:n-f.dot(u)/l},evaluate:function(e,t,n){var r=t.slice();for(var i=1;i<=e;i++)for(var s=0;s<=e-i;s++)r[s]=r[s].multiply(1-n).add(r[s+1].multiply(n));return r[0]},chordLengthParameterize:function(e,t){var n=[0];for(var r=e+1;r<=t;r++)n[r-e]=n[r-e-1]+this.points[r].getDistance(this.points[r-1]);for(var r=1,i=t-e;r<=i;r++)n[r]/=n[i];return n},findMaxError:function(e,t,n,r){var i=Math.floor((t-e+1)/2),s=0;for(var o=e+1;o<t;o++){var u=this.evaluate(3,n,r[o-e]),a=u.subtract(this.points[o]),f=a.x*a.x+a.y*a.y;f>=s&&(s=f,i=o)}return{error:s,index:i}}}),TextItem=this.TextItem=Item.extend({initialize:function(){this.base(),this._content="",this._characterStyle=CharacterStyle.create(this),this.setCharacterStyle(this._project.getCurrentStyle()),this._paragraphStyle=ParagraphStyle.create(this),this.setParagraphStyle()},_clone:function(e){return e._content=this._content,e.setCharacterStyle(this._characterStyle),e.setParagraphStyle(this._paragraphStyle),this.base(e)},getContent:function(){return this._content},setContent:function(e){this._changed(Change.CONTENT),this._content=""+e},getCharacterStyle:function(){return this._characterStyle},setCharacterStyle:function(e){this._characterStyle.initialize(e)},getParagraphStyle:function(){return this._paragraphStyle},setParagraphStyle:function(e){this._paragraphStyle.initialize(e)}}),PointText=this.PointText=TextItem.extend({initialize:function(e){this.base(),this._point=Point.read(arguments).clone(),this._matrix=(new Matrix).translate(this._point)},clone:function(){var e=this._clone(new PointText(this._point));return e._matrix.initialize(this._matrix),e},getPoint:function(){return LinkedPoint.create(this,"setPoint",this._point.x,this._point.y)},setPoint:function(e){this.translate(Point.read(arguments).subtract(this._point))},getPosition:function(){return this.getPoint()},setPosition:function(e){this.setPoint.apply(this,arguments)},_transform:function(e,t){this._matrix.preConcatenate(e),e._transformPoint(this._point,this._point)},getWidth:function(){if(!this._content)return 0;var e=document.createElement("canvas");return ctx=e.getContext("2d"),ctx.save(),ctx.font=this.getFontSize()+"pt "+this.getFont(),textDimensions=ctx.measureText(this.content),ctx.restore(),textDimensions.width},draw:function(e){if(!this._content)return;e.save(),e.font=this.getFontSize()+"pt "+this.getFont(),e.textAlign=this.getJustification(),this._matrix.applyToContext(e);var t=this.getFillColor(),n=this.getStrokeColor();if(!t||!n)e.globalAlpha=this._opacity;t&&(e.fillStyle=t.getCanvasStyle(e),e.fillText(this._content,0,0)),n&&(e.strokeStyle=n.getCanvasStyle(e),e.strokeText(this._content,0,0)),e.restore()}},new function(){var e=null;return{_getBounds:function(t,n,r){var i=r[0];e||(e=CanvasProvider.getCanvas(Size.create(1,1)).getContext("2d"));var s=this.getJustification(),o=0;e.font=this.characterStyle.fontSize+"px "+this.characterStyle.font;var u=e.measureText(this.content).width;s!=="left"&&(o-=u/(s==="center"?2:1));var a=this.characterStyle.fontSize*1.2,f=1,l=Rectangle.create(o,f?a/4+(f-1)*a:0,u,-f*a);i=i?i.clone().concatenate(this._matrix):this._matrix;var c=i._transformBounds(l,l);return c.x=c.x-c.width*.4,c.width=c.width*1.8,c.y=c.y-c.height*.4,c.height=c.height*1.8,c}}}),Style=Item.extend({initialize:function(e){var t=e instanceof Style;return Base.each(this._defaults,function(n,r){n=e&&e[r]||n,this[r]=n&&t&&n.clone?n.clone():n},this)},statics:{create:function(e){var t=new this(this.dont);return t._item=e,t},extend:function(e){var t=e._style,n=e._flags||{};return e._owner.inject(Base.each(e._defaults,function(r,i){var s=!!i.match(/Color$/),o=Base.capitalize(i),u="set"+o,a="get"+o;e[u]=function(e){var r=this._item&&this._item._children;e=s?Color.read(arguments):e;if(r)for(var o=0,a=r.length;o<a;o++)r[o][t][u](e);else{var f=this["_"+i];f!=e&&!(f&&f.equals&&f.equals(e))&&(this["_"+i]=e,s&&(f&&f._removeOwner(this._item),e&&e._addOwner(this._item)),this._item&&this._item._changed(n[i]||Change.STYLE))}return this},e[a]=function(){var e=this._item&&this._item._children,n;if(!e)return this["_"+i];for(var r=0,s=e.length;r<s;r++){var o=e[r][t][a]();if(!n)n=o;else if(n!=o&&!(n&&n.equals&&n.equals(o)))return undefined}return n},this[u]=function(e){return this[t][u](e),this},this[a]=function(){return this[t][a]()}},{})),this.base(e)}}}),PathStyle=this.PathStyle=Style.extend({_defaults:{fillColor:undefined,strokeColor:undefined,strokeWidth:1,strokeCap:"butt",strokeJoin:"miter",miterLimit:10,dashOffset:0,dashArray:[]},_flags:{strokeWidth:Change.STROKE,strokeCap:Change.STROKE,strokeJoin:Change.STROKE,miterLimit:Change.STROKE},_owner:Item,_style:"_style"}),ParagraphStyle=this.ParagraphStyle=Style.extend({_defaults:{justification:"left"},_owner:TextItem,_style:"_paragraphStyle"}),CharacterStyle=this.CharacterStyle=PathStyle.extend({_defaults:Base.merge(PathStyle.prototype._defaults,{fillColor:"black",fontSize:10,font:"sans-serif"}),_owner:TextItem,_style:"_characterStyle"}),Color=this.Color=Base.extend(new function(){function r(e){var r=t[e];if(r)return r.clone();if(!n){var i=CanvasProvider.getCanvas(Size.create(1,1));n=i.getContext("2d"),n.globalCompositeOperation="copy"}n.fillStyle="rgba(0,0,0,0)",n.fillStyle=e,n.fillRect(0,0,1,1);var s=n.getImageData(0,0,1,1).data,o=[s[0]/255,s[1]/255,s[2]/255];return(t[e]=RgbColor.read(o)).clone()}function i(e){var t=e.match(/^#?(\w{1,2})(\w{1,2})(\w{1,2})$/);if(t.length>=4){var n=new Array(3);for(var r=0;r<3;r++){var i=t[r+1];n[r]=parseInt(i.length==1?i+i:i,16)/255}return RgbColor.read(n)}}var e={gray:["gray"],rgb:["red","green","blue"],hsb:["hue","saturation","brightness"],hsl:["hue","saturation","lightness"]},t={},n,s=[[0,3,1],[2,0,1],[1,0,3],[1,2,0],[3,1,0],[0,1,2]],o={"rgb-hsb":function(e){var t=e._red,n=e._green,r=e._blue,i=Math.max(t,n,r),s=Math.min(t,n,r),o=i-s,u=o==0?0:(i==t?(n-r)/o+(n<r?6:0):i==n?(r-t)/o+2:(t-n)/o+4)*60,a=i==0?0:o/i,f=i;return new HsbColor(u,a,f,e._alpha)},"hsb-rgb":function(e){var t=e._hue/60%6,n=e._saturation,r=e._brightness,i=Math.floor(t),o=t-i,i=s[i],u=[r,r*(1-n),r*(1-n*o),r*(1-n*(1-o))];return new RgbColor(u[i[0]],u[i[1]],u[i[2]],e._alpha)},"rgb-hsl":function(e){var t=e._red,n=e._green,r=e._blue,i=Math.max(t,n,r),s=Math.min(t,n,r),o=i-s,u=o==0,a=u?0:(i==t?(n-r)/o+(n<r?6:0):i==n?(r-t)/o+2:(t-n)/o+4)*60,f=(i+s)/2,l=u?0:f<.5?o/(i+s):o/(2-i-s);return new HslColor(a,l,f,e._alpha)},"hsl-rgb":function(e){var t=e._saturation,n=e._hue/360,r=e._lightness,i,s,o;if(t==0)return new RgbColor(r,r,r,e._alpha);var u=[n+1/3,n,n-1/3],s=r<.5?r*(1+t):r+t-r*t,i=2*r-s,o=[];for(var a=0;a<3;a++){var f=u[a];f<0&&(f+=1),f>1&&(f-=1),o[a]=6*f<1?i+(s-i)*6*f:2*f<1?s:3*f<2?i+(s-i)*(2/3-f)*6:i}return new RgbColor(o[0],o[1],o[2],e._alpha)},"rgb-gray":function(e){return new GrayColor(1-(e._red*.2989+e._green*.587+e._blue*.114),e._alpha)},"gray-rgb":function(e){var t=1-e._gray;return new RgbColor(t,t,t,e._alpha)},"gray-hsb":function(e){return new HsbColor(0,0,1-e._gray,e._alpha)},"gray-hsl":function(e){return new HslColor(0,0,1-e._gray,e._alpha)}},u={_readNull:!0,initialize:function(e){var t=Array.isArray(e),n=this._colorType;if(typeof e=="object"&&!t)return n?Color.read(arguments).convert(n):e.red!==undefined?new RgbColor(e.red,e.green,e.blue,e.alpha):e.gray!==undefined?new GrayColor(e.gray,e.alpha):e.lightness!==undefined?new HslColor(e.hue,e.saturation,e.lightness,e.alpha):e.hue!==undefined?new HsbColor(e.hue,e.saturation,e.brightness,e.alpha):new RgbColor;if(typeof e=="string"){var s=e.match(/^#[0-9a-f]{3,6}$/i)?i(e):r(e);return n?s.convert(n):s}var o=t?e:Array.prototype.slice.call(arguments);if(!n)return o.length>=3?new RgbColor(o):new GrayColor(o);Base.each(this._components,function(e,t){var n=o[t];this["_"+e]=n!==undefined?n:null},this)},clone:function(){var e=this.constructor,t=new e(e.dont),n=this._components;for(var r=0,i=n.length;r<i;r++){var s="_"+n[r];t[s]=this[s]}return t},convert:function(e){var t;return this._colorType==e?this.clone():(t=o[this._colorType+"-"+e])?t(this):o["rgb-"+e](o[this._colorType+"-rgb"](this))},statics:{extend:function(t){t.beans=!0;if(t._colorType){var n=e[t._colorType];t._components=n.concat(["alpha"]),Base.each(n,function(e){var t=e==="hue",n=Base.capitalize(e),e="_"+e;this["get"+n]=function(){return this[e]},this["set"+n]=function(n){return this[e]=t?(n%360+360)%360:Math.min(Math.max(n,0),1),this._changed(),this}},t)}return this.base(t)}}};return Base.each(e,function(e,t){Base.each(e,function(e){var n=Base.capitalize(e);u["get"+n]=function(){return this.convert(t)[e]},u["set"+n]=function(n){var r=this.convert(t);r[e]=n,r=r.convert(this._colorType);for(var i=0,s=this._components.length;i<s;i++){var o=this._components[i];this[o]=r[o]}}})}),u},{_changed:function(){this._cssString=null;for(var e=0,t=this._owners&&this._owners.length;e<t;e++)this._owners[e]._changed(Change.STYLE)},_addOwner:function(e){this._owners||(this._owners=[]),this._owners.push(e)},_removeOwner:function(e){var t=this._owners?this._owners.indexOf(e):-1;t!=-1&&(this._owners.splice(t,1),this._owners.length==0&&delete this._owners)},getType:function(){return this._colorType},getComponents:function(){var e=this._components.length,t=new Array(e);for(var n=0;n<e;n++)t[n]=this["_"+this._components[n]];return t},getAlpha:function(){return this._alpha!=null?this._alpha:1},setAlpha:function(e){return this._alpha=e==null?null:Math.min(Math.max(e,0),1),this._changed(),this},hasAlpha:function(){return this._alpha!=null},equals:function(e){if(e&&e._colorType===this._colorType){for(var t=0,n=this._components.length;t<n;t++){var r="_"+this._components[t];if(this[r]!==e[r])return!1}return!0}return!1},toString:function(){var e=[],t=Base.formatNumber;for(var n=0,r=this._components.length;n<r;n++){var i=this._components[n],s=this["_"+i];i==="alpha"&&s==null&&(s=1),e.push(i+": "+t(s))}return"{ "+e.join(", ")+" }"},toCssString:function(){if(!this._cssString){var e=this.convert("rgb"),t=e.getAlpha(),n=[Math.round(e._red*255),Math.round(e._green*255),Math.round(e._blue*255),t!=null?t:1];this._cssString="rgba("+n.join(", ")+")"}return this._cssString},getCanvasStyle:function(){return this.toCssString()}}),GrayColor=this.GrayColor=Color.extend({_colorType:"gray"}),RgbColor=this.RgbColor=this.RGBColor=Color.extend({_colorType:"rgb"}),HsbColor=this.HsbColor=this.HSBColor=Color.extend({_colorType:"hsb"}),HslColor=this.HslColor=this.HSLColor=Color.extend({_colorType:"hsl"}),GradientColor=this.GradientColor=Color.extend({initialize:function(e,t,n,r){this.gradient=e||new Gradient,this.setOrigin(t),this.setDestination(n),r&&this.setHilite(r)},clone:function(){return new GradientColor(this.gradient,this._origin,this._destination,this._hilite)},getOrigin:function(){return this._origin},setOrigin:function(e){return e=Point.read(arguments).clone(),this._origin=e,this._destination&&(this._radius=this._destination.getDistance(this._origin)),this._changed(),this},getDestination:function(){return this._destination},setDestination:function(e){return e=Point.read(arguments).clone(),this._destination=e,this._radius=this._destination.getDistance(this._origin),this._changed(),this},getHilite:function(){return this._hilite},setHilite:function(e){e=Point.read(arguments).clone();var t=e.subtract(this._origin);return t.getLength()>this._radius?this._hilite=this._origin.add(t.normalize(this._radius-.1)):this._hilite=e,this._changed(),this},getCanvasStyle:function(e){var t;if(this.gradient.type==="linear")t=e.createLinearGradient(this._origin.x,this._origin.y,this._destination.x,this._destination.y);else{var n=this._hilite||this._origin;t=e.createRadialGradient(n.x,n.y,0,this._origin.x,this._origin.y,this._radius)}for(var r=0,i=this.gradient._stops.length;r<i;r++){var s=this.gradient._stops[r];t.addColorStop(s._rampPoint,s._color.toCssString())}return t},equals:function(e){return e==this||e&&e._colorType===this._colorType&&this.gradient.equals(e.gradient)&&this._origin.equals(e._origin)&&this._destination.equals(e._destination)},transform:function(e){e._transformPoint(this._origin,this._origin,!0),e._transformPoint(this._destination,this._destination,!0),this._hilite&&e._transformPoint(this._hilite,this._hilite,!0),this._radius=this._destination.getDistance(this._origin)}}),Gradient=this.Gradient=Base.extend({initialize:function(e,t){this.setStops(e||["white","black"]),this.type=t||"linear"},clone:function(){var e=[];for(var t=0,n=this._stops.length;t<n;t++)e[t]=this._stops[t].clone();return new Gradient(e,this.type)},getStops:function(){return this._stops},setStops:function(e){if(e.length<2)throw new Error("Gradient stop list needs to contain at least two stops.");this._stops=GradientStop.readAll(e);for(var t=0,n=this._stops.length;t<n;t++){var r=this._stops[t];r._defaultRamp&&r.setRampPoint(t/(n-1))}},equals:function(e){if(e.type!=this.type)return!1;if(this._stops.length==e._stops.length){for(var t=0,n=this._stops.length;t<n;t++)if(!this._stops[t].equals(e._stops[t]))return!1;return!0}return!1}}),GradientStop=this.GradientStop=Base.extend({initialize:function(e,t){t===undefined&&Array.isArray(e)?(this.setColor(e[0]),this.setRampPoint(e[1])):e.color?(this.setColor(e.color),this.setRampPoint(e.rampPoint)):(this.setColor(e),this.setRampPoint(t))},clone:function(){return new GradientStop(this._color.clone(),this._rampPoint)},getRampPoint:function(){return this._rampPoint},setRampPoint:function(e){this._defaultRamp=e==null,this._rampPoint=e||0},getColor:function(){return this._color},setColor:function(e){this._color=Color.read(arguments)},equals:function(e){return e==this||e instanceof GradientStop&&this._color.equals(e._color)&&this._rampPoint==e._rampPoint}}),DomElement={getBounds:function(e,t){var n=e.getBoundingClientRect(),r=e.ownerDocument,i=r.body,s=r.documentElement,o=n.left-(s.clientLeft||i.clientLeft||0),u=n.top-(s.clientTop||i.clientTop||0);if(!t){var a=DomElement.getViewport
(r);o+=a.pageXOffset||s.scrollLeft||i.scrollLeft,u+=a.pageYOffset||s.scrollTop||i.scrollTop}return new Rectangle(o,u,n.width,n.height)},getOffset:function(e,t){return this.getBounds(e,t).getPoint()},getSize:function(e){return this.getBounds(e,!0).getSize()},isInvisible:function(e){return this.getSize(e).equals([0,0])},isVisible:function(e){return!this.isInvisible(e)&&this.getViewportBounds(e).intersects(this.getBounds(e,!0))},getViewport:function(e){return e.defaultView||e.parentWindow},getViewportBounds:function(e){var t=e.ownerDocument,n=this.getViewport(t),r=t.getElementsByTagName(t.compatMode==="CSS1Compat"?"html":"body")[0];return Rectangle.create(0,0,n.innerWidth||r.clientWidth,n.innerHeight||r.clientHeight)},getComputedStyle:function(e,t){if(e.currentStyle)return e.currentStyle[Base.camelize(t)];var n=this.getViewport(e.ownerDocument).getComputedStyle(e,null);return n?n.getPropertyValue(Base.hyphenate(t)):null}},DomEvent={add:function(e,t){for(var n in t){var r=t[n];e.addEventListener?e.addEventListener(n,r,!1):e.attachEvent&&e.attachEvent("on"+n,r.bound=function(){r.call(e,window.event)})}},remove:function(e,t){for(var n in t){var r=t[n];e.removeEventListener?e.removeEventListener(n,r,!1):e.detachEvent&&e.detachEvent("on"+n,r.bound)}},getPoint:function(e){var t=e.targetTouches?e.targetTouches.length?e.targetTouches[0]:e.changedTouches[0]:e;return Point.create(t.pageX||t.clientX+document.documentElement.scrollLeft,t.pageY||t.clientY+document.documentElement.scrollTop)},getTarget:function(e){return e.target||e.srcElement},getOffset:function(e,t){return DomEvent.getPoint(e).subtract(DomElement.getOffset(t||DomEvent.getTarget(e)))},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},stop:function(e){DomEvent.stopPropagation(e),DomEvent.preventDefault(e)}};DomEvent.requestAnimationFrame=new function(){var e="equestAnimationFrame",t=window["r"+e]||window["webkitR"+e]||window["mozR"+e]||window["oR"+e]||window["msR"+e];t&&t(function(e){e==undefined&&(t=null)});var n=[],r=!0,i;return DomEvent.add(window,{focus:function(){r=!0},blur:function(){r=!1}}),function(e,s){if(t)return t(e,s);n.push([e,s]);if(i)return;i=window.setInterval(function(){for(var e=n.length-1;e>=0;e--){var t=n[e],i=t[0],s=t[1];if(!s||(PaperScript.getAttribute(s,"keepalive")=="true"||r)&&DomElement.isVisible(s))n.splice(e,1),i(Date.now())}},1e3/60)}};var View=this.View=PaperScopeItem.extend({_list:"views",_reference:"view",initialize:function(e){this.base();var t;typeof e=="string"&&(e=document.getElementById(e));if(e instanceof HTMLCanvasElement){this._canvas=e;if(PaperScript.hasAttribute(e,"resize")){var n=DomElement.getOffset(e,!0),r=this;t=DomElement.getViewportBounds(e).getSize().subtract(n),e.width=t.width,e.height=t.height,DomEvent.add(window,{resize:function(t){DomElement.isInvisible(e)||(n=DomElement.getOffset(e,!0)),r.setViewSize(DomElement.getViewportBounds(e).getSize().subtract(n))}})}else t=DomElement.isInvisible(e)?Size.create(parseInt(e.getAttribute("width")),parseInt(e.getAttribute("height"))):DomElement.getSize(e);if(PaperScript.hasAttribute(e,"stats")){this._stats=new Stats;var i=this._stats.domElement,s=i.style,n=DomElement.getOffset(e);s.position="absolute",s.left=n.x+"px",s.top=n.y+"px",document.body.appendChild(i)}}else t=Size.read(arguments,1),t.isZero()&&(t=new Size(1024,768)),this._canvas=CanvasProvider.getCanvas(t);this._id=this._canvas.getAttribute("id"),this._id==null&&this._canvas.setAttribute("id",this._id="canvas-"+View._id++),View._views[this._id]=this,this._viewSize=LinkedSize.create(this,"setViewSize",t.width,t.height),this._context=this._canvas.getContext("2d"),this._matrix=new Matrix,this._zoom=1,this._events=this._createEvents(),DomEvent.add(this._canvas,this._events),View._focused||(View._focused=this),this._scope._redrawNotified=!1},remove:function(){return this.base()?(View._focused==this&&(View._focused=null),delete View._views[this._id],DomEvent.remove(this._canvas,this._events),this._canvas=this._events=this._onFrame=null,!0):!1},_redraw:function(){this._redrawNeeded=!0,this._onFrameCallback?this._onFrameCallback(0,!0):this.draw()},_transform:function(e,t){this._matrix.preConcatenate(e),this._bounds=null,this._inverse=null,this._redraw()},getCanvas:function(){return this._canvas},getViewSize:function(){return this._viewSize},setViewSize:function(e){e=Size.read(arguments);var t=e.subtract(this._viewSize);if(t.isZero())return;this._canvas.width=e.width,this._canvas.height=e.height,this._viewSize.set(e.width,e.height,!0),this._bounds=null,this._redrawNeeded=!0,this.onResize&&this.onResize({size:e,delta:t}),this._redraw()},getBounds:function(){return this._bounds||(this._bounds=this._getInverse()._transformBounds(new Rectangle(new Point,this._viewSize))),this._bounds},getSize:function(){return this.getBounds().getSize()},getCenter:function(){return this.getBounds().getCenter()},setCenter:function(e){this.scrollBy(Point.read(arguments).subtract(this.getCenter()))},getZoom:function(){return this._zoom},setZoom:function(e){this._transform((new Matrix).scale(e/this._zoom,this.getCenter())),this._zoom=e},isVisible:function(){return DomElement.isVisible(this._canvas)},scrollBy:function(e){this._transform((new Matrix).translate(Point.read(arguments).negate()))},draw:function(e){if(e&&!this._redrawNeeded)return!1;this._stats&&this._stats.update();var t=this._context,n=this._viewSize;return t.clearRect(0,0,n._width+1,n._height+1),t.save(),this._matrix.applyToContext(t),this._scope.project.draw(t),t.restore(),this._redrawNeeded&&(this._redrawNeeded=!1,this._scope._redrawNotified=!1),!0},projectToView:function(e){return this._matrix._transformPoint(Point.read(arguments))},viewToProject:function(e){return this._getInverse()._transformPoint(Point.read(arguments))},_getInverse:function(){return this._inverse||(this._inverse=this._matrix.createInverse()),this._inverse},getOnFrame:function(){return this._onFrame},setOnFrame:function(e){this._onFrame=e;if(!e){delete this._onFrameCallback;return}var t=this,n=!1,r,i=0,s=0;this._onFrameCallback=function(e,o){n=!1;if(!t._onFrame)return;paper=t._scope,n=!0,o||DomEvent.requestAnimationFrame(t._onFrameCallback,t._canvas);var u=Date.now()/1e3,a=r?u-r:0;t._onFrame(Base.merge({delta:a,time:i+=a,count:s++})),r=u,t.draw(!0),paper.defaultProject&&paper.defaultProject.activate()},n||this._onFrameCallback()},onResize:null},{statics:{_views:{},_id:0}},new function(){function s(e,t){return e.viewToProject(DomEvent.getOffset(t,e._canvas))}function o(){(!View._focused||!View._focused.isVisible())&&PaperScope.each(function(e){for(var t=0,n=e.views.length;t<n;t++){var i=e.views[t];i.isVisible()&&(View._focused=r=i)}})}function u(t){var u;i||(u=View._views[DomEvent.getTarget(t).getAttribute("id")],u?View._focused=r=u:r&&r==View._focused&&(View._focused=null,o()));if(!(u=u||View._focused)||!(e=u._scope.tool))return;var a=t&&s(u,t),f=!e.onMouseDrag&&!!e.onMouseMove;i&&!f?(n=a||n,n&&e.onHandleEvent("mousedrag",n,t)&&(u.draw(!0),DomEvent.stop(t))):(!i||f)&&e.onHandleEvent("mousemove",a,t)&&(u.draw(!0),DomEvent.stop(t))}function a(r){var o=View._focused;if(!o||!i)return;i=!1,n=null,e&&(t!=null&&(t=clearInterval(t)),e.onHandleEvent("mouseup",s(o,r),r)&&(o.draw(!0),DomEvent.stop(r)))}function f(e){i&&DomEvent.stop(e)}var e,t,n,r,i=!1;return DomEvent.add(document,{mousemove:u,mouseup:a,touchmove:u,touchend:a,selectstart:f,scroll:o}),DomEvent.add(window,{load:o}),{_createEvents:function(){function o(o){View._focused=r;if(!(e=r._scope.tool))return;n=s(r,o),e.onHandleEvent("mousedown",n,o)&&r.draw(!0),e.eventInterval!=null&&(t=setInterval(u,e.eventInterval)),i=!0}var r=this;return{mousedown:o,touchstart:o,selectstart:f}},statics:{updateFocus:o}}}),Event=this.Event=Base.extend({initialize:function(e){this.event=e},preventDefault:function(){DomEvent.preventDefault(this.event)},stopPropagation:function(){DomEvent.stopPropagation(this.event)},stop:function(){DomEvent.stop(this.event)},getModifiers:function(){return Key.modifiers}}),KeyEvent=this.KeyEvent=Event.extend(new function(){return{initialize:function(e,t,n,r){this.base(r),this.type=e?"keydown":"keyup",this.key=t,this.character=n},toString:function(){return"{ type: "+this.type+", key: "+this.key+", character: "+this.character+", modifiers: "+this.getModifiers()+" }"}}}),Key=this.Key=new function(){function s(t,n,i,s){var o=String.fromCharCode(i),u=e[n]||o.toLowerCase(),a=t?"onKeyDown":"onKeyUp",f=View._focused,l=f&&f.isVisible()&&f._scope,c=l&&l.tool;r[u]=t;if(c&&c[a]){var h=new KeyEvent(t,u,o,s);c[a](h)===!1&&h.preventDefault(),f&&f.draw(!0)}}var e={8:"backspace",13:"enter",16:"shift",17:"control",18:"option",19:"pause",20:"caps-lock",27:"escape",32:"space",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",46:"delete",91:"command",93:"command",224:"command"},t=Base.merge({shift:!1,control:!1,option:!1,command:!1,capsLock:!1}),n={},r={},i;return DomEvent.add(document,{keydown:function(r){var o=r.which||r.keyCode,u=e[o],a;u?((a=Base.camelize(u))in t&&(t[a]=!0),n[o]=0,s(!0,o,null,r)):i=o},keypress:function(e){if(i!=null){var t=e.which||e.keyCode;n[i]=t,s(!0,i,t,e),i=null}},keyup:function(r){var i=r.which||r.keyCode,o=e[i],u;o&&(u=Base.camelize(o))in t&&(t[u]=!1),n[i]!=null&&(s(!1,i,n[i],r),delete n[i])}}),{modifiers:t,isDown:function(e){return!!r[e]}}},ToolEvent=this.ToolEvent=Event.extend({initialize:function(e,t,n,r){this.tool=e,this.type=t,this.event=n,this.hitTestOptions=r},_choosePoint:function(e,t){return e?e:t?t.clone():null},getPoint:function(){return this._choosePoint(this._point,this.tool._point)},setPoint:function(e){this._point=e},getLastPoint:function(){return this._choosePoint(this._lastPoint,this.tool._lastPoint)},setLastPoint:function(e){this._lastPoint=e},getDownPoint:function(){return this._choosePoint(this._downPoint,this.tool._downPoint)},setDownPoint:function(e){this._downPoint=e},getMiddlePoint:function(){return!this._middlePoint&&this.tool._lastPoint?this.tool._point.add(this.tool._lastPoint).divide(2):this.middlePoint},setMiddlePoint:function(e){this._middlePoint=e},getDelta:function(){return!this._delta&&this.tool._lastPoint?this.tool._point.subtract(this.tool._lastPoint):this._delta},setDelta:function(e){this._delta=e},getCount:function(){return/^mouse(down|up)$/.test(this.type)?this.tool._downCount:this.tool._count},setCount:function(e){this.tool[/^mouse(down|up)$/.test(this.type)?"downCount":"count"]=e},getItem:function(){if(!this._item){var e=this.tool._scope.project.hitTest(this.getPoint(),this.hitTestOptions);if(e){var t=e.item,n=t._parent;while(n instanceof Group&&!(n instanceof Layer)||n instanceof CompoundPath)t=n,n=n._parent;this._item=t}}return this._item},setItem:function(e){this._item=e},toString:function(){return"{ type: "+this.type+", point: "+this.getPoint()+", count: "+this.getCount()+", modifiers: "+this.getModifiers()+" }"}}),Tool=this.Tool=PaperScopeItem.extend({_list:"tools",_reference:"tool",initialize:function(){this.view=View._focused,this.base(),this._firstMove=!0,this._count=0,this._downCount=0},setHitTestOptions:function(e){this.hitTestOptions=e},eventInterval:null,getMinDistance:function(){return this._minDistance},setMinDistance:function(e){this._minDistance=e,this._minDistance!=null&&this._maxDistance!=null&&this._minDistance>this._maxDistance&&(this._maxDistance=this._minDistance)},getMaxDistance:function(){return this._maxDistance},setMaxDistance:function(e){this._maxDistance=e,this._minDistance!=null&&this._maxDistance!=null&&this._maxDistance<this._minDistance&&(this._minDistance=e)},getFixedDistance:function(){return this._minDistance==this._maxDistance?this._minDistance:null},setFixedDistance:function(e){this._minDistance=e,this._maxDistance=e},updateEvent:function(e,t,n,r,i,s,o){if(!i){if(n!=null||r!=null){var u=n!=null?n:0,a=t.subtract(this._point),f=a.getLength();if(f<u)return!1;var l=r!=null?r:0;if(l!=0)if(f>l)t=this._point.add(a.normalize(l));else if(o)return!1}if(s&&t.equals(this._point))return!1}this._lastPoint=i&&e=="mousemove"?t:this._point,this._point=t;switch(e){case"mousedown":this._lastPoint=this._downPoint,this._downPoint=this._point,this._downCount++;break;case"mouseup":this._lastPoint=this._downPoint}return this._count=i?0:this._count+1,!0},onHandleEvent:function(e,t,n){if(this.view!=View._focused)return;paper=this._scope;var r=!1;switch(e){case"mousedown":this.updateEvent(e,t,null,null,!0,!1,!1),this.onMouseDown&&(this.onMouseDown(new ToolEvent(this,e,n,this.hitTestOptions)),r=!0);break;case"mousedrag":var i=!1,s=!1;while(this.updateEvent(e,t,this.minDistance,this.maxDistance,!1,i,s))this.onMouseDrag&&(this.onMouseDrag(new ToolEvent(this,e,n,this.hitTestOptions)),r=!0),i=!0,s=!0;break;case"mouseup":(this._point.x!=t.x||this._point.y!=t.y)&&this.updateEvent("mousedrag",t,this.minDistance,this.maxDistance,!1,!1,!1)&&this.onMouseDrag&&(this.onMouseDrag(new ToolEvent(this,e,n,this.hitTestOptions)),r=!0),this.updateEvent(e,t,null,this.maxDistance,!1,!1,!1),this.onMouseUp&&(this.onMouseUp(new ToolEvent(this,e,n,this.hitTestOptions)),r=!0),this.updateEvent(e,t,null,null,!0,!1,!1),this._firstMove=!0;break;case"mousemove":while(this.updateEvent(e,t,this.minDistance,this.maxDistance,this._firstMove,!0,!1))this.onMouseMove&&(this.onMouseMove(new ToolEvent(this,e,n,this.hitTestOptions)),r=!0),this._firstMove=!1}return r}}),CanvasProvider={canvases:[],getCanvas:function(e){if(this.canvases.length){var t=this.canvases.pop();return t.width!=e.width||t.height!=e.height?(t.width=e.width,t.height=e.height):t.getContext("2d").clearRect(0,0,e.width+1,e.height+1),t}var t=document.createElement("canvas");return t.width=e.width,t.height=e.height,t},returnCanvas:function(e){this.canvases.push(e)}},Numerical=new function(){var e=[[.5773502691896257],[0,.7745966692414834],[.33998104358485626,.8611363115940526],[0,.5384693101056831,.906179845938664],[.2386191860831969,.6612093864662645,.932469514203152],[0,.4058451513773972,.7415311855993945,.9491079123427585],[.1834346424956498,.525532409916329,.7966664774136267,.9602898564975363],[0,.3242534234038089,.6133714327005904,.8360311073266358,.9681602395076261],[.14887433898163122,.4333953941292472,.6794095682990244,.8650633666889845,.9739065285171717],[0,.26954315595234496,.5190961292068118,.7301520055740494,.8870625997680953,.978228658146057],[.1252334085114689,.3678314989981802,.5873179542866175,.7699026741943047,.9041172563704749,.9815606342467192],[0,.2304583159551348,.44849275103644687,.6423493394403402,.8015780907333099,.9175983992229779,.9841830547185881],[.10805494870734367,.31911236892788974,.5152486363581541,.6872929048116855,.827201315069765,.9284348836635735,.9862838086968123],[0,.20119409399743451,.3941513470775634,.5709721726085388,.7244177313601701,.8482065834104272,.937273392400706,.9879925180204854],[.09501250983763744,.2816035507792589,.45801677765722737,.6178762444026438,.755404408355003,.8656312023878318,.9445750230732326,.9894009349916499]],t=[[1],[.8888888888888888,.5555555555555556],[.6521451548625461,.34785484513745385],[.5688888888888889,.47862867049936647,.23692688505618908],[.46791393457269104,.3607615730481386,.17132449237917036],[.4179591836734694,.3818300505051189,.27970539148927664,.1294849661688697],[.362683783378362,.31370664587788727,.22238103445337448,.10122853629037626],[.3302393550012598,.31234707704000286,.26061069640293544,.1806481606948574,.08127438836157441],[.29552422471475287,.26926671930999635,.21908636251598204,.1494513491505806,.06667134430868814],[.2729250867779006,.26280454451024665,.23319376459199048,.18629021092773426,.1255803694649046,.05566856711617366],[.24914704581340277,.2334925365383548,.20316742672306592,.16007832854334622,.10693932599531843,.04717533638651183],[.2325515532308739,.22628318026289723,.2078160475368885,.17814598076194574,.13887351021978725,.09212149983772845,.04048400476531588],[.2152638534631578,.2051984637212956,.18553839747793782,.15720316715819355,.12151857068790319,.08015808715976021,.03511946033175186],[.2025782419255613,.19843148532711158,.1861610000155622,.16626920581699392,.13957067792615432,.10715922046717194,.07036604748810812,.03075324199611727],[.1894506104550685,.18260341504492358,.16915651939500254,.14959598881657674,.12462897125553388,.09515851168249279,.062253523938647894,.027152459411754096]],n=Math.abs,r=Math.sqrt,i=Math.cos,s=Math.PI;return{TOLERANCE:1e-5,EPSILON:1e-11,integrate:function(n,r,i,s){var o=e[s-2],u=t[s-2],a=.5*(i-r),f=a+r,l=0,c=s+1>>1,h=s&1?u[l++]*n(f):0;while(l<c){var p=a*o[l];h+=u[l++]*(n(f+p)+n(f-p))}return a*h},findRoot:function(e,t,r,i,s,o,u){for(var a=0;a<o;a++){var f=e(r),l=f/t(r);if(n(l)<u)return r;var c=r-l;f>0?(s=r,r=c<=i?.5*(i+s):c):(i=r,r=c>=s?.5*(i+s):c)}},solveQuadratic:function(e,t,i,s,o){if(n(e)<o)return n(t)>=o?(s[0]=-i/t,1):n(i)<o?-1:0;var u=t*t-4*e*i;if(u<0)return 0;u=r(u),t<0&&(u=-u),u=(t+u)*-0.5;var a=0;return n(u)>=o&&(s[a++]=i/u),n(e)>=o&&(s[a++]=u/e),a},solveCubic:function(e,t,o,u,a,f){if(n(e)<f)return Numerical.solveQuadratic(t,o,u,a,f);t/=e,o/=e,u/=e;var l=(t*t-3*o)/9,c=(2*t*t*t-9*t*o+27*u)/54,h=l*l*l,p=c*c;t/=3;if(p<h){var d=Math.acos(c/r(h)),v=-2*r(l);return a[0]=v*i(d/3)-t,a[1]=v*i((d+2*s)/3)-t,a[2]=v*i((d-2*s)/3)-t,3}var m=-Math.pow(n(c)+r(p-h),1/3);c<0&&(m=-m);var g=n(m)<f?0:l/m;return a[0]=m+g-t,1}}},BlendMode={process:function(e,t,n,r,i){function x(e,t,n){return.2989*e+.587*t+.114*n}function T(e,t,n,r){var i=r-x(e,t,n);w=e+i,E=t+i,S=n+i;var r=x(w,E,S),s=f(w,E,S),o=l(w,E,S);if(s<0){var u=r-s;w=r+(w-r)*r/u,E=r+(E-r)*r/u,S=r+(S-r)*r/u}if(o>255){var a=255-r,c=o-r;w=r+(w-r)*a/c,E=r+(E-r)*a/c,S=r+(S-r)*a/c}}function N(e,t,n){return l(e,t,n)-f(e,t,n)}function C(e,t,n,r){var i=[e,t,n],s=l(e,t,n),o=f(e,t,n),u;o=o==e?0:o==t?1:2,s=s==e?0:s==t?1:2,u=f(o,s)==0?l(o,s)==1?2:1:0,i[s]>i[o]?(i[u]=(i[u]-i[o])*r/(i[s]-i[o]),i[s]=r):i[u]=i[s]=0,i[o]=0,w=i[0],E=i[1],S=i[2]}var s=t.canvas,o=n.getImageData(i.x,i.y,s.width,s.height),u=o.data,a=t.getImageData(0,0,s.width,s.height).data,f=Math.min,l=Math.max,c=Math.abs,h,p,d,v,m,g,y,b,w,E,S,k={multiply:function(){w=m*h/255,E=g*p/255,S=y*d/255},screen:function(){w=255-(255-m)*(255-h)/255,E=255-(255-g)*(255-p)/255,S=255-(255-y)*(255-d)/255},overlay:function(){w=m<128?2*m*h/255:255-2*(255-m)*(255-h)/255,E=g<128?2*g*p/255:255-2*(255-g)*(255-p)/255,S=y<128?2*y*d/255:255-2*(255-y)*(255-d)/255},"soft-light":function(){var e=h*m/255;w=e+m*(255-(255-m)*(255-h)/255-e)/255,e=p*g/255,E=e+g*(255-(255-g)*(255-p)/255-e)/255,e=d*y/255,S=e+y*(255-(255-y)*(255-d)/255-e)/255},"hard-light":function(){w=h<128?2*h*m/255:255-2*(255-h)*(255-m)/255,E=p<128?2*p*g/255:255-2*(255-p)*(255-g)/255,S=d<128?2*d*y/255:255-2*(255-d)*(255-y)/255},"color-dodge":function(){w=h==255?h:f(255,m*255/(255-h)),E=p==255?p:f(255,g*255/(255-p)),S=d==255?d:f(255,y*255/(255-d))},"color-burn":function(){w=h==0?0:l(255-(255-m)*255/h,0),E=p==0?0:l(255-(255-g)*255/p,0),S=d==0?0:l(255-(255-y)*255/d,0)},darken:function(){w=m<h?m:h,E=g<p?g:p,S=y<d?y:d},lighten:function(){w=m>h?m:h,E=g>p?g:p,S=y>d?y:d},difference:function(){w=m-h,w<0&&(w=-w),E=g-p,E<0&&(E=-E),S=y-d,S<0&&(S=-S)},exclusion:function(){w=m+h*(255-m-m)/255,E=g+p*(255-g-g)/255,S=y+d*(255-y-y)/255},hue:function(){C(h,p,d,N(m,g,y)),T(w,E,S,x(m,g,y))},saturation:function(){C(m,g,y,N(h,p,d)),T(w,E,S,x(m,g,y))},luminosity:function(){T(m,g,y,x(h,p,d))},color:function(){T(h,p,d,x(m,g,y))},add:function(){w=f(m+h,255),E=f(g+p,255),S=f(y+d,255)},subtract:function(){w=l(m-h,0),E=l(g-p,0),S=l(y-d,0)},average:function(){w=(m+h)/2,E=(g+p)/2,S=(y+d)/2},negation:function(){w=255-c(255-h-m),E=255-c(255-p-g),S=255-c(255-d-y)}},L=k[e];if(!L)return;for(var A=0,O=u.length;A<O;A+=4){h=a[A],m=u[A],p=a[A+1],g=u[A+1],d=a[A+2],y=u[A+2],v=a[A+3],b=u[A+3],L();var M=v*r/255,_=1-M;u[A]=M*w+_*m,u[A+1]=M*E+_*g,u[A+2]=M*S+_*y,u[A+3]=v*r+_*b}n.putImageData(o,i.x,i.y)}},PaperScript=this.PaperScript=new function(){function $eval(e,t,n){var r=operators[t];if(e&&e[r]){var i=e[r](n);return t=="!="?!i:i}switch(t){case"+":return e+n;case"-":return e-n;case"*":return e*n;case"/":return e/n;case"%":return e%n;case"==":return e==n;case"!=":return e!=n;default:throw new Error("Implement Operator: "+t)}}function $sign(e,t){var n=signOperators[e];if(t&&t[n])return t[n]();switch(e){case"+":return+t;case"-":return-t;default:throw new Error("Implement Sign Operator: "+e)}}function isDynamic(e){var t=e[0];return t!="num"&&t!="string"}function handleOperator(e,t,n){if(operators[e]&&isDynamic(t))return["call",["name","$eval"],[t,["string",e],n]]}function compile(e){var t=parse_js.parse(e),n=parse_js.ast_walker(),r=n.walk;return t=n.with_walkers({binary:function(e,t,n){return handleOperator(e,t=r(t),n=r(n))||[this[0],e,t,n]},assign:function(e,t,n){var i=handleOperator(e,t=r(t),n=r(n));return i?[this[0],!0,t,i]:[this[0],e,t,n]},"unary-prefix":function(e,t){if(signOperators[e]&&isDynamic(t))return["call",["name","$sign"],[["string",e],r(t)]]}},function(){return r(t)}),parse_js.gen_code(t,{beautify:!0})}function evaluate(code,scope){paper=scope;var view=scope.view,tool=/on(?:Key|Mouse)(?:Up|Down|Move|Drag)/.test(code)&&new Tool,res;with(scope)(function(){var onEditOptions,onSelect,onDeselect,onReselect,onMouseDown,onMouseUp,onMouseDrag,onMouseMove,onKeyDown,onKeyUp,onFrame,onResize,handlers=["onEditOptions","onSelect","onDeselect","onReselect","onMouseDown","onMouseUp","onMouseDrag","onMouseMove","onKeyDown","onKeyUp"];res=eval(compile(code)),tool&&Base.each(handlers,function(key){tool[key]=eval(key)}),view&&(view.onResize=onResize,view.setOnFrame(onFrame),view.draw())}).call(scope);return res}function request(e,t){var n=new(window.ActiveXObject||XMLHttpRequest)("Microsoft.XMLHTTP");return n.open("GET",e,!0),n.overrideMimeType&&n.overrideMimeType("text/plain"),n.onreadystatechange=function(){if(n.readyState===4)return evaluate(n.responseText,t)},n.send(null)}function load(){var e=document.getElementsByTagName("script");for(var t=0,n=e.length;t<n;t++){var r=e[t];if(/^text\/(?:x-|)paperscript$/.test(r.type)&&!r.getAttribute("data-paper-loaded")){var i=new PaperScope(r);i.setup(PaperScript.getAttribute(r,"canvas")),r.src?request(r.src,i):evaluate(r.innerHTML,i),r.setAttribute("data-paper-loaded",!0)}}}function handleAttribute(e){return e+="Attribute",function(t,n){return t[e](n)||t[e]("data-paper-"+n)}}var parse_js=new function(){function e(e,t,n){var r=[];for(var i=0;i<e.length;++i)r.push(t.call(n,e[i],i));return r}function t(e){return/^[a-z_$][a-z0-9_$]*$/i.test(e)&&e!="this"&&!a(O,e)&&!a(L,e)&&!a(k,e)}function n(e,t){var n={};e===!0&&(e={});for(var r in t)a(t,r)&&(n[r]=e&&a(e,r)?e[r]:t[r]);return n}function r(e,t){return t<1?"":Array(t+1).join(e)}function i(i,l){function h(e){var t=e[0],n=D[t];if(!n)throw new Error("Can't find generator for \""+t+'"');P.push(e);var r=n.apply(t,e.slice(1));return P.pop(),r}function p(e){var t=e[0],n=e[1];return n!=null&&(t=N([L(t),"=",S(n,"seq")])),t}function d(e){return e?e.length==0?"{}":"{"+M+C(function(){return m(e).join(M)})+M+k("}"):";"}function v(t){var n=t.length;return n==0?"{}":"{"+M+e(t,function(e,t){var r=e[1].length>0,i=C(function(){return k(e[0]?N(["case",h(e[0])+":"]):"default:")},.5)+(r?M+C(function(){return m(e[1]).join(M)}):"");return!A&&r&&t<n-1&&(i+=";"),i}).join(M)+M+k("}")}function m(t,n){for(var r=[],i=t.length-1,s=0;s<=i;++s){var u=t[s],a=h(u);a!=";"&&(!A&&s==i&&(u[0]=="while"&&o(u[2])||f(u[0],["for","for-in"])&&o(u[4])||u[0]=="if"&&o(u[2])&&!u[3]||u[0]=="if"&&u[3]&&o(u[3])?a=a.replace(/;*\s*$/,";"):a=a.replace(/;+\s*$/,"")),r.push(a))}return n?r:e(r,k)}function g(t,n,r,i){var s=i||"function";return t&&(s+=" "+L(t)),s+="("+x(e(n,L))+")",N([s,d(r)])}function y(e){if(e[0]=="do")return h(["block",[e]]);var t=e;for(;;){var n=t[0];if(n=="if"){if(!t[3])return h(["block",[e]]);t=t[3]}else if(n=="while"||n=="do")t=t[2];else{if(n!="for"&&n!="for-in")break;t=t[4]}}return h(e)}function b(e){var t=e.toString(10),n=[t.replace(/^0\./,".")],r;return Math.floor(e)===e?(n.push("0x"+e.toString(16).toLowerCase(),"0"+e.toString(8)),(r=/^(.*?)(0+)$/.exec(e))&&n.push(r[1]+"e"+r[2].length)):(r=/^0?\.(0+)(.*)$/.exec(e))&&n.push(r[2]+"e-"+(r[1].length+r[2].length),t.substr(t.indexOf("."))),E(n)}function w(e){if(e[0]=="function"||e[0]=="object"){var t=c(P),n=t.pop(),r=t.pop();while(r){if(r[0]=="stat")return!0;if((r[0]!="seq"&&r[0]!="call"&&r[0]!="dot"&&r[0]!="sub"&&r[0]!="conditional"||r[1]!==n)&&(r[0]!="binary"&&r[0]!="assign"&&r[0]!="unary-postfix"||r[2]!==n))return!1;n=r,r=t.pop()}}return!a($,e[0])}function E(e){if(e.length==1)return e[0];if(e.length==2){var t=e[1];return e=e[0],e.length<=t.length?e:t}return E([e[0],E(e.slice(1))])}function S(e){var t=h(e);for(var n=1;n<arguments.length;++n){var r=arguments[n];if(r instanceof Function&&r(e)||e[0]==r)return"("+t+")"}return t}function x(e){return e.join(","+_)}function N(e){if(A)return e.join(" ");var t=[];for(var n=0;n<e.length;++n){var r=e[n+1];t.push(e[n]),r&&(/[a-z0-9_\x24]$/i.test(e[n].toString())&&/^[a-z0-9_\x24]/i.test(r.toString())||/[\+\-]$/.test(e[n].toString())&&/^[\+\-]/.test(r.toString()))&&t.push(" ")}return t.join("")}function C(e,t){t==null&&(t=1),O+=t;try{return e.apply(null,c(arguments,1))}finally{O-=t}}function k(e){return e==null&&(e=""),A&&(e=r(" ",l.indent_start+O*l.indent_level)+e),e}function L(e){return e.toString()}l=n(l,{indent_start:0,indent_level:4,quote_keys:!1,space_colon:!1,beautify:!1});var A=!!l.beautify,O=0,M=A?"\n":"",_=A?" ":"",D={string:s,num:b,name:L,toplevel:function(e){return m(e).join(M)},splice:function(t){var n=P[P.length-2][0];return a(J,n)?d.apply(this,arguments):e(m(t,!0),function(e,t){return t>0?k(e):e}).join(M)},block:d,"var":function(t){return"var "+x(e(t,p))+";"},"const":function(t){return"const "+x(e(t,p))+";"},"try":function(e,t,n){var r=["try",d(e)];return t&&r.push("catch","("+t[0]+")",d(t[1])),n&&r.push("finally",d(n)),N(r)},"throw":function(e){return N(["throw",h(e)])+";"},"new":function(t,n){return n=n.length>0?"("+x(e(n,h))+")":"",N(["new",S(t,"seq","binary","conditional","assign",function(e){var t=u(),n={};try{t.with_walkers({call:function(){throw n},"function":function(){return this}},function(){t.walk(e)})}catch(r){if(r===n)return!0;throw r}})+n])},"switch":function(e,t){return N(["switch","("+h(e)+")",v(t)])},"break":function(e){var t="break";return e!=null&&(t+=" "+L(e)),t+";"},"continue":function(e){var t="continue";return e!=null&&(t+=" "+L(e)),t+";"},conditional:function(e,t,n){return N([S(e,"assign","seq","conditional"),"?",S(t,"seq"),":",S(n,"seq")])},assign:function(e,t,n){return e&&e!==!0?e+="=":e="=",N([h(t),e,S(n,"seq")])},dot:function(e){var t=h(e),n=1;e[0]=="num"?/\./.test(e[1])||(t+="."):w(e)&&(t="("+t+")");while(n<arguments.length)t+="."+L(arguments[n++]);return t},call:function(t,n){var r=h(t);return w(t)&&(r="("+r+")"),r+"("+x(e(n,function(e){return S(e,"seq")}))+")"},"function":g,defun:g,"if":function(e,t,n){var r=["if","("+h(e)+")",n?y(t):h(t)];return n&&r.push("else",h(n)),N(r)},"for":function(e,t,n,r){var i=["for"];e=(e!=null?h(e):"").replace(/;*\s*$/,";"+_),t=(t!=null?h(t):"").replace(/;*\s*$/,";"+_),n=(n!=null?h(n):"").replace(/;*\s*$/,"");var s=e+t+n;return s=="; ; "&&(s=";;"),i.push("("+s+")",h(r)),N(i)},"for-in":function(e,t,n,r){return N(["for","("+(e?h(e).replace(/;+$/,""):h(t)),"in",h(n)+")",h(r)])},"while":function(e,t){return N(["while","("+h(e)+")",h(t)])},"do":function(e,t){return N(["do",h(t),"while","("+h(e)+")"])+";"},"return":function(e){var t=["return"];return e!=null&&t.push(h(e)),N(t)+";"},binary:function(e,t,n){var r=h(t),i=h(n);if(f(t[0],["assign","conditional","seq"])||t[0]=="binary"&&W[e]>W[t[1]])r="("+r+")";if(f(n[0],["assign","conditional","seq"])||n[0]=="binary"&&W[e]>=W[n[1]]&&(n[1]!=e||!f(e,["&&","||","*"])))i="("+i+")";return N([r,e,i])},"unary-prefix":function(e,t){var n=h(t);return t[0]=="num"||t[0]=="unary-prefix"&&!a(H,e+t[1])||!w(t)||(n="("+n+")"),e+(T(e.charAt(0))?" ":"")+n},"unary-postfix":function(e,t){var n=h(t);return t[0]=="num"||t[0]=="unary-postfix"&&!a(H,e+t[1])||!w(t)||(n="("+n+")"),n+e},sub:function(e,t){var n=h(e);return w(e)&&(n="("+n+")"),n+"["+h(t)+"]"},object:function(n){return n.length==0?"{}":"{"+M+C(function(){return e(n,function(e){if(e.length==3)return k(g(e[0],e[1][2],e[1][3],e[2]));var n=e[0],r=h(e[1]);return l.quote_keys?n=s(n):(typeof n=="number"||!A&&+n+""==n)&&parseFloat(n)>=0?n=b(+n):t(n)||(n=s(n)),k(N(A&&l.space_colon?[n,":",r]:[n+":",r]))}).join(","+M)})+M+k("}")},regexp:function(e,t){return"/"+e+"/"+t},array:function(t){return t.length==0?"[]":N(["[",x(e(t,function(e){return!A&&e[0]=="atom"&&e[1]=="undefined"?"":S(e,"seq")})),"]"])},stat:function(e){return h(e).replace(/;*\s*$/,";")},seq:function(){return x(e(c(arguments),h))},label:function(e,t){return N([L(e),":",h(t)])},"with":function(e,t){return N(["with","("+h(e)+")",h(t)])},atom:function(e){return L(e)}},P=[];return h(i)}function s(e){var t=0,n=0;return e=e.replace(/[\\\b\f\n\r\t\x22\x27]/g,function(e){switch(e){case"\\":return"\\\\";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"	":return"\\t";case'"':return++t,'"';case"'":return++n,"'"}return e}),t>n?"'"+e.replace(/\x27/g,"\\'")+"'":'"'+e.replace(/\x22/g,'\\"')+'"'}function o(e){return!e||e[0]=="block"&&(!e[1]||e[1].length==0)}function u(){function t(e,t){var n={},r;for(r in e)a(e,r)&&(n[r]=o[r],o[r]=e[r]);var i=t();for(r in n)a(n,r)&&(n[r]?o[r]=n[r]:delete o[r]);return i}function n(e){if(e==null)return null;try{u.push(e);var t=e[0],n=o[t];if(n){var r=n.apply(e,e.slice(1));if(r!=null)return r}return n=s[t],n.apply(e,e.slice(1))}finally{u.pop()}}function r(t){var r=[this[0]];return t!=null&&r.push(e(t,n)),r}function i(t){return[this[0],e(t,function(e){var t=[e[0]];return e.length>1&&(t[1]=n(e[1])),t})]}var s={string:function(e){return[this[0],e]},num:function(e){return[this[0],e]},name:function(e){return[this[0],e]},toplevel:function(t){return[this[0],e(t,n)]},block:r,splice:r,"var":i,"const":i,"try":function(t,r,i){return[this[0],e(t,n),r!=null?[r[0],e(r[1],n)]:null,i!=null?e(i,n):null]},"throw":function(e){return[this[0],n(e)]},"new":function(t,r){return[this[0],n(t),e(r,n)]},"switch":function(t,r){return[this[0],n(t),e(r,function(t){return[t[0]?n(t[0]):null,e(t[1],n)]})]},"break":function(e){return[this[0],e]},"continue":function(e){return[this[0],e]},conditional:function(e,t,r){return[this[0],n(e),n(t),n(r)]},assign:function(e,t,r){return[this[0],e,n(t),n(r)]},dot:function(e){return[this[0],n(e)].concat(c(arguments,1))},call:function(t,r){return[this[0],n(t),e(r,n)]},"function":function(t,r,i){return[this[0],t,r.slice(),e(i,n)]},defun:function(t,r,i){return[this[0],t,r.slice(),e(i,n)]},"if":function(e,t,r){return[this[0],n(e),n(t),n(r)]},"for":function(e,t,r,i){return[this[0],n(e),n(t),n(r),n(i)]},"for-in":function(e,t,r,i){return[this[0],n(e),n(t),n(r),n(i)]},"while":function(e,t){return[this[0],n(e),n(t)]},"do":function(e,t){return[this[0],n(e),n(t)]},"return":function(e){return[this[0],n(e)]},binary:function(e,t,r){return[this[0],e,n(t),n(r)]},"unary-prefix":function(e,t){return[this[0],e,n(t)]},"unary-postfix":function(e,t){return[this[0],e,n(t)]},sub:function(e,t){return[this[0],n(e),n(t)]},object:function(t){return[this[0],e(t,function(e){return e.length==2?[e[0],n(e[1])]:[e[0],n(e[1]),e[2]]})]},regexp:function(e,t){return[this[0],e,t]},array:function(t){return[this[0],e(t,n)]},stat:function(e){return[this[0],n(e)]},seq:function(){return[this[0]].concat(e(c(arguments),n))},label:function(e,t){return[this[0],e,n(t)]},"with":function(e,t){return[this[0],n(e),n(t)]},atom:function(e){return[this[0],e]}},o={},u=[];return{walk:n,with_walkers:t,parent:function(){return u[u.length-2]},stack:function(){return u}}}function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function f(e,t){for(var n=t.length;--n>=0;)if(t[n]===e)return!0;return!1}function l(e){return e.split("")}function c(e,t){return Array.prototype.slice.call(e,t||0)}function h(e){var t={};for(var n=0;n<e.length;++n)t[e[n]]=!0;return t}function p(e){e instanceof Function&&(e=e());for(var t=1,n=arguments.length;--n>0;++t)arguments[t]();return e}function d(e){var t=c(arguments,1);return function(){return e.apply(this,t.concat(c(arguments)))}}function v(e,t,n){function r(e){try{return++ot.in_loop,e()}finally{--ot.in_loop}}function i(e){var t=o(e),n=ot.token.value;if(st("operator")&&a(z,n)){if(s(t))return rt(),$("assign",z[n],t,i(e));tt("Invalid assignment")}return t}function s(e){if(!t)return!0;switch(e[0]){case"dot":case"sub":case"new":case"call":return!0;case"name":return e[1]!="this"}}function o(e){var t=u(e);if(st("operator","?")){rt();var n=ct(!1);return Q(":"),$("conditional",t,n,ct(!1,e))}return t}function u(e){return l(lt(!0),0,e)}function l(e,t,n){var r=st("operator")?ot.token.value:null;r&&r=="in"&&n&&
(r=null);var i=r!=null?W[r]:null;if(i!=null&&i>t){rt();var s=l(lt(!0),i,n);return l($("binary",r,e,s),t,n)}return e}function h(e,t,n){return(t=="++"||t=="--")&&!s(n)&&tt("Invalid use of "+t+" operator"),$(e,t,n)}function v(e,t){return st("punc",".")?(rt(),v($("dot",e,w()),t)):st("punc","[")?(rt(),v($("sub",e,p(ct,d(Q,"]"))),t)):t&&st("punc","(")?(rt(),v($("call",e,T(")")),!0)):t&&st("operator")&&a(U,ot.token.value)?p(d(h,"unary-postfix",ot.token.value,e),rt):e}function w(){switch(ot.token.type){case"name":case"operator":case"keyword":case"atom":return p(ot.token.value,rt);default:Z()}}function E(){switch(ot.token.type){case"num":case"string":return p(ot.token.value,rt)}return w()}function S(){var e=!0,n=[];while(!st("punc","}")){e?e=!1:Q(",");if(!t&&st("punc","}"))break;var r=ot.token.type,i=E();r!="name"||i!="get"&&i!="set"||!!st("punc",":")?(Q(":"),n.push([i,ct(!1)])):n.push([w(),at(!1),i])}return rt(),$("object",n)}function x(){return $("array",T("]",!t,!0))}function T(e,t,n){var r=!0,i=[];while(!st("punc",e)){r?r=!1:Q(",");if(t&&st("punc",e))break;st("punc",",")&&n?i.push(["atom","undefined"]):i.push(ct(!1))}return rt(),i}function N(){var e=lt(!1),t;return st("punc","(")?(rt(),t=T(")")):t=[],v($("new",e,t),!0)}function C(){return $("const",L())}function k(e){return $("var",L(e))}function L(e){var t=[];for(;;){st("name")||Z();var n=ot.token.value;rt(),st("operator","=")?(rt(),t.push([n,ct(!1,e)])):t.push([n]);if(!st("punc",","))break;rt()}return t}function A(){var e=O(),t,n;if(st("keyword","catch")){rt(),Q("("),st("name")||tt("Name expected");var r=ot.token.value;rt(),Q(")"),t=[r,O()]}return st("keyword","finally")&&(rt(),n=O()),!t&&!n&&tt("Missing catch/finally blocks"),$("try",e,t,n)}function O(){Q("{");var e=[];while(!st("punc","}"))st("eof")&&Z(),e.push(ut());return rt(),e}function M(){var e=q(),t=ut(),n;return st("keyword","else")&&(rt(),n=ut()),$("if",e,t,n)}function _(e){var t=e[0]=="var"?$("name",e[1][0]):e;rt();var n=ct();return Q(")"),$("for-in",e,t,n,r(ut))}function D(e){Q(";");var t=st("punc",";")?null:ct();Q(";");var n=st("punc",")")?null:ct();return Q(")"),$("for",e,t,n,r(ut))}function P(){Q("(");var e=null;if(!st("punc",";")){e=st("keyword","var")?(rt(),k(!0)):ct(!0,!0);if(st("operator","in"))return _(e)}return D(e)}function H(e){var t;return K()||(t=st("name")?ot.token.value:null),t!=null?(rt(),f(t,ot.labels)||tt("Label "+t+" without matching loop or statement")):ot.in_loop==0&&tt(e+" not inside a loop or switch"),J(),$(e,t)}function B(){return $("stat",p(ct,J))}function j(e){ot.labels.push(e);var n=ot.token,r=ut();return t&&!a(X,r[0])&&Z(n),ot.labels.pop(),$("label",e,r)}function F(e){return n?function(){var t=ot.token,n=e.apply(this,arguments);return n[0]=I(n[0],t,nt()),n}:e}function I(e,t,n){return e instanceof m?e:new m(e,t,n)}function q(){Q("(");var e=ct();return Q(")"),e}function $(){return c(arguments)}function J(){st("punc",";")?rt():K()||Z()}function K(){return!t&&(ot.token.nlb||st("eof")||st("punc","}"))}function Q(e){return Y("punc",e)}function Y(e,t){if(st(e,t))return rt();et(ot.token,"Unexpected token "+ot.token.type+", expected "+e)}function Z(e){e==null&&(e=ot.token),et(e,"Unexpected token: "+e.type+" ("+e.value+")")}function et(e,t){tt(t,e.line,e.col)}function tt(e,t,n,r){var i=ot.input.context();b(e,t!=null?t:i.tokline,n!=null?n:i.tokcol,r!=null?r:i.tokpos)}function nt(){return ot.prev}function rt(){return ot.prev=ot.token,ot.peeked?(ot.token=ot.peeked,ot.peeked=null):ot.token=ot.input(),ot.token}function it(){return ot.peeked||(ot.peeked=ot.input())}function st(e,t){return y(ot.token,e,t)}var ot={input:typeof e=="string"?g(e,!0):e,token:null,prev:null,peeked:null,in_function:0,in_loop:0,labels:[]};ot.token=rt();var ut=F(function(){st("operator","/")&&(ot.peeked=null,ot.token=ot.input(!0));switch(ot.token.type){case"num":case"string":case"regexp":case"operator":case"atom":return B();case"name":return y(it(),"punc",":")?j(p(ot.token.value,rt,rt)):B();case"punc":switch(ot.token.value){case"{":return $("block",O());case"[":case"(":return B();case";":return rt(),$("block");default:Z()};case"keyword":switch(p(ot.token.value,rt)){case"break":return H("break");case"continue":return H("continue");case"debugger":return J(),$("debugger");case"do":return function(e){return Y("keyword","while"),$("do",p(q,J),e)}(r(ut));case"for":return P();case"function":return at(!0);case"if":return M();case"return":return ot.in_function==0&&tt("'return' outside of function"),$("return",st("punc",";")?(rt(),null):K()?null:p(ct,J));case"switch":return $("switch",q(),ft());case"throw":return $("throw",p(ct,J));case"try":return A();case"var":return p(k,J);case"const":return p(C,J);case"while":return $("while",q(),r(ut));case"with":return $("with",q(),ut());default:Z()}}}),at=F(function(e){var t=st("name")?p(ot.token.value,rt):null;return e&&!t&&Z(),Q("("),$(e?"defun":"function",t,function(e,t){while(!st("punc",")"))e?e=!1:Q(","),st("name")||Z(),t.push(ot.token.value),rt();return rt(),t}(!0,[]),function(){++ot.in_function;var e=ot.in_loop;ot.in_loop=0;var t=O();return--ot.in_function,ot.in_loop=e,t}())}),ft=d(r,function(){Q("{");var e=[],t=null;while(!st("punc","}"))st("eof")&&Z(),st("keyword","case")?(rt(),t=[],e.push([ct(),t]),Q(":")):st("keyword","default")?(rt(),Q(":"),t=[],e.push([null,t])):(t||Z(),t.push(ut()));return rt(),e}),lt=F(function(e){if(st("operator","new"))return rt(),N();if(st("operator")&&a(R,ot.token.value))return h("unary-prefix",p(ot.token.value,rt),lt(e));if(st("punc")){switch(ot.token.value){case"(":return rt(),v(p(ct,d(Q,")")),e);case"[":return rt(),v(x(),e);case"{":return rt(),v(S(),e)}Z()}if(st("keyword","function"))return rt(),v(at(!1),e);if(a(V,ot.token.type)){var t=ot.token.type=="regexp"?$("regexp",ot.token.value[0],ot.token.value[1]):$(ot.token.type,ot.token.value);return v(p(t,rt),e)}Z()}),ct=F(function(e,t){arguments.length==0&&(e=!0);var n=i(t);return e&&st("punc",",")?(rt(),$("seq",n,ct(!0,t))):n});return $("toplevel",function(e){while(!st("eof"))e.push(ut());return e}([]))}function m(e,t,n){this.name=e,this.start=t,this.end=n}function g(e){function t(e){if(e)return u();g(),w();var t=D();if(!t)return y("eof");if(N(t))return d();if(t=='"'||t=="'")return c();if(a(F,t))return y("punc",_());if(t==".")return i();if(t=="/")return s();if(a(M,t))return o();if(t=="\\"||x(t))return r();v("Unexpected character '"+t+"'")}function n(e,t){try{return t()}catch(n){if(n!==q)throw n;v(e)}}function r(){var e=m(S);return a(k,e)?a(H,e)?y("operator",e):a(O,e)?y("atom",e):y("keyword",e):y("name",e)}function i(){return _(),N(D())?d("."):y("punc",".")}function s(){_();var e=P.regex_allowed;switch(D()){case"/":return P.comments_before.push(l()),P.regex_allowed=e,t();case"*":return P.comments_before.push(f()),P.regex_allowed=e,t()}return P.regex_allowed?u():o("/")}function o(e){function t(e){if(!D())return e;var n=e+D();return a(H,n)?(_(),t(n)):e}return y("operator",t(e||_()))}function u(){return n("Unterminated regular expression",function(){var e=!1,t="",n,r=!1;while(n=_(!0))if(e)t+="\\"+n,e=!1;else if(n=="[")r=!0,t+=n;else if(n=="]"&&r)r=!1,t+=n;else{if(n=="/"&&!r)break;n=="\\"?e=!0:t+=n}var i=m(function(e){return a(I,e)});return y("regexp",[t,i])})}function f(){return _(),n("Unterminated multiline comment",function(){var e=C("*/",!0),t=P.text.substring(P.pos,e),n=y("comment2",t,!0);return P.pos=e+2,P.line+=t.split("\n").length-1,P.newline_before=t.indexOf("\n")>=0,n})}function l(){_();var e=C("\n"),t;return e==-1?(t=P.text.substr(P.pos),P.pos=P.text.length):(t=P.text.substring(P.pos,e),P.pos=e),y("comment1",t,!0)}function c(){return n("Unterminated string constant",function(){var e=_(),t="";for(;;){var n=_(!0);if(n=="\\")n=p();else if(n==e)break;t+=n}return y("string",t)})}function h(e){var t=0;for(;e>0;--e){var n=parseInt(_(!0),16);isNaN(n)&&v("Invalid hex-character pattern in string"),t=t<<4|n}return t}function p(){var e=_(!0);switch(e){case"n":return"\n";case"r":return"\r";case"t":return"	";case"b":return"\b";case"v":return"";case"f":return"\f";case"0":return"";case"x":return String.fromCharCode(h(2));case"u":return String.fromCharCode(h(4));case"\n":return"";default:return e}}function d(e){var t=!1,n=!1,r=!1,i=e==".",s=m(function(s,o){return s=="x"||s=="X"?r?!1:r=!0:!!r||s!="E"&&s!="e"?s=="-"?n||o==0&&!e?!0:!1:s=="+"?n:(n=!1,s=="."?!i&&!r?i=!0:!1:T(s)):t?!1:t=n=!0});e&&(s=e+s);var o=E(s);if(!isNaN(o))return y("num",o);v("Invalid syntax: "+s)}function v(e){b(e,P.tokline,P.tokcol,P.tokpos)}function m(e){var t="",n=D(),r=0;while(n&&e(n,r++))t+=_(),n=D();return t}function g(){while(a(B,D()))_()}function y(e,t,n){P.regex_allowed=e=="operator"&&!a(U,t)||e=="keyword"&&a(A,t)||e=="punc"&&a(j,t);var r={type:e,value:t,line:P.tokline,col:P.tokcol,pos:P.tokpos,nlb:P.newline_before};return n||(r.comments_before=P.comments_before,P.comments_before=[]),P.newline_before=!1,r}function w(){P.tokline=P.line,P.tokcol=P.col,P.tokpos=P.pos}function C(e,t){var n=P.text.indexOf(e,P.pos);if(t&&n==-1)throw q;return n}function L(){return!P.peek()}function _(e){var t=P.text.charAt(P.pos++);if(e&&!t)throw q;return t=="\n"?(P.newline_before=!0,++P.line,P.col=0):++P.col,t}function D(){return P.text.charAt(P.pos)}var P={text:e.replace(/\r\n?|[\n\u2028\u2029]/g,"\n").replace(/^\uFEFF/,""),pos:0,tokpos:0,line:0,tokline:0,col:0,tokcol:0,newline_before:!1,regex_allowed:!1,comments_before:[]};return t.context=function(e){return e&&(P=e),P},t}function y(e,t,n){return e.type==t&&(n==null||e.value==n)}function b(e,t,n,r){throw new w(e,t,n,r)}function w(e,t,n,r){this.message=e,this.line=t,this.col=n,this.pos=r}function E(e){if(_.test(e))return parseInt(e.substr(2),16);if(D.test(e))return parseInt(e.substr(1),8);if(P.test(e))return parseFloat(e)}function S(e){return x(e)||N(e)}function x(e){return e=="$"||e=="_"||C(e)}function T(e){return N(e)||C(e)}function N(e){return e=e.charCodeAt(0),e>=48&&e<=57}function C(e){return e=e.charCodeAt(0),e>=65&&e<=90||e>=97&&e<=122}var k=h(["break","case","catch","const","continue","default","delete","do","else","finally","for","function","if","in","instanceof","new","return","switch","throw","try","typeof","var","void","while","with"]),L=h(["abstract","boolean","byte","char","class","debugger","double","enum","export","extends","final","float","goto","implements","import","int","interface","long","native","package","private","protected","public","short","static","super","synchronized","throws","transient","volatile"]),A=h(["return","new","delete","throw","else","case"]),O=h(["false","null","true","undefined"]),M=h(l("+-*&%=<>!?|~^")),_=/^0x[0-9a-f]+$/i,D=/^0[0-7]+$/,P=/^\d*\.?\d*(?:e[+-]?\d*(?:\d\.?|\.?\d)\d*)?$/i,H=h(["in","instanceof","typeof","new","void","delete","++","--","+","-","!","~","&","|","^","*","/","%",">>","<<",">>>","<",">","<=",">=","==","===","!=","!==","?","=","+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&=","&&","||"]),B=h(l(" \n\r	")),j=h(l("[{}(,.;:")),F=h(l("[]{}(),;:")),I=h(l("gmsiy"));w.prototype.toString=function(){return this.message+" (line: "+this.line+", col: "+this.col+", pos: "+this.pos+")"};var q={},R=h(["typeof","void","delete","--","++","!","~","-","+"]),U=h(["--","++"]),z=function(e,t,n){while(n<e.length)t[e[n]]=e[n].substr(0,e[n].length-1),n++;return t}(["+=","-=","/=","*=","%=",">>=","<<=",">>>=","|=","^=","&="],{"=":!0},0),W=function(e,t){for(var n=0,r=1;n<e.length;++n,++r){var i=e[n];for(var s=0;s<i.length;++s)t[i[s]]=r}return t}([["||"],["&&"],["|"],["^"],["&"],["==","===","!=","!=="],["<",">","<=",">=","in","instanceof"],[">>","<<",">>>"],["+","-"],["*","/","%"]],{}),X=h(["for","do","while","switch"]),V=h(["atom","num","string","regexp","name"]);m.prototype.toString=function(){return this.name};var $=h(["name","array","object","string","dot","sub","call","regexp"]),J=h(["if","while","do","for","for-in","with"]);return{parse:v,gen_code:i,tokenizer:g,ast_walker:u}},operators={"+":"add","-":"subtract","*":"multiply","/":"divide","%":"modulo","==":"equals","!=":"equals"},signOperators={"-":"negate"};return DomEvent.add(window,{load:load}),{compile:compile,evaluate:evaluate,load:load,getAttribute:handleAttribute("get"),hasAttribute:handleAttribute("has")}};return this.load=PaperScript.load,Base.each(this,function(e,t){e&&e.prototype instanceof Base&&(e._name=t)}),this.enumerable=!0,new(PaperScope.inject(this))};Point3.prototype.subtract=function(e){return new Point3(this.x-e.x,this.y-e.y,this.z-e.z)},Point3.prototype.add=function(e){return new Point3(this.x+e.x,this.y+e.y,this.z+e.z)},Point3.prototype.swapXZ=function(){return new Point3(this.z,this.y,this.x)},Point3.prototype.multiply=function(e){if(e instanceof Point3)return new Point3(this.x*e.x,this.y*e.y,this.z*e.z);if(!isNaN(e))return this.multiply(new Point3(e,e,e));throw"wrong argument! must be a Point3 or number"},Point3.prototype.normalize=function(){return this.setLength(1)},Point3.prototype.norm=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},Point3.prototype.length=function(){return this.norm()},Point3.prototype.setLength=function(e){var t=e/this.norm();return this.scale(t)},Point3.prototype.scale=function(e){return this.x=this.x*e,this.y=this.y*e,this.z=this.z*e,this},Point3.prototype.clone=function(){return new Point3(this.x,this.y,this.z)},Point3.prototype.cross=function(e){return new Point3(this.y*e.z-this.z*e.y,this.z*e.x-this.x*e.z,this.x*e.y-this.y*e.x)},Point3.prototype.dot=function(e){return this.x*e.x+this.y*e.y+this.z*e.z},Point3.prototype.getRotatedPointByX=function(e,t){if(e==0)return this;var n=Math.cos(e),r=Math.sin(e);if(t==undefined){var i=this.y*n-this.z*r,s=this.y*r+this.z*n;return new Point3(this.x,i,s)}var o=new Point3(0,this.y-t.y,this.z-t.z),i=o.y*n-o.z*r,s=o.y*r+o.z*n;return new Point3(this.x,i+t.y,s+t.z)},Point3.prototype.getRotatedPointByY=function(e,t){if(e==0)return this;var n=Math.cos(e),r=Math.sin(e);if(t==undefined){var i=this.x*n+this.z*r,s=-this.x*r+this.z*n;return new Point3(i,this.y,s)}var o=new Point3(this.x-t.x,0,this.z-t.z),i=o.x*n+o.z*r,s=-o.x*r+o.z*n;return new Point3(i+t.x,this.y,s+t.z)},function(e){var t="0.3.4",n="hasOwnProperty",r=/[\.\/]/,i="*",s=function(){},o=function(e,t){return e-t},u,a,f={n:{}},l=function(e,t){var n=f,r=a,i=Array.prototype.slice.call(arguments,2),s=l.listeners(e),c=0,p=!1,d,v=[],m={},y=[],b=u,w=[];u=e,a=0;for(var E=0,S=s.length;E<S;E++)"zIndex"in s[E]&&(v.push(s[E].zIndex),s[E].zIndex<0&&(m[s[E].zIndex]=s[E]));v.sort(o);while(v[c]<0){d=m[v[c++]],y.push(d.apply(t,i));if(a)return a=r,y}for(E=0;E<S;E++){d=s[E];if("zIndex"in d)if(d.zIndex==v[c]){y.push(d.apply(t,i));if(a)break;do{c++,d=m[v[c]],d&&y.push(d.apply(t,i));if(a)break}while(d)}else m[d.zIndex]=d;else{y.push(d.apply(t,i));if(a)break}}return a=r,u=b,y.length?y:null};l.listeners=function(e){var t=e.split(r),n=f,s,o,u,a,l,c,h,p,v=[n],m=[];for(a=0,l=t.length;a<l;a++){p=[];for(c=0,h=v.length;c<h;c++){n=v[c].n,o=[n[t[a]],n[i]],u=2;while(u--)s=o[u],s&&(p.push(s),m=m.concat(s.f||[]))}v=p}return m},l.on=function(e,t){var n=e.split(r),i=f;for(var o=0,u=n.length;o<u;o++)i=i.n,!i[n[o]]&&(i[n[o]]={n:{}}),i=i[n[o]];i.f=i.f||[];for(o=0,u=i.f.length;o<u;o++)if(i.f[o]==t)return s;return i.f.push(t),function(e){+e==+e&&(t.zIndex=+e)}},l.stop=function(){a=1},l.nt=function(e){return e?(new RegExp("(?:\\.|\\/|^)"+e+"(?:\\.|\\/|$)")).test(u):u},l.off=l.unbind=function(e,t){var s=e.split(r),o,u,a,l,h,p,v,m=[f];for(l=0,h=s.length;l<h;l++)for(p=0;p<m.length;p+=a.length-2){a=[p,1],o=m[p].n;if(s[l]!=i)o[s[l]]&&a.push(o[s[l]]);else for(u in o)o[n](u)&&a.push(o[u]);m.splice.apply(m,a)}for(l=0,h=m.length;l<h;l++){o=m[l];while(o.n){if(t){if(o.f){for(p=0,v=o.f.length;p<v;p++)if(o.f[p]==t){o.f.splice(p,1);break}!o.f.length&&delete o.f}for(u in o.n)if(o.n[n](u)&&o.n[u].f){var g=o.n[u].f;for(p=0,v=g.length;p<v;p++)if(g[p]==t){g.splice(p,1);break}!g.length&&delete o.n[u].f}}else{delete o.f;for(u in o.n)o.n[n](u)&&o.n[u].f&&delete o.n[u].f}o=o.n}}},l.once=function(e,t){var n=function(){var r=t.apply(this,arguments);return l.unbind(e,n),r};return l.on(e,n)},l.version=t,l.toString=function(){return"You are running Eve "+t},typeof module!="undefined"&&module.exports?module.exports=l:typeof define!="undefined"?define("eve",[],function(){return l}):e.eve=l}(this),function(){function e(e){for(var t=0;t<An.length;t++)An[t].el.paper==e&&An.splice(t--,1)}function t(e,t,n,i,s,u){n=at(n);var a,f,l,c=[],h,p,d,v=e.ms,m={},g={},y={};if(i)for(E=0,x=An.length;E<x;E++){var b=An[E];if(b.el.id==t.id&&b.anim==e){b.percent!=n?(An.splice(E,1),l=1):f=b,t.attr(b.totalOrigin);break}}else i=+g;for(var E=0,x=e.percents.length;E<x;E++){if(e.percents[E]==n||e.percents[E]>i*e.top){n=e.percents[E],p=e.percents[E-1]||0,v=v/e.top*(n-p),h=e.percents[E+1],a=e.anim[n];break}i&&t.attr(e.anim[e.percents[E]])}if(!!a){if(!f){for(var T in a)if(a[C](T))if(ht[C](T)||t.paper.customAttributes[C](T)){m[T]=t.attr(T),m[T]==null&&(m[T]=ct[T]),g[T]=a[T];switch(ht[T]){case J:y[T]=(g[T]-m[T])/v;break;case"colour":m[T]=w.getRGB(m[T]);var N=w.getRGB(g[T]);y[T]={r:(N.r-m[T].r)/v,g:(N.g-m[T].g)/v,b:(N.b-m[T].b)/v};break;case"path":var k=Qt(m[T],g[T]),L=k[1];m[T]=k[0],y[T]=[];for(E=0,x=m[T].length;E<x;E++){y[T][E]=[0];for(var A=1,O=m[T][E].length;A<O;A++)y[T][E][A]=(L[E][A]-m[T][E][A])/v}break;case"transform":var M=t._,_=an(M[T],g[T]);if(_){m[T]=_.from,g[T]=_.to,y[T]=[],y[T].real=!0;for(E=0,x=m[T].length;E<x;E++){y[T][E]=[m[T][E][0]];for(A=1,O=m[T][E].length;A<O;A++)y[T][E][A]=(g[T][E][A]-m[T][E][A])/v}}else{var P=t.matrix||new o,H={_:{transform:M.transform},getBBox:function(){return t.getBBox(1)}};m[T]=[P.a,P.b,P.c,P.d,P.e,P.f],on(H,g[T]),g[T]=H._.transform,y[T]=[(H.matrix.a-P.a)/v,(H.matrix.b-P.b)/v,(H.matrix.c-P.c)/v,(H.matrix.d-P.d)/v,(H.matrix.e-P.e)/v,(H.matrix.f-P.f)/v]}break;case"csv":var B=j(a[T])[F](S),I=j(m[T])[F](S);if(T=="clip-rect"){m[T]=I,y[T]=[],E=I.length;while(E--)y[T][E]=(B[E]-m[T][E])/v}g[T]=B;break;default:B=[][D](a[T]),I=[][D](m[T]),y[T]=[],E=t.paper.customAttributes[T].length;while(E--)y[T][E]=((B[E]||0)-(I[E]||0))/v}}var q=a.easing,R=w.easing_formulas[q];if(!R){R=j(q).match(st);if(R&&R.length==5){var U=R;R=function(e){return r(e,+U[1],+U[2],+U[3],+U[4],v)}}else R=Nt}d=a.start||e.start||+(new Date),b={anim:e,percent:n,timestamp:d,start:d+(e.del||0),status:0,initstatus:i||0,stop:!1,ms:v,easing:R,from:m,diff:y,to:g,el:t,callback:a.callback,prev:p,next:h,repeat:u||e.times,origin:t.attr(),totalOrigin:s},An.push(b);if(i&&!f&&!l){b.stop=!0,b.start=new Date-v*i;if(An.length==1)return Mn()}l&&(b.start=new Date-b.ms*i),An.length==1&&On(Mn)}else f.initstatus=i,f.start=new Date-f.ms*i;eve("raphael.anim.start."+t.id,t,e)}}function n(e,t){var n=[],r={};this.ms=t,this.times=1;if(e){for(var i in e)e[C](i)&&(r[at(i)]=e[i],n.push(at(i)));n.sort(xt)}this.anim=r,this.top=n[n.length-1],this.percents=n}function r(e,t,n,r,i,s){function o(e,t){var n,r,i,s,o,u;for(i=e,u=0;u<8;u++){s=a(i)-e;if(X(s)<t)return i;o=(3*c*i+2*l)*i+f;if(X(o)<1e-6)break;i-=s/o}n=0,r=1,i=e;if(i<n)return n;if(i>r)return r;while(n<r){s=a(i);if(X(s-e)<t)return i;e>s?n=i:r=i,i=(r-n)/2+n}return i}function u(e,t){var n=o(e,t);return((d*n+p)*n+h)*n}function a(e){return((c*e+l)*e+f)*e}var f=3*t,l=3*(r-t)-f,c=1-f-l,h=3*n,p=3*(i-n)-h,d=1-h-p;return u(e,1/(200*s))}function i(){return this.x+B+this.y+B+this.width+" × "+this.height}function s(){return this.x+B+this.y}function o(e,t,n,r,i,s){e!=null?(this.a=+e,this.b=+t,this.c=+n,this.d=+r,this.e=+i,this.f=+s):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0)}function u(e,t,n){e=w._path2curve(e),t=w._path2curve(t);var r,i,s,o,u,f,l,c,h,p,d=n?0:[];for(var v=0,m=e.length;v<m;v++){var g=e[v];if(g[0]=="M")r=u=g[1],i=f=g[2];else{g[0]=="C"?(h=[r,i].concat(g.slice(1)),r=h[6],i=h[7]):(h=[r,i,r,i,u,f,u,f],r=u,i=f);for(var y=0,b=t.length;y<b;y++){var E=t[y];if(E[0]=="M")s=l=E[1],o=c=E[2];else{E[0]=="C"?(p=[s,o].concat(E.slice(1)),s=p[6],o=p[7]):(p=[s,o,s,o,l,c,l,c],s=l,o=c);var S=a(h,p,n);if(n)d+=S;else{for(var x=0,T=S.length;x<T;x++)S[x].segment1=v,S[x].segment2=y,S[x].bez1=h,S[x].bez2=p;d=d.concat(S)}}}}}return d}function a(e,t,n){var r=w.bezierBBox(e),i=w.bezierBBox(t);if(!w.isBBoxIntersect(r,i))return n?0:[];var s=p.apply(0,e),o=p.apply(0,t),u=~~(s/5),a=~~(o/5),f=[],l=[],h={},d=n?0:[];for(var v=0;v<u+1;v++){var m=w.findDotsAtSegment.apply(w,e.concat(v/u));f.push({x:m.x,y:m.y,t:v/u})}for(v=0;v<a+1;v++)m=w.findDotsAtSegment.apply(w,t.concat(v/a)),l.push({x:m.x,y:m.y,t:v/a});for(v=0;v<u;v++)for(var g=0;g<a;g++){var y=f[v],b=f[v+1],E=l[g],S=l[g+1],x=X(b.x-y.x)<.001?"y":"x",T=X(S.x-E.x)<.001?"y":"x",N=c(y.x,y.y,b.x,b.y,E.x,E.y,S.x,S.y);if(N){if(h[N.x.toFixed(4)]==N.y.toFixed(4))continue;h[N.x.toFixed(4)]=N.y.toFixed(4);var C=y.t+X((N[x]-y[x])/(b[x]-y[x]))*(b.t-y.t),k=E.t+X((N[T]-E[T])/(S[T]-E[T]))*(S.t-E.t);C>=0&&C<=1&&k>=0&&k<=1&&(n?d++:d.push({x:N.x,y:N.y,t1:C,t2:k}))}}return d}function f(e,t){return a(e,t,1)}function l(e,t){return a(e,t)}function c(e,t,n,r,i,s,o,u){if(!(z(e,n)<W(i,o)||W(e,n)>z(i,o)||z(t,r)<W(s,u)||W(t,r)>z(s,u))){var a=(e*r-t*n)*(i-o)-(e-n)*(i*u-s*o),f=(e*r-t*n)*(s-u)-(t-r)*(i*u-s*o),l=(e-n)*(s-u)-(t-r)*(i-o);if(!l)return;var c=a/l,h=f/l,p=+c.toFixed(2),d=+h.toFixed(2);if(p<+W(e,n).toFixed(2)||p>+z(e,n).toFixed(2)||p<+W(i,o).toFixed(2)||p>+z(i,o).toFixed(2)||d<+W(t,r).toFixed(2)||d>+z(t,r).toFixed(2)||d<+W(s,u).toFixed(2)||d>+z(s,u).toFixed(2))return;return{x:c,y:h}}}function h(e,t,n,r,i,s,o,u,a){if(!(a<0||p(e,t,n,r,i,s,o,u)<a)){var f=1,l=f/2,c=f-l,h,d=.01;h=p(e,t,n,r,i,s,o,u,c);while(X(h-a)>d)l/=2,c+=(h<a?1:-1)*l,h=p(e,t,n,r,i,s,o,u,c);return c}}function p(e,t,n,r,i,s,o,u,a){a==null&&(a=1),a=a>1?1:a<0?0:a;var f=a/2,l=12,c=[-0.1252,.1252,-0.3678,.3678,-0.5873,.5873,-0.7699,.7699,-0.9041,.9041,-0.9816,.9816],h=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],p=0;for(var v=0;v<l;v++){var m=f*c[v]+f,g=d(m,e,n,i,o),y=d(m,t,r,s,u),b=g*g+y*y;p+=h[v]*U.sqrt(b)}return f*p}function d(e,t,n,r,i){var s=-3*t+9*n-9*r+3*i,o=e*s+6*t-12*n+6*r;return e*o-3*t+3*n}function v(e,t){var n=[];for(var r=0,i=e.length;i-2*!t>r;r+=2){var s=[{x:+e[r-2],y:+e[r-1]},{x:+e[r],y:+e[r+1]},{x:+e[r+2],y:+e[r+3]},{x:+e[r+4],y:+e[r+5]}];t?r?i-4==r?s[3]={x:+e[0],y:+e[1]}:i-2==r&&(s[2]={x:+e[0],y:+e[1]},s[3]={x:+e[2],y:+e[3]}):s[0]={x:+e[i-2],y:+e[i-1]}:i-4==r?s[3]=s[2]:r||(s[0]={x:+e[r],y:+e[r+1]}),n.push(["C",(-s[0].x+6*s[1].x+s[2].x)/6,(-s[0].y+6*s[1].y+s[2].y)/6,(s[1].x+6*s[2].x-s[3].x)/6,(s[1].y+6*s[2].y-s[3].y)/6,s[2].x,s[2].y])}return n}function m(){return this.hex}function g(e,t,n){function r(){var i=Array.prototype.slice.call(arguments,0),s=i.join("␀"),o=r.cache=r.cache||{},u=r.count=r.count||[];return o[C](s)?(y(u,s),n?n(o[s]):o[s]):(u.length>=1e3&&delete o[u.shift()],u.push(s),o[s]=e[_](t,i),n?n(o[s]):o[s])}return r}function y(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return e.push(e.splice(n,1)[0])}function b(e){if(Object(e)!==e)return e;var t=new e.constructor;for(var n in e)e[C](n)&&(t[n]=b(e[n]));return t}function w(e){if(w.is(e,"function"))return E?e():eve.on("raphael.DOMload",e);if(w.is(e,Q))return w._engine.create[_](w,e.splice(0,3+w.is(e[0],J))).add(e);var t=Array.prototype.slice.call(arguments,0);if(w.is(t[t.length-1],"function")){var n=t.pop();return E?n.call(w._engine.create[_](w,t)):eve.on("raphael.DOMload",function(){n.call(w._engine.create[_](w,t))})}return w._engine.create[_](w,arguments)}w.version="2.1.0",w.eve=eve;var E,S=/[, ]+/,x={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},T=/\{(\d+)\}/g,N="prototype",C="hasOwnProperty",k={doc:document,win:window},L={was:Object.prototype[C].call(k.win,"Raphael"),is:k.win.Raphael},A=function(){this.ca=this.customAttributes={}},O,M="appendChild",_="apply",D="concat",P="createTouch"in k.doc,H="",B=" ",j=String,F="split",I="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[F](B),q={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},R=j.prototype.toLowerCase,U=Math,z=U.max,W=U.min,X=U.abs,V=U.pow,$=U.PI,J="number",K="string",Q="array",G="toString",Y="fill",Z=Object.prototype.toString,et={},tt="push",nt=w._ISURL=/^url\(['"]?([^\)]+?)['"]?\)$/i,rt=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,it={NaN:1,Infinity:1,"-Infinity":1},st=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ot=U.round,ut="setAttribute",at=parseFloat,ft=parseInt,lt=j.prototype.toUpperCase,ct=w._availableAttrs={"arrow-end":"none","arrow-start":"none",blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/","letter-spacing":0,opacity:1,path:"M0,0",r:0,rx:0,ry:0,src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",transform:"",width:0,x:0,y:0},ht=w._availableAnimAttrs={blur:J,"clip-rect":"csv",cx:J,cy:J,fill:"colour","fill-opacity":J,"font-size":J,height:J,opacity:J,path:"path",r:J,rx:J,ry:J,stroke:"colour","stroke-opacity":J,"stroke-width":J,transform:"transform",width:J,x:J,y:J},pt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]/g,dt=/[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/,vt={hs:1,rg:1},mt=/,?([achlmqrstvxz]),?/gi,gt=/([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,yt=/([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/ig,bt=/(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/ig,wt=w._radial_gradient=/^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/,Et={},St=function(e,t){return e.key-t.key},xt=function(e,t){return at(e)-at(t)},Tt=function(){},Nt=function(e){return e},Ct=w._rectPath=function(e,t,n,r,i){return i?[["M",e+i,t],["l",n-i*2,0],["a",i,i,0,0,1,i,i],["l",0,r-i*2],["a",i,i,0,0,1,-i,i],["l",i*2-n,0],["a",i,i,0,0,1,-i,-i],["l",0,i*2-r],["a",i,i,0,0,1,i,-i],["z"]]:[["M",e,t],["l",n,0],["l",0,r],["l",-n,0],["z"]]},kt=function(e,t,n,r){return r==null&&(r=n),[["M",e,t],["m",0,-r],["a",n,r,0,1,1,0,2*r],["a",n,r,0,1,1,0,-2*r],["z"]]},Lt=w._getPath={path:function(e){return e.attr("path")},circle:function(e){var t=e.attrs;return kt(t.cx,t.cy,t.r)},ellipse:function(e){var t=e.attrs;return kt(t.cx,t.cy,t.rx,t.ry)},rect:function(e){var t=e.attrs;return Ct(t.x,t.y,t.width,t.height,t.r)},image:function(e){var t=e.attrs;return Ct(t.x,t.y,t.width,t.height)},text:function(e){var t=e._getBBox();return Ct(t.x,t.y,t.width,t.height)}},At=w.mapPath=function(e,t){if(!t)return e;var n,r,i,s,o,u,a;e=Qt(e);for(i=0,o=e.length;i<o;i++){a=e[i];for(s=1,u=a.length;s<u;s+=2)n=t.x(a[s],a[s+1]),r=t.y(a[s],a[s+1]),a[s]=n,a[s+1]=r}return e};w._g=k,w.type=k.win.SVGAngle||k.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML";if(w.type=="VML"){var Ot=k.doc.createElement("div"),Mt;Ot.innerHTML='<v:shape adj="1"/>',Mt=Ot.firstChild,Mt.style.behavior="url(#default#VML)";if(!Mt||typeof Mt.adj!="object")return w.type=H;Ot=null}w.svg=!(w.vml=w.type=="VML"),w._Paper=A,w.fn=O=A.prototype=w.prototype,w._id=0,w._oid=0,w.is=function(e,t){return t=R.call(t),t=="finite"?!it[C](+e):t=="array"?e instanceof Array:t=="null"&&e===null||t==typeof e&&e!==null||t=="object"&&e===Object(e)||t=="array"&&Array.isArray&&Array.isArray(e)||Z.call(e).slice(8,-1).toLowerCase()==t},w.angle=function(e,t,n,r,i,s){if(i==null){var o=e-n,u=t-r;return!o&&!u?0:(180+U.atan2(-u,-o)*180/$+360)%360}return w.angle(e,t,i,s)-w.angle(n,r,i,s)},w.rad=function(e){return e%360*$/180},w.deg=function(e){return e*180/$%360},w.snapTo=function(e,t,n){n=w.is(n,"finite")?n:10;if(w.is(e,Q)){var r=e.length;while(r--)if(X(e[r]-t)<=n)return e[r]}else{e=+e;var i=t%e;if(i<n)return t-i;if(i>e-n)return t-i+e}return t};var _t=w.createUUID=function(e,t){return function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(e,t).toUpperCase()}}(/[xy]/g,function(e){var t=U.random()*16|0,n=e=="x"?t:t&3|8;return n.toString(16)});w.setWindow=function(e){eve("raphael.setWindow",w,k.win,e),k.win=e,k.doc=k.win.document,w._engine.initWin&&w._engine.initWin(k.win)};var Dt=function(e){if(w.vml){var t=/^\s+|\s+$/g,n;try{var r=new ActiveXObject("htmlfile");r.write("<body>"),r.close(),n=r.body}catch(i){n=createPopup().document.body}var s=n.createTextRange();Dt=g(function(e){try{n.style.color=j(e).replace(t,H);var r=s.queryCommandValue("ForeColor");return r=(r&255)<<16|r&65280|(r&16711680)>>>16,"#"+("000000"+r.toString(16)).slice(-6)}catch(i){return"none"}})}else{var o=k.doc.createElement("i");o.title="Raphaël Colour Picker",o.style.display="none",k.doc.body.appendChild(o),Dt=g(function(e){return o.style.color=e,k.doc.defaultView.getComputedStyle(o,H).getPropertyValue("color")})}return Dt(e)},Pt=function(){return"hsb("+[this.h,this.s,this.b]+")"},Ht=function(){return"hsl("+[this.h,this.s,this.l]+")"},Bt=function(){return this.hex},jt=function(e,t,n){t==null&&w.is(e,"object")&&"r"in e&&"g"in e&&"b"in e&&(n=e.b,t=e.g,e=e.r);if(t==null&&w.is(e,K)){var r=w.getRGB(e);e=r.r,t=r.g,n=r.b}if(e>1||t>1||n>1)e/=255,t/=255,n/=255;return[e,t,n]},Ft=function(e,t,n,r){e*=255,t*=255,n*=255;var i={r:e,g:t,b:n,hex:w.rgb(e,t,n),toString:Bt};return w.is(r,"finite")&&(i.opacity=r),i};w.color=function(e){var t;return w.is(e,"object")&&"h"in e&&"s"in e&&"b"in e?(t=w.hsb2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):w.is(e,"object")&&"h"in e&&"s"in e&&"l"in e?(t=w.hsl2rgb(e),e.r=t.r,e.g=t.g,e.b=t.b,e.hex=t.hex):(w.is(e,"string")&&(e=w.getRGB(e)),w.is(e,"object")&&"r"in e&&"g"in e&&"b"in e?(t=w.rgb2hsl(e),e.h=t.h,e.s=t.s,e.l=t.l,t=w.rgb2hsb(e),e.v=t.b):(e={hex:"none"},e.r=e.g=e.b=e.h=e.s=e.v=e.l=-1)),e.toString=Bt,e},w.hsb2rgb=function(e,t,n,r){this.is(e,"object")&&"h"in e&&"s"in e&&"b"in e&&(n=e.b,t=e.s,e=e.h,r=e.o),e*=360;var i,s,o,u,a;return e=e%360/60,a=n*t,u=a*(1-X(e%2-1)),i=s=o=n-a,e=~~e,i+=[a,u,0,0,u,a][e],s+=[u,a,a,u,0,0][e],o+=[0,0,u,a,a,u][e],Ft(i,s,o,r)},w.hsl2rgb=function(e,t,n,r){this.is(e,"object")&&"h"in e&&"s"in e&&"l"in e&&(n=e.l,t=e.s,e=e.h);if(e>1||t>1||n>1)e/=360,t/=100,n/=100;e*=360;var i,s,o,u,a;return e=e%360/60,a=2*t*(n<.5?n:1-n),u=a*(1-X(e%2-1)),i=s=o=n-a/2,e=~~e,i+=[a,u,0,0,u,a][e],s+=[u,a,a,u,0,0][e],o+=[0,0,u,a,a,u][e],Ft(i,s,o,r)},w.rgb2hsb=function(e,t,n){n=jt(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,s,o;return s=z(e,t,n),o=s-W(e,t,n),r=o==0?null:s==e?(t-n)/o:s==t?(n-e)/o+2:(e-t)/o+4,r=(r+360)%6*60/360,i=o==0?0:o/s,{h:r,s:i,b:s,toString:Pt}},w.rgb2hsl=function(e,t,n){n=jt(e,t,n),e=n[0],t=n[1],n=n[2];var r,i,s,o,u,a;return o=z(e,t,n),u=W(e,t,n),a=o-u,r=a==0?null:o==e?(t-n)/a:o==t?(n-e)/a+2:(e-t)/a+4,r=(r+360)%6*60/360,s=(o+u)/2,i=a==0?0:s<.5?a/(2*s):a/(2-2*s),{h:r,s:i,l:s,toString:Ht}},w._path2string=function(){return this.join(",").replace(mt,"$1")};var It=w._preload=function(e,t){var n=k.doc.createElement("img");n.style.cssText="position:absolute;left:-9999em;top:-9999em",n.onload=function(){t.call(this),this.onload=null,k.doc.body.removeChild(this)},n.onerror=function(
){k.doc.body.removeChild(this)},k.doc.body.appendChild(n),n.src=e};w.getRGB=g(function(e){if(!e||!!((e=j(e)).indexOf("-")+1))return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:m};if(e=="none")return{r:-1,g:-1,b:-1,hex:"none",toString:m};!vt[C](e.toLowerCase().substring(0,2))&&e.charAt()!="#"&&(e=Dt(e));var t,n,r,i,s,o,u,a=e.match(rt);return a?(a[2]&&(i=ft(a[2].substring(5),16),r=ft(a[2].substring(3,5),16),n=ft(a[2].substring(1,3),16)),a[3]&&(i=ft((o=a[3].charAt(3))+o,16),r=ft((o=a[3].charAt(2))+o,16),n=ft((o=a[3].charAt(1))+o,16)),a[4]&&(u=a[4][F](dt),n=at(u[0]),u[0].slice(-1)=="%"&&(n*=2.55),r=at(u[1]),u[1].slice(-1)=="%"&&(r*=2.55),i=at(u[2]),u[2].slice(-1)=="%"&&(i*=2.55),a[1].toLowerCase().slice(0,4)=="rgba"&&(s=at(u[3])),u[3]&&u[3].slice(-1)=="%"&&(s/=100)),a[5]?(u=a[5][F](dt),n=at(u[0]),u[0].slice(-1)=="%"&&(n*=2.55),r=at(u[1]),u[1].slice(-1)=="%"&&(r*=2.55),i=at(u[2]),u[2].slice(-1)=="%"&&(i*=2.55),(u[0].slice(-3)=="deg"||u[0].slice(-1)=="°")&&(n/=360),a[1].toLowerCase().slice(0,4)=="hsba"&&(s=at(u[3])),u[3]&&u[3].slice(-1)=="%"&&(s/=100),w.hsb2rgb(n,r,i,s)):a[6]?(u=a[6][F](dt),n=at(u[0]),u[0].slice(-1)=="%"&&(n*=2.55),r=at(u[1]),u[1].slice(-1)=="%"&&(r*=2.55),i=at(u[2]),u[2].slice(-1)=="%"&&(i*=2.55),(u[0].slice(-3)=="deg"||u[0].slice(-1)=="°")&&(n/=360),a[1].toLowerCase().slice(0,4)=="hsla"&&(s=at(u[3])),u[3]&&u[3].slice(-1)=="%"&&(s/=100),w.hsl2rgb(n,r,i,s)):(a={r:n,g:r,b:i,toString:m},a.hex="#"+(16777216|i|r<<8|n<<16).toString(16).slice(1),w.is(s,"finite")&&(a.opacity=s),a)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:m}},w),w.hsb=g(function(e,t,n){return w.hsb2rgb(e,t,n).hex}),w.hsl=g(function(e,t,n){return w.hsl2rgb(e,t,n).hex}),w.rgb=g(function(e,t,n){return"#"+(16777216|n|t<<8|e<<16).toString(16).slice(1)}),w.getColor=function(e){var t=this.getColor.start=this.getColor.start||{h:0,s:1,b:e||.75},n=this.hsb2rgb(t.h,t.s,t.b);return t.h+=.075,t.h>1&&(t.h=0,t.s-=.2,t.s<=0&&(this.getColor.start={h:0,s:1,b:t.b})),n.hex},w.getColor.reset=function(){delete this.start},w.parsePathString=function(e){if(!e)return null;var t=qt(e);if(t.arr)return Ut(t.arr);var n={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},r=[];return w.is(e,Q)&&w.is(e[0],Q)&&(r=Ut(e)),r.length||j(e).replace(gt,function(e,t,i){var s=[],o=t.toLowerCase();i.replace(bt,function(e,t){t&&s.push(+t)}),o=="m"&&s.length>2&&(r.push([t][D](s.splice(0,2))),o="l",t=t=="m"?"l":"L");if(o=="r")r.push([t][D](s));else while(s.length>=n[o]){r.push([t][D](s.splice(0,n[o])));if(!n[o])break}}),r.toString=w._path2string,t.arr=Ut(r),r},w.parseTransformString=g(function(e){if(!e)return null;var t={r:3,s:4,t:2,m:6},n=[];return w.is(e,Q)&&w.is(e[0],Q)&&(n=Ut(e)),n.length||j(e).replace(yt,function(e,t,r){var i=[],s=R.call(t);r.replace(bt,function(e,t){t&&i.push(+t)}),n.push([t][D](i))}),n.toString=w._path2string,n});var qt=function(e){var t=qt.ps=qt.ps||{};return t[e]?t[e].sleep=100:t[e]={sleep:100},setTimeout(function(){for(var n in t)t[C](n)&&n!=e&&(t[n].sleep--,!t[n].sleep&&delete t[n])}),t[e]};w.findDotsAtSegment=function(e,t,n,r,i,s,o,u,a){var f=1-a,l=V(f,3),c=V(f,2),h=a*a,p=h*a,d=l*e+c*3*a*n+f*3*a*a*i+p*o,v=l*t+c*3*a*r+f*3*a*a*s+p*u,m=e+2*a*(n-e)+h*(i-2*n+e),g=t+2*a*(r-t)+h*(s-2*r+t),y=n+2*a*(i-n)+h*(o-2*i+n),b=r+2*a*(s-r)+h*(u-2*s+r),w=f*e+a*n,E=f*t+a*r,S=f*i+a*o,x=f*s+a*u,T=90-U.atan2(m-y,g-b)*180/$;return(m>y||g<b)&&(T+=180),{x:d,y:v,m:{x:m,y:g},n:{x:y,y:b},start:{x:w,y:E},end:{x:S,y:x},alpha:T}},w.bezierBBox=function(e,t,n,r,i,s,o,u){w.is(e,"array")||(e=[e,t,n,r,i,s,o,u]);var a=Kt.apply(null,e);return{x:a.min.x,y:a.min.y,x2:a.max.x,y2:a.max.y,width:a.max.x-a.min.x,height:a.max.y-a.min.y}},w.isPointInsideBBox=function(e,t,n){return t>=e.x&&t<=e.x2&&n>=e.y&&n<=e.y2},w.isBBoxIntersect=function(e,t){var n=w.isPointInsideBBox;return n(t,e.x,e.y)||n(t,e.x2,e.y)||n(t,e.x,e.y2)||n(t,e.x2,e.y2)||n(e,t.x,t.y)||n(e,t.x2,t.y)||n(e,t.x,t.y2)||n(e,t.x2,t.y2)||(e.x<t.x2&&e.x>t.x||t.x<e.x2&&t.x>e.x)&&(e.y<t.y2&&e.y>t.y||t.y<e.y2&&t.y>e.y)},w.pathIntersection=function(e,t){return u(e,t)},w.pathIntersectionNumber=function(e,t){return u(e,t,1)},w.isPointInsidePath=function(e,t,n){var r=w.pathBBox(e);return w.isPointInsideBBox(r,t,n)&&u(e,[["M",t,n],["H",r.x2+10]],1)%2==1},w._removedFactory=function(e){return function(){eve("raphael.log",null,"Raphaël: you are calling to method “"+e+"” of removed object",e)}};var Rt=w.pathBBox=function(e){var t=qt(e);if(t.bbox)return t.bbox;if(!e)return{x:0,y:0,width:0,height:0,x2:0,y2:0};e=Qt(e);var n=0,r=0,i=[],s=[],o;for(var u=0,a=e.length;u<a;u++){o=e[u];if(o[0]=="M")n=o[1],r=o[2],i.push(n),s.push(r);else{var f=Kt(n,r,o[1],o[2],o[3],o[4],o[5],o[6]);i=i[D](f.min.x,f.max.x),s=s[D](f.min.y,f.max.y),n=o[5],r=o[6]}}var l=W[_](0,i),c=W[_](0,s),h=z[_](0,i),p=z[_](0,s),d={x:l,y:c,x2:h,y2:p,width:h-l,height:p-c};return t.bbox=b(d),d},Ut=function(e){var t=b(e);return t.toString=w._path2string,t},zt=w._pathToRelative=function(e){var t=qt(e);if(t.rel)return Ut(t.rel);if(!w.is(e,Q)||!w.is(e&&e[0],Q))e=w.parsePathString(e);var n=[],r=0,i=0,s=0,o=0,u=0;e[0][0]=="M"&&(r=e[0][1],i=e[0][2],s=r,o=i,u++,n.push(["M",r,i]));for(var a=u,f=e.length;a<f;a++){var l=n[a]=[],c=e[a];if(c[0]!=R.call(c[0])){l[0]=R.call(c[0]);switch(l[0]){case"a":l[1]=c[1],l[2]=c[2],l[3]=c[3],l[4]=c[4],l[5]=c[5],l[6]=+(c[6]-r).toFixed(3),l[7]=+(c[7]-i).toFixed(3);break;case"v":l[1]=+(c[1]-i).toFixed(3);break;case"m":s=c[1],o=c[2];default:for(var h=1,p=c.length;h<p;h++)l[h]=+(c[h]-(h%2?r:i)).toFixed(3)}}else{l=n[a]=[],c[0]=="m"&&(s=c[1]+r,o=c[2]+i);for(var d=0,v=c.length;d<v;d++)n[a][d]=c[d]}var m=n[a].length;switch(n[a][0]){case"z":r=s,i=o;break;case"h":r+=+n[a][m-1];break;case"v":i+=+n[a][m-1];break;default:r+=+n[a][m-2],i+=+n[a][m-1]}}return n.toString=w._path2string,t.rel=Ut(n),n},Wt=w._pathToAbsolute=function(e){var t=qt(e);if(t.abs)return Ut(t.abs);if(!w.is(e,Q)||!w.is(e&&e[0],Q))e=w.parsePathString(e);if(!e||!e.length)return[["M",0,0]];var n=[],r=0,i=0,s=0,o=0,u=0;e[0][0]=="M"&&(r=+e[0][1],i=+e[0][2],s=r,o=i,u++,n[0]=["M",r,i]);var a=e.length==3&&e[0][0]=="M"&&e[1][0].toUpperCase()=="R"&&e[2][0].toUpperCase()=="Z";for(var f,l,c=u,h=e.length;c<h;c++){n.push(f=[]),l=e[c];if(l[0]!=lt.call(l[0])){f[0]=lt.call(l[0]);switch(f[0]){case"A":f[1]=l[1],f[2]=l[2],f[3]=l[3],f[4]=l[4],f[5]=l[5],f[6]=+(l[6]+r),f[7]=+(l[7]+i);break;case"V":f[1]=+l[1]+i;break;case"H":f[1]=+l[1]+r;break;case"R":var p=[r,i][D](l.slice(1));for(var d=2,m=p.length;d<m;d++)p[d]=+p[d]+r,p[++d]=+p[d]+i;n.pop(),n=n[D](v(p,a));break;case"M":s=+l[1]+r,o=+l[2]+i;default:for(d=1,m=l.length;d<m;d++)f[d]=+l[d]+(d%2?r:i)}}else if(l[0]=="R")p=[r,i][D](l.slice(1)),n.pop(),n=n[D](v(p,a)),f=["R"][D](l.slice(-2));else for(var g=0,y=l.length;g<y;g++)f[g]=l[g];switch(f[0]){case"Z":r=s,i=o;break;case"H":r=f[1];break;case"V":i=f[1];break;case"M":s=f[f.length-2],o=f[f.length-1];default:r=f[f.length-2],i=f[f.length-1]}}return n.toString=w._path2string,t.abs=Ut(n),n},Xt=function(e,t,n,r){return[e,t,n,r,n,r]},Vt=function(e,t,n,r,i,s){var o=1/3,u=2/3;return[o*e+u*n,o*t+u*r,o*i+u*n,o*s+u*r,i,s]},$t=function(e,t,n,r,i,s,o,u,a,f){var l=$*120/180,c=$/180*(+i||0),h=[],p,d=g(function(e,t,n){var r=e*U.cos(n)-t*U.sin(n),i=e*U.sin(n)+t*U.cos(n);return{x:r,y:i}});if(!f){p=d(e,t,-c),e=p.x,t=p.y,p=d(u,a,-c),u=p.x,a=p.y;var v=U.cos($/180*i),m=U.sin($/180*i),y=(e-u)/2,b=(t-a)/2,w=y*y/(n*n)+b*b/(r*r);w>1&&(w=U.sqrt(w),n=w*n,r=w*r);var E=n*n,S=r*r,x=(s==o?-1:1)*U.sqrt(X((E*S-E*b*b-S*y*y)/(E*b*b+S*y*y))),T=x*n*b/r+(e+u)/2,N=x*-r*y/n+(t+a)/2,C=U.asin(((t-N)/r).toFixed(9)),k=U.asin(((a-N)/r).toFixed(9));C=e<T?$-C:C,k=u<T?$-k:k,C<0&&(C=$*2+C),k<0&&(k=$*2+k),o&&C>k&&(C-=$*2),!o&&k>C&&(k-=$*2)}else C=f[0],k=f[1],T=f[2],N=f[3];var L=k-C;if(X(L)>l){var A=k,O=u,M=a;k=C+l*(o&&k>C?1:-1),u=T+n*U.cos(k),a=N+r*U.sin(k),h=$t(u,a,n,r,i,0,o,O,M,[k,A,T,N])}L=k-C;var _=U.cos(C),P=U.sin(C),H=U.cos(k),B=U.sin(k),j=U.tan(L/4),I=4/3*n*j,q=4/3*r*j,R=[e,t],z=[e+I*P,t-q*_],W=[u+I*B,a-q*H],V=[u,a];z[0]=2*R[0]-z[0],z[1]=2*R[1]-z[1];if(f)return[z,W,V][D](h);h=[z,W,V][D](h).join()[F](",");var J=[];for(var K=0,Q=h.length;K<Q;K++)J[K]=K%2?d(h[K-1],h[K],c).y:d(h[K],h[K+1],c).x;return J},Jt=function(e,t,n,r,i,s,o,u,a){var f=1-a;return{x:V(f,3)*e+V(f,2)*3*a*n+f*3*a*a*i+V(a,3)*o,y:V(f,3)*t+V(f,2)*3*a*r+f*3*a*a*s+V(a,3)*u}},Kt=g(function(e,t,n,r,i,s,o,u){var a=i-2*n+e-(o-2*i+n),f=2*(n-e)-2*(i-n),l=e-n,c=(-f+U.sqrt(f*f-4*a*l))/2/a,h=(-f-U.sqrt(f*f-4*a*l))/2/a,p=[t,u],d=[e,o],v;return X(c)>"1e12"&&(c=.5),X(h)>"1e12"&&(h=.5),c>0&&c<1&&(v=Jt(e,t,n,r,i,s,o,u,c),d.push(v.x),p.push(v.y)),h>0&&h<1&&(v=Jt(e,t,n,r,i,s,o,u,h),d.push(v.x),p.push(v.y)),a=s-2*r+t-(u-2*s+r),f=2*(r-t)-2*(s-r),l=t-r,c=(-f+U.sqrt(f*f-4*a*l))/2/a,h=(-f-U.sqrt(f*f-4*a*l))/2/a,X(c)>"1e12"&&(c=.5),X(h)>"1e12"&&(h=.5),c>0&&c<1&&(v=Jt(e,t,n,r,i,s,o,u,c),d.push(v.x),p.push(v.y)),h>0&&h<1&&(v=Jt(e,t,n,r,i,s,o,u,h),d.push(v.x),p.push(v.y)),{min:{x:W[_](0,d),y:W[_](0,p)},max:{x:z[_](0,d),y:z[_](0,p)}}}),Qt=w._path2curve=g(function(e,t){var n=!t&&qt(e);if(!t&&n.curve)return Ut(n.curve);var r=Wt(e),i=t&&Wt(t),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=function(e,t){var n,r;if(!e)return["C",t.x,t.y,t.x,t.y,t.x,t.y];!(e[0]in{T:1,Q:1})&&(t.qx=t.qy=null);switch(e[0]){case"M":t.X=e[1],t.Y=e[2];break;case"A":e=["C"][D]($t[_](0,[t.x,t.y][D](e.slice(1))));break;case"S":n=t.x+(t.x-(t.bx||t.x)),r=t.y+(t.y-(t.by||t.y)),e=["C",n,r][D](e.slice(1));break;case"T":t.qx=t.x+(t.x-(t.qx||t.x)),t.qy=t.y+(t.y-(t.qy||t.y)),e=["C"][D](Vt(t.x,t.y,t.qx,t.qy,e[1],e[2]));break;case"Q":t.qx=e[1],t.qy=e[2],e=["C"][D](Vt(t.x,t.y,e[1],e[2],e[3],e[4]));break;case"L":e=["C"][D](Xt(t.x,t.y,e[1],e[2]));break;case"H":e=["C"][D](Xt(t.x,t.y,e[1],t.y));break;case"V":e=["C"][D](Xt(t.x,t.y,t.x,e[1]));break;case"Z":e=["C"][D](Xt(t.x,t.y,t.X,t.Y))}return e},a=function(e,t){if(e[t].length>7){e[t].shift();var n=e[t];while(n.length)e.splice(t++,0,["C"][D](n.splice(0,6)));e.splice(t,1),c=z(r.length,i&&i.length||0)}},f=function(e,t,n,s,o){e&&t&&e[o][0]=="M"&&t[o][0]!="M"&&(t.splice(o,0,["M",s.x,s.y]),n.bx=0,n.by=0,n.x=e[o][1],n.y=e[o][2],c=z(r.length,i&&i.length||0))};for(var l=0,c=z(r.length,i&&i.length||0);l<c;l++){r[l]=u(r[l],s),a(r,l),i&&(i[l]=u(i[l],o)),i&&a(i,l),f(r,i,s,o,l),f(i,r,o,s,l);var h=r[l],p=i&&i[l],d=h.length,v=i&&p.length;s.x=h[d-2],s.y=h[d-1],s.bx=at(h[d-4])||s.x,s.by=at(h[d-3])||s.y,o.bx=i&&(at(p[v-4])||o.x),o.by=i&&(at(p[v-3])||o.y),o.x=i&&p[v-2],o.y=i&&p[v-1]}return i||(n.curve=Ut(r)),i?[r,i]:r},null,Ut),Gt=w._parseDots=g(function(e){var t=[];for(var n=0,r=e.length;n<r;n++){var i={},s=e[n].match(/^([^:]*):?([\d\.]*)/);i.color=w.getRGB(s[1]);if(i.color.error)return null;i.color=i.color.hex,s[2]&&(i.offset=s[2]+"%"),t.push(i)}for(n=1,r=t.length-1;n<r;n++)if(!t[n].offset){var o=at(t[n-1].offset||0),u=0;for(var a=n+1;a<r;a++)if(t[a].offset){u=t[a].offset;break}u||(u=100,a=r),u=at(u);var f=(u-o)/(a-n+1);for(;n<a;n++)o+=f,t[n].offset=o+"%"}return t}),Yt=w._tear=function(e,t){e==t.top&&(t.top=e.prev),e==t.bottom&&(t.bottom=e.next),e.next&&(e.next.prev=e.prev),e.prev&&(e.prev.next=e.next)},Zt=w._tofront=function(e,t){t.top!==e&&(Yt(e,t),e.next=null,e.prev=t.top,t.top.next=e,t.top=e)},en=w._toback=function(e,t){t.bottom!==e&&(Yt(e,t),e.next=t.bottom,e.prev=null,t.bottom.prev=e,t.bottom=e)},tn=w._insertafter=function(e,t,n){Yt(e,n),t==n.top&&(n.top=e),t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e},nn=w._insertbefore=function(e,t,n){Yt(e,n),t==n.bottom&&(n.bottom=e),t.prev&&(t.prev.next=e),e.prev=t.prev,t.prev=e,e.next=t},rn=w.toMatrix=function(e,t){var n=Rt(e),r={_:{transform:H},getBBox:function(){return n}};return on(r,t),r.matrix},sn=w.transformPath=function(e,t){return At(e,rn(e,t))},on=w._extractTransform=function(e,t){if(t==null)return e._.transform;t=j(t).replace(/\.{3}|\u2026/g,e._.transform||H);var n=w.parseTransformString(t),r=0,i=0,s=0,u=1,a=1,f=e._,l=new o;f.transform=n||[];if(n)for(var c=0,h=n.length;c<h;c++){var p=n[c],d=p.length,v=j(p[0]).toLowerCase(),m=p[0]!=v,g=m?l.invert():0,y,b,E,S,x;v=="t"&&d==3?m?(y=g.x(0,0),b=g.y(0,0),E=g.x(p[1],p[2]),S=g.y(p[1],p[2]),l.translate(E-y,S-b)):l.translate(p[1],p[2]):v=="r"?d==2?(x=x||e.getBBox(1),l.rotate(p[1],x.x+x.width/2,x.y+x.height/2),r+=p[1]):d==4&&(m?(E=g.x(p[2],p[3]),S=g.y(p[2],p[3]),l.rotate(p[1],E,S)):l.rotate(p[1],p[2],p[3]),r+=p[1]):v=="s"?d==2||d==3?(x=x||e.getBBox(1),l.scale(p[1],p[d-1],x.x+x.width/2,x.y+x.height/2),u*=p[1],a*=p[d-1]):d==5&&(m?(E=g.x(p[3],p[4]),S=g.y(p[3],p[4]),l.scale(p[1],p[2],E,S)):l.scale(p[1],p[2],p[3],p[4]),u*=p[1],a*=p[2]):v=="m"&&d==7&&l.add(p[1],p[2],p[3],p[4],p[5],p[6]),f.dirtyT=1,e.matrix=l}e.matrix=l,f.sx=u,f.sy=a,f.deg=r,f.dx=i=l.e,f.dy=s=l.f,u==1&&a==1&&!r&&f.bbox?(f.bbox.x+=+i,f.bbox.y+=+s):f.dirtyT=1},un=function(e){var t=e[0];switch(t.toLowerCase()){case"t":return[t,0,0];case"m":return[t,1,0,0,1,0,0];case"r":return e.length==4?[t,0,e[2],e[3]]:[t,0];case"s":return e.length==5?[t,1,1,e[3],e[4]]:e.length==3?[t,1,1]:[t,1]}},an=w._equaliseTransform=function(e,t){t=j(t).replace(/\.{3}|\u2026/g,e),e=w.parseTransformString(e)||[],t=w.parseTransformString(t)||[];var n=z(e.length,t.length),r=[],i=[],s=0,o,u,a,f;for(;s<n;s++){a=e[s]||un(t[s]),f=t[s]||un(a);if(a[0]!=f[0]||a[0].toLowerCase()=="r"&&(a[2]!=f[2]||a[3]!=f[3])||a[0].toLowerCase()=="s"&&(a[3]!=f[3]||a[4]!=f[4]))return;r[s]=[],i[s]=[];for(o=0,u=z(a.length,f.length);o<u;o++)o in a&&(r[s][o]=a[o]),o in f&&(i[s][o]=f[o])}return{from:r,to:i}};w._getContainer=function(e,t,n,r){var i;i=r==null&&!w.is(e,"object")?k.doc.getElementById(e):e;if(i!=null)return i.tagName?t==null?{container:i,width:i.style.pixelWidth||i.offsetWidth,height:i.style.pixelHeight||i.offsetHeight}:{container:i,width:t,height:n}:{container:1,x:e,y:t,width:n,height:r}},w.pathToRelative=zt,w._engine={},w.path2curve=Qt,w.matrix=function(e,t,n,r,i,s){return new o(e,t,n,r,i,s)},function(e){function t(e){var t=U.sqrt(n(e));e[0]&&(e[0]/=t),e[1]&&(e[1]/=t)}function n(e){return e[0]*e[0]+e[1]*e[1]}e.add=function(e,t,n,r,i,s){var u=[[],[],[]],a=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],f=[[e,n,i],[t,r,s],[0,0,1]],l,c,h,p;e&&e instanceof o&&(f=[[e.a,e.c,e.e],[e.b,e.d,e.f],[0,0,1]]);for(l=0;l<3;l++)for(c=0;c<3;c++){p=0;for(h=0;h<3;h++)p+=a[l][h]*f[h][c];u[l][c]=p}this.a=u[0][0],this.b=u[1][0],this.c=u[0][1],this.d=u[1][1],this.e=u[0][2],this.f=u[1][2]},e.invert=function(){var e=this,t=e.a*e.d-e.b*e.c;return new o(e.d/t,-e.b/t,-e.c/t,e.a/t,(e.c*e.f-e.d*e.e)/t,(e.b*e.e-e.a*e.f)/t)},e.clone=function(){return new o(this.a,this.b,this.c,this.d,this.e,this.f)},e.translate=function(e,t){this.add(1,0,0,1,e,t)},e.scale=function(e,t,n,r){t==null&&(t=e),(n||r)&&this.add(1,0,0,1,n,r),this.add(e,0,0,t,0,0),(n||r)&&this.add(1,0,0,1,-n,-r)},e.rotate=function(e,t,n){e=w.rad(e),t=t||0,n=n||0;var r=+U.cos(e).toFixed(9),i=+U.sin(e).toFixed(9);this.add(r,i,-i,r,t,n),this.add(1,0,0,1,-t,-n)},e.x=function(e,t){return e*this.a+t*this.c+this.e},e.y=function(e,t){return e*this.b+t*this.d+this.f},e.get=function(e){return+this[j.fromCharCode(97+e)].toFixed(4)},e.toString=function(){return w.svg?"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")":[this.get(0),this.get(2),this.get(1),this.get(3),0,0].join()},e.toFilter=function(){return"progid:DXImageTransform.Microsoft.Matrix(M11="+this.get(0)+", M12="+this.get(2)+", M21="+this.get(1)+", M22="+this.get(3)+", Dx="+this.get(4)+", Dy="+this.get(5)+", sizingmethod='auto expand')"},e.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},e.split=function(){var e={};e.dx=this.e,e.dy=this.f;var r=[[this.a,this.c],[this.b,this.d]];e.scalex=U.sqrt(n(r[0])),t(r[0]),e.shear=r[0][0]*r[1][0]+r[0][1]*r[1][1],r[1]=[r[1][0]-r[0][0]*e.shear,r[1][1]-r[0][1]*e.shear],e.scaley=U.sqrt(n(r[1])),t(r[1]),e.shear/=e.scaley;var i=-r[0][1],s=r[1][1];return s<0?(e.rotate=w.deg(U.acos(s)),i<0&&(e.rotate=360-e.rotate)):e.rotate=w.deg(U.asin(i)),e.isSimple=!+e.shear.toFixed(9)&&(e.scalex.toFixed(9)==e.scaley.toFixed(9)||!e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},e.toTransformString=function(e){var t=e||this[F]();return t.isSimple?(t.scalex=+t.scalex.toFixed(4),t.scaley=+t.scaley.toFixed(4),t.rotate=+t.rotate.toFixed(4),(t.dx||t.dy?"t"+[t.dx,t.dy]:H)+(t.scalex!=1||t.scaley!=1?"s"+[t.scalex,t.scaley,0,0]:H)+(t.rotate?"r"+[t.rotate,0,0]:H)):"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]}}(o.prototype);var fn=navigator.userAgent.match(/Version\/(.*?)\s/)||navigator.userAgent.match(/Chrome\/(\d+)/);navigator.vendor=="Apple Computer, Inc."&&(fn&&fn[1]<4||navigator.platform.slice(0,2)=="iP")||navigator.vendor=="Google Inc."&&fn&&fn[1]<8?O.safari=function(){var e=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});setTimeout(function(){e.remove()})}:O.safari=Tt;var ln=function(){this.returnValue=!1},cn=function(){return this.originalEvent.preventDefault()},hn=function(){this.cancelBubble=!0},pn=function(){return this.originalEvent.stopPropagation()},dn=function(){if(k.doc.addEventListener)return function(e,t,n,r){var i=P&&q[t]?q[t]:t,s=function(i){var s=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,o=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,u=i.clientX+o,a=i.clientY+s;if(P&&q[C](t))for(var f=0,l=i.targetTouches&&i.targetTouches.length;f<l;f++)if(i.targetTouches[f].target==e){var c=i;i=i.targetTouches[f],i.originalEvent=c,i.preventDefault=cn,i.stopPropagation=pn;break}return n.call(r,i,u,a)};return e.addEventListener(i,s,!1),function(){return e.removeEventListener(i,s,!1),!0}};if(k.doc.attachEvent)return function(e,t,n,r){var i=function(e){e=e||k.win.event;var t=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,i=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,s=e.clientX+i,o=e.clientY+t;return e.preventDefault=e.preventDefault||ln,e.stopPropagation=e.stopPropagation||hn,n.call(r,e,s,o)};e.attachEvent("on"+t,i);var s=function(){return e.detachEvent("on"+t,i),!0};return s}}(),vn=[],mn=function(e){var t=e.clientX,n=e.clientY,r=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,i=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft,s,o=vn.length;while(o--){s=vn[o];if(P){var u=e.touches.length,a;while(u--){a=e.touches[u];if(a.identifier==s.el._drag.id){t=a.clientX,n=a.clientY,(e.originalEvent?e.originalEvent:e).preventDefault();break}}}else e.preventDefault();var f=s.el.node,l,c=f.nextSibling,h=f.parentNode,p=f.style.display;k.win.opera&&h.removeChild(f),f.style.display="none",l=s.el.paper.getElementByPoint(t,n),f.style.display=p,k.win.opera&&(c?h.insertBefore(f,c):h.appendChild(f)),l&&eve("raphael.drag.over."+s.el.id,s.el,l),t+=i,n+=r,eve("raphael.drag.move."+s.el.id,s.move_scope||s.el,t-s.el._drag.x,n-s.el._drag.y,t,n,e)}},gn=function(e){w.unmousemove(mn).unmouseup(gn);var t=vn.length,n;while(t--)n=vn[t],n.el._drag={},eve("raphael.drag.end."+n.el.id,n.end_scope||n.start_scope||n.move_scope||n.el,e);vn=[]},yn=w.el={};for(var bn=I.length;bn--;)(function(e){w[e]=yn[e]=function(t,n){return w.is(t,"function")&&(this.events=this.events||[],this.events.push({name:e,f:t,unbind:dn(this.shape||this.node||k.doc,e,t,n||this)})),this},w["un"+e]=yn["un"+e]=function(t){var n=this.events||[],r=n.length;while(r--)if(n[r].name==e&&n[r].f==t)return n[r].unbind(),n.splice(r,1),!n.length&&delete this.events,this;return this}})(I[bn]);yn.data=function(e,t){var n=Et[this.id]=Et[this.id]||{};if(arguments.length==1){if(w.is(e,"object")){for(var r in e)e[C](r)&&this.data(r,e[r]);return this}return eve("raphael.data.get."+this.id,this,n[e],e),n[e]}return n[e]=t,eve("raphael.data.set."+this.id,this,t,e),this},yn.removeData=function(e){return e==null?Et[this.id]={}:Et[this.id]&&delete Et[this.id][e],this},yn.hover=function(e,t,n,r){return this.mouseover(e,n).mouseout(t,r||n)},yn.unhover=function(e,t){return this.unmouseover(e).unmouseout(t)};var wn=[];yn.drag=function(e,t,n,r,i,s){function o(o){(o.originalEvent||o).preventDefault();var u=k.doc.documentElement.scrollTop||k.doc.body.scrollTop,a=k.doc.documentElement.scrollLeft||k.doc.body.scrollLeft;this._drag.x=o.clientX+a,this._drag.y=o.clientY+u,this._drag.id=o.identifier,!vn.length&&w.mousemove(mn).mouseup(gn),vn.push({el:this,move_scope:r,start_scope:i,end_scope:s}),t&&eve.on("raphael.drag.start."+this.id,t),e&&eve.on("raphael.drag.move."+this.id,e),n&&eve.on("raphael.drag.end."+this.id,n),eve("raphael.drag.start."+this.id,i||r||this,o.clientX+a,o.clientY+u,o)}return this._drag={},wn.push({el:this,start:o}),this.mousedown(o),this},yn.onDragOver=function(e){e?eve.on("raphael.drag.over."+this.id,e):eve.unbind("raphael.drag.over."+this.id)},yn.undrag=function(){var e=wn.length;while(e--)wn[e].el==this&&(this.unmousedown(wn[e].start),wn.splice(e,1),eve.unbind("raphael.drag.*."+this.id));!wn.length&&w.unmousemove(mn).unmouseup(gn)},O.circle=function(e,t,n){var r=w._engine.circle(this,e||0,t||0,n||0);return this.__set__&&this.__set__.push(r),r},O.rect=function(e,t,n,r,i){var s=w._engine.rect(this,e||0,t||0,n||0,r||0,i||0);return this.__set__&&this.__set__.push(s),s},O.ellipse=function(e,t,n,r){var i=w._engine.ellipse(this,e||0,t||0,n||0,r||0);return this.__set__&&this.__set__.push(i),i},O.path=function(e){e&&!w.is(e,K)&&!w.is(e[0],Q)&&(e+=H);var t=w._engine.path(w.format[_](w,arguments),this);return this.__set__&&this.__set__.push(t),t},O.image=function(e,t,n,r,i){var s=w._engine.image(this,e||"about:blank",t||0,n||0,r||0,i||0);return this.__set__&&this.__set__.push(s),s},O.text=function(e,t,n){var r=w._engine.text(this,e||0,t||0,j(n));return this.__set__&&this.__set__.push(r),r},O.set=function(e){!w.is(e,"array")&&(e=Array.prototype.splice.call(arguments,0,arguments.length));var t=new Dn(e);return this.__set__&&this.__set__.push(t),t},O.setStart=function(e){this.__set__=e||this.set()},O.setFinish=function(e){var t=this.__set__;return delete this.__set__,t},O.setSize=function(e,t){return w._engine.setSize.call(this,e,t)},O.setViewBox=function(e,t,n,r,i){return w._engine.setViewBox.call(this,e,t,n,r,i)},O.top=O.bottom=null,O.raphael=w;var En=function(e){var t=e.getBoundingClientRect(),n=e.ownerDocument,r=n.body,i=n.documentElement,s=i.clientTop||r.clientTop||0,o=i.clientLeft||r.clientLeft||0,u=t.top+(k.win.pageYOffset||i.scrollTop||r.scrollTop)-s,a=t.left+(k.win.pageXOffset||i.scrollLeft||r.scrollLeft)-o;return{y:u,x:a}};O.getElementByPoint=function(e,t){var n=this,r=n.canvas,i=k.doc.elementFromPoint(e,t);if(k.win.opera&&i.tagName=="svg"){var s=En(r),o=r.createSVGRect();o.x=e-s.x,o.y=t-s.y,o.width=o.height=1;var u=r.getIntersectionList(o,null);u.length&&(i=u[u.length-1])}if(!i)return null;while(i.parentNode&&i!=r.parentNode&&!i.raphael)i=i.parentNode;return i==n.canvas.parentNode&&(i=r),i=i&&i.raphael?n.getById(i.raphaelid):null,i},O.getById=function(e){var t=this.bottom;while(t){if(t.id==e)return t;t=t.next}return null},O.forEach=function(e,t){var n=this.bottom;while(n){if(e.call(t,n)===!1)return this;n=n.next}return this},O.getElementsByPoint=function(e,t){var n=this.set();return this.forEach(function(r){r.isPointInside(e,t)&&n.push(r)}),n},yn.isPointInside=function(e,t){var n=this.realPath=this.realPath||Lt[this.type](this);return w.isPointInsidePath(n,e,t)},yn.getBBox=function(e){if(this.removed)return{};var t=this._;if(e){if(t.dirty||!t.bboxwt)this.realPath=Lt[this.type](this),t.bboxwt=Rt(this.realPath),t.bboxwt.toString=i,t.dirty=0;return t.bboxwt}if(t.dirty||t.dirtyT||!t.bbox){if(t.dirty||!this.realPath)t.bboxwt=0,this.realPath=Lt[this.type](this);t.bbox=Rt(At(this.realPath,this.matrix)),t.bbox.toString=i,t.dirty=t.dirtyT=0}return t.bbox},yn.clone=function(){if(this.removed)return null;var e=this.paper[this.type]().attr(this.attr());return this.__set__&&this.__set__.push(e),e},yn.glow=function(e){if(this.type=="text")return null;e=e||{};var t={width:(e.width||10)+(+this.attr("stroke-width")||1),fill:e.fill||!1,opacity:e.opacity||.5,offsetx:e.offsetx||0,offsety:e.offsety||0,color:e.color||"#000"},n=t.width/2,r=this.paper,i=r.set(),s=this.realPath||Lt[this.type](this);s=this.matrix?At(s,this.matrix):s;for(var o=1;o<n+1;o++)i.push(r.path(s).attr({stroke:t.color,fill:t.fill?t.color:"none","stroke-linejoin":"round","stroke-linecap":"round","stroke-width":+(t.width/n*o).toFixed(3),opacity:+(t.opacity/n).toFixed(3)}));return i.insertBefore(this).translate(t.offsetx,t.offsety)};var Sn={},xn=function(e,t,n,r,i,s,o,u,a){return a==null?p(e,t,n,r,i,s,o,u):w.findDotsAtSegment(e,t,n,r,i,s,o,u,h(e,t,n,r,i,s,o,u,a))},Tn=function(e,t){return function(n,r,i){n=Qt(n);var s,o,u,a,f="",l={},c,h=0;for(var p=0,d=n.length;p<d;p++){u=n[p];if(u[0]=="M")s=+u[1],o=+u[2];else{a=xn(s,o,u[1],u[2],u[3],u[4],u[5],u[6]);if(h+a>r){if(t&&!l.start){c=xn(s,o,u[1],u[2],u[3],u[4],u[5],u[6],r-h),f+=["C"+c.start.x,c.start.y,c.m.x,c.m.y,c.x,c.y];if(i)return f;l.start=f,f=["M"+c.x,c.y+"C"+c.n.x,c.n.y,c.end.x,c.end.y,u[5],u[6]].join(),h+=a,s=+u[5],o=+u[6];continue}if(!e&&!t)return c=xn(s,o,u[1],u[2],u[3],u[4],u[5],u[6],r-h),{x:c.x,y:c.y,alpha:c.alpha}}h+=a,s=+u[5],o=+u[6]}f+=u.shift()+u}return l.end=f,c=e?h:t?l:w.findDotsAtSegment(s,o,u[0],u[1],u[2],u[3],u[4],u[5],1),c.alpha&&(c={x:c.x,y:c.y,alpha:c.alpha}),c}},Nn=Tn(1),Cn=Tn(),kn=Tn(0,1);w.getTotalLength=Nn,w.getPointAtLength=Cn,w.getSubpath=function(e,t,n){if(this.getTotalLength(e)-n<1e-6)return kn(e,t).end;var r=kn(e,n,1);return t?kn(r,t).end:r},yn.getTotalLength=function(){if(this.type=="path")return this.node.getTotalLength?this.node.getTotalLength():Nn(this.attrs.path)},yn.getPointAtLength=function(e){if(this.type=="path")return Cn(this.attrs.path,e)},yn.getSubpath=function(e,t){if(this.type=="path")return w.getSubpath(this.attrs.path,e,t)};var Ln=w.easing_formulas={linear:function(e){return e},"<":function(e){return V(e,1.7)},">":function(e){return V(e,.48)},"<>":function(e){var t=.48-e/1.04,n=U.sqrt(.1734+t*t),r=n-t,i=V(X(r),1/3)*(r<0?-1:1),s=-n-t,o=V(X(s),1/3)*(s<0?-1:1),u=i+o+.5;return(1-u)*3*u*u+u*u*u},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){e-=1;var t=1.70158;return e*e*((t+1)*e+t)+1},elastic:function(e){return e==!!e?e:V(2,-10*e)*U.sin((e-.075)*2*$/.3)+1},bounce:function(e){var t=7.5625,n=2.75,r;return e<1/n?r=t*e*e:e<2/n?(e-=1.5/n,r=t*e*e+.75):e<2.5/n?(e-=2.25/n,r=t*e*e+.9375):(e-=2.625/n,r=t*e*e+.984375),r}};Ln.easeIn=Ln["ease-in"]=Ln["<"],Ln.easeOut=Ln["ease-out"]=Ln[">"],Ln.easeInOut=Ln["ease-in-out"]=Ln["<>"],Ln["back-in"]=Ln.backIn,Ln["back-out"]=Ln.backOut;var An=[],On=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,16)},Mn=function(){var e=+(new Date),n=0;for(;n<An.length;n++){var r=An[n];if(r.el.removed||r.paused)continue;var i=e-r.start,s=r.ms,o=r.easing,u=r.from,a=r.diff,f=r.to,l=r.t,c=r.el,h={},p,d={},v;r.initstatus?(i=(r.initstatus*r.anim.top-r.prev)/(r.percent-r.prev)*s,r.status=r.initstatus,delete r.initstatus,r.stop&&An.splice(n--,1)):r.status=(r.prev+(r.percent-r.prev)*(i/s))/r.anim.top;if(i<0)continue;if(i<s){var m=o(i/s);for(var g in u)if(u[C](g)){switch(ht[g]){case J:p=+u[g]+m*s*a[g];break;case"colour":p="rgb("+[_n(ot(u[g].r+m*s*a[g].r)),_n(ot(u[g].g+m*s*a[g].g)),_n(ot(u[g].b+m*s*a[g].b))].join(",")+")";break;case"path":p=[];for(var y=0,b=u[g].length;y<b;y++){p[y]=[u[g][y][0]];for(var E=1,S=u[g][y].length;E<S;E++)p[y][E]=+u[g][y][E]+m*s*a[g][y][E];p[y]=p[y].join(B)}p=p.join(B);break;case"transform":if(a[g].real){p=[];for(y=0,b=u[g].length;y<b;y++){p[y]=[u[g][y][0]];for(E=1,S=u[g][y].length;E<S;E++)p[y][E]=u[g][y][E]+m*s*a[g][y][E]}}else{var x=function(e){return+u[g][e]+m*s*a[g][e]};p=[["m",x(0),x(1),x(2),x(3),x(4),x(5)]]}break;case"csv":if(g=="clip-rect"){p=[],y=4;while(y--)p[y]=+u[g][y]+m*s*a[g][y]}break;default:var T=[][D](u[g]);p=[],y=c.paper.customAttributes[g].length;while(y--)p[y]=+T[y]+m*s*a[g][y]}h[g]=p}c.attr(h),function(e,t,n){setTimeout(function(){eve("raphael.anim.frame."+e,t,n)})}(c.id,c,r.anim)}else{(function(e,t,n){setTimeout(function(){eve("raphael.anim.frame."+t.id,t,n),eve("raphael.anim.finish."+t.id,t,n),w.is(e,"function")&&e.call(t)})})(r.callback,c,r.anim),c.attr(f),An.splice(n--,1);if(r.repeat>1&&!r.next){for(v in f)f[C](v)&&(d[v]=r.totalOrigin[v]);r.el.attr(d),t(r.anim,r.el,r.anim.percents[0],null,r.totalOrigin,r.repeat-1)}r.next&&!r.stop&&t(r.anim,r.el,r.next,null,r.totalOrigin,r.repeat)}}w.svg&&c&&c.paper&&c.paper.safari(),An.length&&On(Mn)},_n=function(e){return e>255?255:e<0?0:e};yn.animateWith=function(e,r,i,s,o,u){var a=this;if(a.removed)return u&&u.call(a),a;var f=i instanceof n?i:w.animation(i,s,o,u),l,c;t(f,a,f.percents[0],null,a.attr());for(var h=0,p=An.length;h<p;h++)if(An[h].anim==r&&An[h].el==e){An[p-1].start=An[h].start;break}return a},yn.onAnimation=function(e){return e?eve.on("raphael.anim.frame."+this.id,e):eve.unbind("raphael.anim.frame."+this.id),this},n.prototype.delay=function(e){var t=new n(this.anim,this.ms);return t.times=this.times,t.del=+e||0,t},n.prototype.repeat=function(e){var t=new n(this.anim,this.ms);return t.del=this.del,t.times=U.floor(z(e,0))||1,t},w.animation=function(e,t,r,i){if(e instanceof n)return e;if(w.is(r,"function")||!r)i=i||r||null,r=null;e=Object(e),t=+t||0;var s={},o,u;for(u in e)e[C](u)&&at(u)!=u&&at(u)+"%"!=u&&(o=!0,s[u]=e[u]);return o?(r&&(s.easing=r),i&&(s.callback=i),new n({100:s},t)):new n(e,t)},yn.animate=function(e,r,i,s){var o=this;if(o.removed)return s&&s.call(o),o;var u=e instanceof n?e:w.animation(e,r,i,s);return t(u,o,u.percents[0],null,o.attr()),o},yn.setTime=function(e,t){return e&&t!=null&&this.status(e,W(t,e.ms)/e.ms),this},yn.status=function(e,n){var r=[],i=0,s,o;if(n!=null)return t(e,this,-1,W(n,1)),this;s=An.length;for(;i<s;i++){o=An[i];if(o.el.id==this.id&&(!e||o.anim==e)){if(e)return o.status;r.push({anim:o.anim,status:o.status})}}return e?0:r},yn.pause=function(e){for(var t=0;t<An.length;t++)An[t].el.id==this.id&&(!e||An[t].anim==e)&&eve("raphael.anim.pause."+this.id,this,An[t].anim)!==!1&&(An[t].paused=!0);return this},yn.resume=function(e){for(var t=0;t<An.length;t++)if(An[t].el.id==this.id&&(!e||An[t].anim==e)){var n=An[t];eve("raphael.anim.resume."+this.id,this,n.anim)!==!1&&(delete n.paused,this.status(n.anim,n.status))}return this},yn.stop=function(e){for(var t=0;t<An.length;t++)An[t].el.id==this.id&&(!e||An[t].anim==e)&&eve("raphael.anim.stop."+this.id,this,An[t].anim)!==!1&&An.splice(t--,1);return this},eve.on("raphael.remove",e),eve.on("raphael.clear",e),yn.toString=function(){return"Raphaël’s object"};var Dn=function(e){this.items=[],this.length=0,this.type="set";if(e)for(var t=0,n=e.length;t<n;t++)e[t]&&(e[t].constructor==yn.constructor||e[t].constructor==Dn)&&(this[this.items.length]=this.items[this.items.length]=e[t],this.length++)},Pn=Dn.prototype;Pn.push=function(){var e,t;for(var n=0,r=arguments.length;n<r;n++)e=arguments[n],e&&(e.constructor==yn.constructor||e.constructor==Dn)&&(t=this.items.length,this[t]=this.items[t]=e,this.length++);return this},Pn.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},Pn.forEach=function(e,t){for(var n=0,r=this.items.length;n<r;n++)if(e.call(t,this.items[n],n)===!1)return this;return this};for(var Hn in yn)yn[C](Hn)&&(Pn[Hn]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e][_](n,t)})}}(Hn));Pn.attr=function(e,t){if(e&&w.is(e,Q)&&w.is(e[0],"object"))for(var n=0,r=e.length;n<r;n++)this.items[n].attr(e[n]);else for(var i=0,s=this.items.length;i<s;i++)this.items[i].attr(e,t);return this},Pn.clear=function(){while(this.length)this.pop()},Pn.splice=function(e,t,n){e=e<0?z(this.length+e,0):e,t=z(0,W(this.length-e,t));var r=[],i=[],s=[],o;for(o=2;o<arguments.length;o++)s.push(arguments[o]);for(o=0;o<t;o++)i.push(this[e+o]);for(;o<this.length-e;o++)r.push(this[e+o]);var u=s.length;for(o=0;o<u+r.length;o++)this.items[e+o]=this[e+o]=o<u?s[o]:r[o-u];o=this.items.length=this.length-=t-u;while(this[o])delete this[o++];return new Dn(i)},Pn.exclude=function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]==e)return this.splice(t,1),!0},Pn.animate=function(e,t,n,r){(w.is(n,"function")||!n)&&(r=n||null);var i=this.items.length,s=i,o,u=this,a;if(!i)return this;r&&(a=function(){!--i&&r.call(u)}),n=w.is(n,K)?n:a;var f=w.animation(e,t,n,a);o=this.items[--s].animate(f);while(s--)this.items[s]&&!this.items[s].removed&&this.items[s].animateWith(o,f,f);return this},Pn.insertAfter=function(e){var t=this.items.length;while(t--)this.items[t].insertAfter(e);return this},Pn.getBBox=function(){var e=[],t=[],n=[],r=[];for(var i=this.items.length;i--;)if(!this.items[i].removed){var s=this.items[i].getBBox();e.push(s.x),t.push(s.y),n.push(s.x+s.width),r.push(s.y+s.height)}return e=W[_](0,e),t=W[_](0,t),n=z[_](0,n),r=z[_](0,r),{x:e,y:t,x2:n,y2:r,width:n-e,height:r-t}},Pn.clone=function(e){e=new Dn;for(var t=0
,n=this.items.length;t<n;t++)e.push(this.items[t].clone());return e},Pn.toString=function(){return"Raphaël‘s set"},w.registerFont=function(e){if(!e.face)return e;this.fonts=this.fonts||{};var t={w:e.w,face:{},glyphs:{}},n=e.face["font-family"];for(var r in e.face)e.face[C](r)&&(t.face[r]=e.face[r]);this.fonts[n]?this.fonts[n].push(t):this.fonts[n]=[t];if(!e.svg){t.face["units-per-em"]=ft(e.face["units-per-em"],10);for(var i in e.glyphs)if(e.glyphs[C](i)){var s=e.glyphs[i];t.glyphs[i]={w:s.w,k:{},d:s.d&&"M"+s.d.replace(/[mlcxtrv]/g,function(e){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[e]||"M"})+"z"};if(s.k)for(var o in s.k)s[C](o)&&(t.glyphs[i].k[o]=s.k[o])}}return e},O.getFont=function(e,t,n,r){r=r||"normal",n=n||"normal",t=+t||{normal:400,bold:700,lighter:300,bolder:800}[t]||400;if(!!w.fonts){var i=w.fonts[e];if(!i){var s=new RegExp("(^|\\s)"+e.replace(/[^\w\d\s+!~.:_-]/g,H)+"(\\s|$)","i");for(var o in w.fonts)if(w.fonts[C](o)&&s.test(o)){i=w.fonts[o];break}}var u;if(i)for(var a=0,f=i.length;a<f;a++){u=i[a];if(u.face["font-weight"]==t&&(u.face["font-style"]==n||!u.face["font-style"])&&u.face["font-stretch"]==r)break}return u}},O.print=function(e,t,n,r,i,s,o){s=s||"middle",o=z(W(o||0,1),-1);var u=j(n)[F](H),a=0,f=0,l=H,c;w.is(r,n)&&(r=this.getFont(r));if(r){c=(i||16)/r.face["units-per-em"];var h=r.face.bbox[F](S),p=+h[0],d=h[3]-h[1],v=0,m=+h[1]+(s=="baseline"?d+ +r.face.descent:d/2);for(var g=0,y=u.length;g<y;g++){if(u[g]=="\n")a=0,E=0,f=0,v+=d;else{var b=f&&r.glyphs[u[g-1]]||{},E=r.glyphs[u[g]];a+=f?(b.w||r.w)+(b.k&&b.k[u[g]]||0)+r.w*o:0,f=1}E&&E.d&&(l+=w.transformPath(E.d,["t",a*c,v*c,"s",c,c,p,m,"t",(e-p)/c,(t-m)/c]))}}return this.path(l).attr({fill:"#000",stroke:"none"})},O.add=function(e){if(w.is(e,"array")){var t=this.set(),n=0,r=e.length,i;for(;n<r;n++)i=e[n]||{},x[C](i.type)&&t.push(this[i.type]().attr(i))}return t},w.format=function(e,t){var n=w.is(t,Q)?[0][D](t):arguments;return e&&w.is(e,K)&&n.length-1&&(e=e.replace(T,function(e,t){return n[++t]==null?H:n[t]})),e||H},w.fullfill=function(){var e=/\{([^\}]+)\}/g,t=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(e,n,r){var i=r;return n.replace(t,function(e,t,n,r,s){t=t||r,i&&(t in i&&(i=i[t]),typeof i=="function"&&s&&(i=i()))}),i=(i==null||i==r?e:i)+"",i};return function(t,r){return String(t).replace(e,function(e,t){return n(e,t,r)})}}(),w.ninja=function(){return L.was?k.win.Raphael=L.is:delete Raphael,w},w.st=Pn,function(e,t,n){function r(){/in/.test(e.readyState)?setTimeout(r,9):w.eve("raphael.DOMload")}e.readyState==null&&e.addEventListener&&(e.addEventListener(t,n=function(){e.removeEventListener(t,n,!1),e.readyState="complete"},!1),e.readyState="loading"),r()}(document,"DOMContentLoaded"),L.was?k.win.Raphael=w:Raphael=w,eve.on("raphael.DOMload",function(){E=!0})}(),window.Raphael.svg&&function(e){var t="hasOwnProperty",n=String,r=parseFloat,i=parseInt,s=Math,o=s.max,u=s.abs,a=s.pow,f=/[, ]+/,l=e.eve,c="",h=" ",p="http://www.w3.org/1999/xlink",d={block:"M5,0 0,2.5 5,5z",classic:"M5,0 0,2.5 5,5 3.5,3 3.5,2z",diamond:"M2.5,0 5,2.5 2.5,5 0,2.5z",open:"M6,1 1,3.5 6,6",oval:"M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z"},v={};e.toString=function(){return"Your browser supports SVG.\nYou are running Raphaël "+this.version};var m=function(r,i){if(i){typeof r=="string"&&(r=m(r));for(var s in i)i[t](s)&&(s.substring(0,6)=="xlink:"?r.setAttributeNS(p,s.substring(6),n(i[s])):r.setAttribute(s,n(i[s])))}else r=e._g.doc.createElementNS("http://www.w3.org/2000/svg",r),r.style&&(r.style.webkitTapHighlightColor="rgba(0,0,0,0)");return r},g=function(t,i){var f="linear",l=t.id+i,h=.5,p=.5,d=t.node,v=t.paper,g=d.style,y=e._g.doc.getElementById(l);if(!y){i=n(i).replace(e._radial_gradient,function(e,t,n){f="radial";if(t&&n){h=r(t),p=r(n);var i=(p>.5)*2-1;a(h-.5,2)+a(p-.5,2)>.25&&(p=s.sqrt(.25-a(h-.5,2))*i+.5)&&p!=.5&&(p=p.toFixed(5)-1e-5*i)}return c}),i=i.split(/\s*\-\s*/);if(f=="linear"){var b=i.shift();b=-r(b);if(isNaN(b))return null;var w=[0,0,s.cos(e.rad(b)),s.sin(e.rad(b))],E=1/(o(u(w[2]),u(w[3]))||1);w[2]*=E,w[3]*=E,w[2]<0&&(w[0]=-w[2],w[2]=0),w[3]<0&&(w[1]=-w[3],w[3]=0)}var S=e._parseDots(i);if(!S)return null;l=l.replace(/[\(\)\s,\xb0#]/g,"_"),t.gradient&&l!=t.gradient.id&&(v.defs.removeChild(t.gradient),delete t.gradient);if(!t.gradient){y=m(f+"Gradient",{id:l}),t.gradient=y,m(y,f=="radial"?{fx:h,fy:p}:{x1:w[0],y1:w[1],x2:w[2],y2:w[3],gradientTransform:t.matrix.invert()}),v.defs.appendChild(y);for(var x=0,T=S.length;x<T;x++)y.appendChild(m("stop",{offset:S[x].offset?S[x].offset:x?"100%":"0%","stop-color":S[x].color||"#fff"}))}}return m(d,{fill:"url(#"+l+")",opacity:1,"fill-opacity":1}),g.fill=c,g.opacity=1,g.fillOpacity=1,1},y=function(e){var t=e.getBBox(1);m(e.pattern,{patternTransform:e.matrix.invert()+" translate("+t.x+","+t.y+")"})},b=function(r,i,s){if(r.type=="path"){var o=n(i).toLowerCase().split("-"),u=r.paper,a=s?"end":"start",f=r.node,l=r.attrs,h=l["stroke-width"],p=o.length,g="classic",y,b,w,E,S,x=3,T=3,N=5;while(p--)switch(o[p]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":g=o[p];break;case"wide":T=5;break;case"narrow":T=2;break;case"long":x=5;break;case"short":x=2}g=="open"?(x+=2,T+=2,N+=2,w=1,E=s?4:1,S={fill:"none",stroke:l.stroke}):(E=w=x/2,S={fill:l.stroke,stroke:"none"}),r._.arrows?s?(r._.arrows.endPath&&v[r._.arrows.endPath]--,r._.arrows.endMarker&&v[r._.arrows.endMarker]--):(r._.arrows.startPath&&v[r._.arrows.startPath]--,r._.arrows.startMarker&&v[r._.arrows.startMarker]--):r._.arrows={};if(g!="none"){var C="raphael-marker-"+g,k="raphael-marker-"+a+g+x+T;e._g.doc.getElementById(C)?v[C]++:(u.defs.appendChild(m(m("path"),{"stroke-linecap":"round",d:d[g],id:C})),v[C]=1);var L=e._g.doc.getElementById(k),A;L?(v[k]++,A=L.getElementsByTagName("use")[0]):(L=m(m("marker"),{id:k,markerHeight:T,markerWidth:x,orient:"auto",refX:E,refY:T/2}),A=m(m("use"),{"xlink:href":"#"+C,transform:(s?"rotate(180 "+x/2+" "+T/2+") ":c)+"scale("+x/N+","+T/N+")","stroke-width":(1/((x/N+T/N)/2)).toFixed(4)}),L.appendChild(A),u.defs.appendChild(L),v[k]=1),m(A,S);var O=w*(g!="diamond"&&g!="oval");s?(y=r._.arrows.startdx*h||0,b=e.getTotalLength(l.path)-O*h):(y=O*h,b=e.getTotalLength(l.path)-(r._.arrows.enddx*h||0)),S={},S["marker-"+a]="url(#"+k+")";if(b||y)S.d=Raphael.getSubpath(l.path,y,b);m(f,S),r._.arrows[a+"Path"]=C,r._.arrows[a+"Marker"]=k,r._.arrows[a+"dx"]=O,r._.arrows[a+"Type"]=g,r._.arrows[a+"String"]=i}else s?(y=r._.arrows.startdx*h||0,b=e.getTotalLength(l.path)-y):(y=0,b=e.getTotalLength(l.path)-(r._.arrows.enddx*h||0)),r._.arrows[a+"Path"]&&m(f,{d:Raphael.getSubpath(l.path,y,b)}),delete r._.arrows[a+"Path"],delete r._.arrows[a+"Marker"],delete r._.arrows[a+"dx"],delete r._.arrows[a+"Type"],delete r._.arrows[a+"String"];for(S in v)if(v[t](S)&&!v[S]){var M=e._g.doc.getElementById(S);M&&M.parentNode.removeChild(M)}}},w={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},E=function(e,t,r){t=w[n(t).toLowerCase()];if(t){var i=e.attrs["stroke-width"]||"1",s={round:i,square:i,butt:0}[e.attrs["stroke-linecap"]||r["stroke-linecap"]]||0,o=[],u=t.length;while(u--)o[u]=t[u]*i+(u%2?1:-1)*s;m(e.node,{"stroke-dasharray":o.join(",")})}},S=function(r,s){var a=r.node,l=r.attrs,h=a.style.visibility;a.style.visibility="hidden";for(var d in s)if(s[t](d)){if(!e._availableAttrs[t](d))continue;var v=s[d];l[d]=v;switch(d){case"blur":r.blur(v);break;case"href":case"title":case"target":var w=a.parentNode;if(w.tagName.toLowerCase()!="a"){var S=m("a");w.insertBefore(S,a),S.appendChild(a),w=S}d=="target"?w.setAttributeNS(p,"show",v=="blank"?"new":v):w.setAttributeNS(p,d,v);break;case"cursor":a.style.cursor=v;break;case"transform":r.transform(v);break;case"arrow-start":b(r,v);break;case"arrow-end":b(r,v,1);break;case"clip-rect":var x=n(v).split(f);if(x.length==4){r.clip&&r.clip.parentNode.parentNode.removeChild(r.clip.parentNode);var N=m("clipPath"),C=m("rect");N.id=e.createUUID(),m(C,{x:x[0],y:x[1],width:x[2],height:x[3]}),N.appendChild(C),r.paper.defs.appendChild(N),m(a,{"clip-path":"url(#"+N.id+")"}),r.clip=C}if(!v){var k=a.getAttribute("clip-path");if(k){var L=e._g.doc.getElementById(k.replace(/(^url\(#|\)$)/g,c));L&&L.parentNode.removeChild(L),m(a,{"clip-path":c}),delete r.clip}}break;case"path":r.type=="path"&&(m(a,{d:v?l.path=e._pathToAbsolute(v):"M0,0"}),r._.dirty=1,r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1)));break;case"width":a.setAttribute(d,v),r._.dirty=1;if(!l.fx)break;d="x",v=l.x;case"x":l.fx&&(v=-l.x-(l.width||0));case"rx":if(d=="rx"&&r.type=="rect")break;case"cx":a.setAttribute(d,v),r.pattern&&y(r),r._.dirty=1;break;case"height":a.setAttribute(d,v),r._.dirty=1;if(!l.fy)break;d="y",v=l.y;case"y":l.fy&&(v=-l.y-(l.height||0));case"ry":if(d=="ry"&&r.type=="rect")break;case"cy":a.setAttribute(d,v),r.pattern&&y(r),r._.dirty=1;break;case"r":r.type=="rect"?m(a,{rx:v,ry:v}):a.setAttribute(d,v),r._.dirty=1;break;case"src":r.type=="image"&&a.setAttributeNS(p,"href",v);break;case"stroke-width":if(r._.sx!=1||r._.sy!=1)v/=o(u(r._.sx),u(r._.sy))||1;r.paper._vbSize&&(v*=r.paper._vbSize),a.setAttribute(d,v),l["stroke-dasharray"]&&E(r,l["stroke-dasharray"],s),r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"stroke-dasharray":E(r,v,s);break;case"fill":var A=n(v).match(e._ISURL);if(A){N=m("pattern");var O=m("image");N.id=e.createUUID(),m(N,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1}),m(O,{x:0,y:0,"xlink:href":A[1]}),N.appendChild(O),function(t){e._preload(A[1],function(){var e=this.offsetWidth,n=this.offsetHeight;m(t,{width:e,height:n}),m(O,{width:e,height:n}),r.paper.safari()})}(N),r.paper.defs.appendChild(N),m(a,{fill:"url(#"+N.id+")"}),r.pattern=N,r.pattern&&y(r);break}var M=e.getRGB(v);if(!M.error)delete s.gradient,delete l.gradient,!e.is(l.opacity,"undefined")&&e.is(s.opacity,"undefined")&&m(a,{opacity:l.opacity}),!e.is(l["fill-opacity"],"undefined")&&e.is(s["fill-opacity"],"undefined")&&m(a,{"fill-opacity":l["fill-opacity"]});else if((r.type=="circle"||r.type=="ellipse"||n(v).charAt()!="r")&&g(r,v)){if("opacity"in l||"fill-opacity"in l){var _=e._g.doc.getElementById(a.getAttribute("fill").replace(/^url\(#|\)$/g,c));if(_){var D=_.getElementsByTagName("stop");m(D[D.length-1],{"stop-opacity":("opacity"in l?l.opacity:1)*("fill-opacity"in l?l["fill-opacity"]:1)})}}l.gradient=v,l.fill="none";break}M[t]("opacity")&&m(a,{"fill-opacity":M.opacity>1?M.opacity/100:M.opacity});case"stroke":M=e.getRGB(v),a.setAttribute(d,M.hex),d=="stroke"&&M[t]("opacity")&&m(a,{"stroke-opacity":M.opacity>1?M.opacity/100:M.opacity}),d=="stroke"&&r._.arrows&&("startString"in r._.arrows&&b(r,r._.arrows.startString),"endString"in r._.arrows&&b(r,r._.arrows.endString,1));break;case"gradient":(r.type=="circle"||r.type=="ellipse"||n(v).charAt()!="r")&&g(r,v);break;case"opacity":l.gradient&&!l[t]("stroke-opacity")&&m(a,{"stroke-opacity":v>1?v/100:v});case"fill-opacity":if(l.gradient){_=e._g.doc.getElementById(a.getAttribute("fill").replace(/^url\(#|\)$/g,c)),_&&(D=_.getElementsByTagName("stop"),m(D[D.length-1],{"stop-opacity":v}));break};default:d=="font-size"&&(v=i(v,10)+"px");var P=d.replace(/(\-.)/g,function(e){return e.substring(1).toUpperCase()});a.style[P]=v,r._.dirty=1,a.setAttribute(d,v)}}T(r,s),a.style.visibility=h},x=1.2,T=function(r,s){if(r.type=="text"&&!!(s[t]("text")||s[t]("font")||s[t]("font-size")||s[t]("x")||s[t]("y"))){var o=r.attrs,u=r.node,a=u.firstChild?i(e._g.doc.defaultView.getComputedStyle(u.firstChild,c).getPropertyValue("font-size"),10):10;if(s[t]("text")){o.text=s.text;while(u.firstChild)u.removeChild(u.firstChild);var f=n(s.text).split("\n"),l=[],h;for(var p=0,d=f.length;p<d;p++)h=m("tspan"),p&&m(h,{dy:a*x,x:o.x}),h.appendChild(e._g.doc.createTextNode(f[p])),u.appendChild(h),l[p]=h}else{l=u.getElementsByTagName("tspan");for(p=0,d=l.length;p<d;p++)p?m(l[p],{dy:a*x,x:o.x}):m(l[0],{dy:0})}m(u,{x:o.x,y:o.y}),r._.dirty=1;var v=r._getBBox(),g=o.y-(v.y+v.height/2);g&&e.is(g,"finite")&&m(l[0],{dy:g})}},N=function(t,n){var r=0,i=0;this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.matrix=e.matrix(),this.realPath=null,this.paper=n,this.attrs=this.attrs||{},this._={transform:[],sx:1,sy:1,deg:0,dx:0,dy:0,dirty:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},C=e.el;N.prototype=C,C.constructor=N,e._engine.path=function(e,t){var n=m("path");t.canvas&&t.canvas.appendChild(n);var r=new N(n,t);return r.type="path",S(r,{fill:"none",stroke:"#000",path:e}),r},C.rotate=function(e,t,i){if(this.removed)return this;e=n(e).split(f),e.length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),i==null&&(t=i);if(t==null||i==null){var s=this.getBBox(1);t=s.x+s.width/2,i=s.y+s.height/2}return this.transform(this._.transform.concat([["r",e,t,i]])),this},C.scale=function(e,t,i,s){if(this.removed)return this;e=n(e).split(f),e.length-1&&(t=r(e[1]),i=r(e[2]),s=r(e[3])),e=r(e[0]),t==null&&(t=e),s==null&&(i=s);if(i==null||s==null)var o=this.getBBox(1);return i=i==null?o.x+o.width/2:i,s=s==null?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",e,t,i,s]])),this},C.translate=function(e,t){return this.removed?this:(e=n(e).split(f),e.length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this.transform(this._.transform.concat([["t",e,t]])),this)},C.transform=function(n){var r=this._;if(n==null)return r.transform;e._extractTransform(this,n),this.clip&&m(this.clip,{transform:this.matrix.invert()}),this.pattern&&y(this),this.node&&m(this.node,{transform:this.matrix});if(r.sx!=1||r.sy!=1){var i=this.attrs[t]("stroke-width")?this.attrs["stroke-width"]:1;this.attr({"stroke-width":i})}return this},C.hide=function(){return!this.removed&&this.paper.safari(this.node.style.display="none"),this},C.show=function(){return!this.removed&&this.paper.safari(this.node.style.display=""),this},C.remove=function(){if(!this.removed&&!!this.node.parentNode){var t=this.paper;t.__set__&&t.__set__.exclude(this),l.unbind("raphael.*.*."+this.id),this.gradient&&t.defs.removeChild(this.gradient),e._tear(this,t),this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.removeChild(this.node.parentNode):this.node.parentNode.removeChild(this.node);for(var n in this)this[n]=typeof this[n]=="function"?e._removedFactory(n):null;this.removed=!0}},C._getBBox=function(){if(this.node.style.display=="none"){this.show();var e=!0}var t={};try{t=this.node.getBBox()}catch(n){}finally{t=t||{}}return e&&this.hide(),t},C.attr=function(n,r){if(this.removed)return this;if(n==null){var i={};for(var s in this.attrs)this.attrs[t](s)&&(i[s]=this.attrs[s]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(r==null&&e.is(n,"string")){if(n=="fill"&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;if(n=="transform")return this._.transform;var o=n.split(f),u={};for(var a=0,c=o.length;a<c;a++)n=o[a],n in this.attrs?u[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?u[n]=this.paper.customAttributes[n].def:u[n]=e._availableAttrs[n];return c-1?u:u[o[0]]}if(r==null&&e.is(n,"array")){u={};for(a=0,c=n.length;a<c;a++)u[n[a]]=this.attr(n[a]);return u}if(r!=null){var h={};h[n]=r}else n!=null&&e.is(n,"object")&&(h=n);for(var p in h)l("raphael.attr."+p+"."+this.id,this,h[p]);for(p in this.paper.customAttributes)if(this.paper.customAttributes[t](p)&&h[t](p)&&e.is(this.paper.customAttributes[p],"function")){var d=this.paper.customAttributes[p].apply(this,[].concat(h[p]));this.attrs[p]=h[p];for(var v in d)d[t](v)&&(h[v]=d[v])}return S(this,h),this},C.toFront=function(){if(this.removed)return this;this.node.parentNode.tagName.toLowerCase()=="a"?this.node.parentNode.parentNode.appendChild(this.node.parentNode):this.node.parentNode.appendChild(this.node);var t=this.paper;return t.top!=this&&e._tofront(this,t),this},C.toBack=function(){if(this.removed)return this;var t=this.node.parentNode;t.tagName.toLowerCase()=="a"?t.parentNode.insertBefore(this.node.parentNode,this.node.parentNode.parentNode.firstChild):t.firstChild!=this.node&&t.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper);var n=this.paper;return this},C.insertAfter=function(t){if(this.removed)return this;var n=t.node||t[t.length-1].node;return n.nextSibling?n.parentNode.insertBefore(this.node,n.nextSibling):n.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this},C.insertBefore=function(t){if(this.removed)return this;var n=t.node||t[0].node;return n.parentNode.insertBefore(this.node,n),e._insertbefore(this,t,this.paper),this},C.blur=function(t){var n=this;if(+t!==0){var r=m("filter"),i=m("feGaussianBlur");n.attrs.blur=t,r.id=e.createUUID(),m(i,{stdDeviation:+t||1.5}),r.appendChild(i),n.paper.defs.appendChild(r),n._blur=r,m(n.node,{filter:"url(#"+r.id+")"})}else n._blur&&(n._blur.parentNode.removeChild(n._blur),delete n._blur,delete n.attrs.blur),n.node.removeAttribute("filter")},e._engine.circle=function(e,t,n,r){var i=m("circle");e.canvas&&e.canvas.appendChild(i);var s=new N(i,e);return s.attrs={cx:t,cy:n,r:r,fill:"none",stroke:"#000"},s.type="circle",m(i,s.attrs),s},e._engine.rect=function(e,t,n,r,i,s){var o=m("rect");e.canvas&&e.canvas.appendChild(o);var u=new N(o,e);return u.attrs={x:t,y:n,width:r,height:i,r:s||0,rx:s||0,ry:s||0,fill:"none",stroke:"#000"},u.type="rect",m(o,u.attrs),u},e._engine.ellipse=function(e,t,n,r,i){var s=m("ellipse");e.canvas&&e.canvas.appendChild(s);var o=new N(s,e);return o.attrs={cx:t,cy:n,rx:r,ry:i,fill:"none",stroke:"#000"},o.type="ellipse",m(s,o.attrs),o},e._engine.image=function(e,t,n,r,i,s){var o=m("image");m(o,{x:n,y:r,width:i,height:s,preserveAspectRatio:"none"}),o.setAttributeNS(p,"href",t),e.canvas&&e.canvas.appendChild(o);var u=new N(o,e);return u.attrs={x:n,y:r,width:i,height:s,src:t},u.type="image",u},e._engine.text=function(t,n,r,i){var s=m("text");t.canvas&&t.canvas.appendChild(s);var o=new N(s,t);return o.attrs={x:n,y:r,"text-anchor":"middle",text:i,font:e._availableAttrs.font,stroke:"none",fill:"#000"},o.type="text",S(o,o.attrs),o},e._engine.setSize=function(e,t){return this.width=e||this.width,this.height=t||this.height,this.canvas.setAttribute("width",this.width),this.canvas.setAttribute("height",this.height),this._viewBox&&this.setViewBox.apply(this,this._viewBox),this},e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t&&t.container,r=t.x,i=t.y,s=t.width,o=t.height;if(!n)throw new Error("SVG container not found.");var u=m("svg"),a="overflow:hidden;",f;return r=r||0,i=i||0,s=s||512,o=o||342,m(u,{height:o,version:1.1,width:s,xmlns:"http://www.w3.org/2000/svg"}),n==1?(u.style.cssText=a+"position:absolute;left:"+r+"px;top:"+i+"px",e._g.doc.body.appendChild(u),f=1):(u.style.cssText=a+"position:relative",n.firstChild?n.insertBefore(u,n.firstChild):n.appendChild(u)),n=new e._Paper,n.width=s,n.height=o,n.canvas=u,n.clear(),n._left=n._top=0,f&&(n.renderfix=function(){}),n.renderfix(),n},e._engine.setViewBox=function(e,t,n,r,i){l("raphael.setViewBox",this,this._viewBox,[e,t,n,r,i]);var s=o(n/this.width,r/this.height),u=this.top,a=i?"meet":"xMinYMin",f,c;e==null?(this._vbSize&&(s=1),delete this._vbSize,f="0 0 "+this.width+h+this.height):(this._vbSize=s,f=e+h+t+h+n+h+r),m(this.canvas,{viewBox:f,preserveAspectRatio:a});while(s&&u)c="stroke-width"in u.attrs?u.attrs["stroke-width"]:1,u.attr({"stroke-width":c}),u._.dirty=1,u._.dirtyT=1,u=u.prev;return this._viewBox=[e,t,n,r,!!i],this},e.prototype.renderfix=function(){var e=this.canvas,t=e.style,n;try{n=e.getScreenCTM()||e.createSVGMatrix()}catch(r){n=e.createSVGMatrix()}var i=-n.e%1,s=-n.f%1;if(i||s)i&&(this._left=(this._left+i)%1,t.left=this._left+"px"),s&&(this._top=(this._top+s)%1,t.top=this._top+"px")},e.prototype.clear=function(){e.eve("raphael.clear",this);var t=this.canvas;while(t.firstChild)t.removeChild(t.firstChild);this.bottom=this.top=null,(this.desc=m("desc")).appendChild(e._g.doc.createTextNode("Created with Raphaël "+e.version)),t.appendChild(this.desc),t.appendChild(this.defs=m("defs"))},e.prototype.remove=function(){l("raphael.remove",this),this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?e._removedFactory(t):null};var k=e.st;for(var L in C)C[t](L)&&!k[t](L)&&(k[L]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(L))}(window.Raphael),window.Raphael.vml&&function(e){var t="hasOwnProperty",n=String,r=parseFloat,i=Math,s=i.round,o=i.max,u=i.min,a=i.abs,f="fill",l=/[, ]+/,c=e.eve,h=" progid:DXImageTransform.Microsoft",p=" ",d="",v={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},m=/([clmz]),?([^clmz]*)/gi,g=/ progid:\S+Blur\([^\)]+\)/g,y=/-?[^,\s-]+/g,b="position:absolute;left:0;top:0;width:1px;height:1px",w=21600,E={path:1,rect:1,image:1},S={circle:1,ellipse:1},x=function(t){var r=/[ahqstv]/ig,i=e._pathToAbsolute;n(t).match(r)&&(i=e._path2curve),r=/[clmz]/g;if(i==e._pathToAbsolute&&!n(t).match(r)){var o=n(t).replace(m,function(e,t,n){var r=[],i=t.toLowerCase()=="m",o=v[t];return n.replace(y,function(e){i&&r.length==2&&(o+=r+v[t=="m"?"l":"L"],r=[]),r.push(s(e*w))}),o+r});return o}var u=i(t),a,f;o=[];for(var l=0,c=u.length;l<c;l++){a=u[l],f=u[l][0].toLowerCase(),f=="z"&&(f="x");for(var h=1,g=a.length;h<g;h++)f+=s(a[h]*w)+(h!=g-1?",":d);o.push(f)}return o.join(p)},T=function(t,n,r){var i=e.matrix();return i.rotate(-t,.5,.5),{dx:i.x(n,r),dy:i.y(n,r)}},N=function(e,t,n,r,i,s){var o=e._,u=e.matrix,l=o.fillpos,c=e.node,h=c.style,d=1,v="",m,g=w/t,y=w/n;h.visibility="hidden";if(!!t&&!!n){c.coordsize=a(g)+p+a(y),h.rotation=s*(t*n<0?-1:1);if(s){var b=T(s,r,i);r=b.dx,i=b.dy}t<0&&(v+="x"),n<0&&(v+=" y")&&(d=-1),h.flip=v,c.coordorigin=r*-g+p+i*-y;if(l||o.fillsize){var E=c.getElementsByTagName(f);E=E&&E[0],c.removeChild(E),l&&(b=T(s,u.x(l[0],l[1]),u.y(l[0],l[1])),E.position=b.dx*d+p+b.dy*d),o.fillsize&&(E.size=o.fillsize[0]*a(t)+p+o.fillsize[1]*a(n)),c.appendChild(E)}h.visibility="visible"}};e.toString=function(){return"Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël "+this.version};var C=function(e,t,r){var i=n(t).toLowerCase().split("-"),s=r?"end":"start",o=i.length,u="classic",a="medium",f="medium";while(o--)switch(i[o]){case"block":case"classic":case"oval":case"diamond":case"open":case"none":u=i[o];break;case"wide":case"narrow":f=i[o];break;case"long":case"short":a=i[o]}var l=e.node.getElementsByTagName("stroke")[0];l[s+"arrow"]=u,l[s+"arrowlength"]=a,l[s+"arrowwidth"]=f},k=function(i,a){i.attrs=i.attrs||{};var c=i.node,h=i.attrs,v=c.style,m,g=E[i.type]&&(a.x!=h.x||a.y!=h.y||a.width!=h.width||a.height!=h.height||a.cx!=h.cx||a.cy!=h.cy||a.rx!=h.rx||a.ry!=h.ry||a.r!=h.r),y=S[i.type]&&(h.cx!=a.cx||h.cy!=a.cy||h.r!=a.r||h.rx!=a.rx||h.ry!=a.ry),b=i;for(var T in a)a[t](T)&&(h[T]=a[T]);g&&(h.path=e._getPath[i.type](i),i._.dirty=1),a.href&&(c.href=a.href),a.title&&(c.title=a.title),a.target&&(c.target=a.target),a.cursor&&(v.cursor=a.cursor),"blur"in a&&i.blur(a.blur);if(a.path&&i.type=="path"||g)c.path=x(~n(h.path).toLowerCase().indexOf("r")?e._pathToAbsolute(h.path):h.path),i.type=="image"&&(i._.fillpos=[h.x,h.y],i._.fillsize=[h.width,h.height],N(i,1,1,0,0,0));"transform"in a&&i.transform(a.transform);if(y){var k=+h.cx,A=+h.cy,O=+h.rx||+h.r||0,_=+h.ry||+h.r||0;c.path=e.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x",s((k-O)*w),s((A-_)*w),s((k+O)*w),s((A+_)*w),s(k*w))}if("clip-rect"in a){var D=n(a["clip-rect"]).split(l);if(D.length==4){D[2]=+D[2]+ +D[0],D[3]=+D[3]+ +D[1];var P=c.clipRect||e._g.doc.createElement("div"),H=P.style;H.clip=e.format("rect({1}px {2}px {3}px {0}px)",D),c.clipRect||(H.position="absolute",H.top=0,H.left=0,H.width=i.paper.width+"px",H.height=i.paper.height+"px",c.parentNode.insertBefore(P,c),P.appendChild(c),c.clipRect=P)}a["clip-rect"]||c.clipRect&&(c.clipRect.style.clip="auto")}if(i.textpath){var B=i.textpath.style;a.font&&(B.font=a.font),a["font-family"]&&(B.fontFamily='"'+a["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g,d)+'"'),a["font-size"]&&(B.fontSize=a["font-size"]),a["font-weight"]&&(B.fontWeight=a["font-weight"]),a["font-style"]&&(B.fontStyle=a["font-style"])}"arrow-start"in a&&C(b,a["arrow-start"]),"arrow-end"in a&&C(b,a["arrow-end"],1);if(a.opacity!=null||a["stroke-width"]!=null||a.fill!=null||a.src!=null||a.stroke!=null||a["stroke-width"]!=null||a["stroke-opacity"]!=null||a["fill-opacity"]!=null||a["stroke-dasharray"]!=null||a["stroke-miterlimit"]!=null||a["stroke-linejoin"]!=null||a["stroke-linecap"]!=null){var I=c.getElementsByTagName(f),q=!1;I=I&&I[0],!I&&(q=I=M(f)),i.type=="image"&&a.src&&(I.src=a.src),a.fill&&(I.on=!0);if(I.on==null||a.fill=="none"||a.fill===null)I.on=!1;if(I.on&&a.fill){var R=n(a.fill).match(e._ISURL);if(R){I.parentNode==c&&c.removeChild(I),I.rotate=!0,I.src=R[1],I.type="tile";var U=i.getBBox(1);I.position=U.x+p+U.y,i._.fillpos=[U.x,U.y],e._preload(R[1],function(){i._.fillsize=[this.offsetWidth,this.offsetHeight]})}else I.color=e.getRGB(a.fill).hex,I.src=d,I.type="solid",e.getRGB(a.fill).error&&(b.type in{circle:1,ellipse:1}||n(a.fill).charAt()!="r")&&L(b,a.fill,I)&&(h.fill="none",h.gradient=a.fill,I.rotate=!1)}if("fill-opacity"in a||"opacity"in a){var W=((+h["fill-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+e.getRGB(a.fill).o+1||2)-1);W=u(o(W,0),1),I.opacity=W,I.src&&(I.color="none")}c.appendChild(I);var X=c.getElementsByTagName("stroke")&&c.getElementsByTagName("stroke")[0],V=!1;!X&&(V=X=M("stroke"));if(a.stroke&&a.stroke!="none"||a["stroke-width"]||a["stroke-opacity"]!=null||a["stroke-dasharray"]||a["stroke-miterlimit"]||a["stroke-linejoin"]||a["stroke-linecap"])X.on=!0;(a.stroke=="none"||a.stroke===null||X.on==null||a.stroke==0||a["stroke-width"]==0)&&(X.on=!1);var $=e.getRGB(a.stroke);X.on&&a.stroke&&(X.color=$.hex),W=((+h["stroke-opacity"]+1||2)-1)*((+h.opacity+1||2)-1)*((+$.o+1||2)-1);var J=(r(a["stroke-width"])||1)*.75;W=u(o(W,0),1),a["stroke-width"]==null&&(J=h["stroke-width"]),a["stroke-width"]&&(X.weight=J),J&&J<1&&(W*=J)&&(X.weight=1),X.opacity=W,a["stroke-linejoin"]&&(X.joinstyle=a["stroke-linejoin"]||"miter"),X.miterlimit=a["stroke-miterlimit"]||8,a["stroke-linecap"]&&(X.endcap=a["stroke-linecap"]=="butt"?"flat":a["stroke-linecap"]=="square"?"square":"round");if(a["stroke-dasharray"]){var K={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};X.dashstyle=K[t](a["stroke-dasharray"])?K[a["stroke-dasharray"]]:d}V&&c.appendChild(X)}if(b.type=="text"){b.paper.canvas.style.display=d;var Q=b.paper.span,G=100,Y=h.font&&h.font.match(/\d+(?:\.\d*)?(?=px)/);v=Q.style,h.font&&(v.font=h.font),h["font-family"]&&(v.fontFamily=h["font-family"]),h["font-weight"]&&(v.fontWeight=h["font-weight"]),h["font-style"]&&(v.fontStyle=h["font-style"]),Y=r(h["font-size"]||Y&&Y[0])||10,v.fontSize=Y*G+"px",b.textpath.string&&(Q.innerHTML=n(b.textpath.string).replace(/</g,"&#60;").replace(/&/g,"&#38;").replace(/\n/g,"<br>"));var Z=Q.getBoundingClientRect();b.W=h.w=(Z.right-Z.left)/G,b.H=h.h=(Z.bottom-Z.top)/G,b.X=h.x,b.Y=h.y+b.H/2,("x"in a||"y"in a)&&(b.path.v=e.format("m{0},{1}l{2},{1}",s(h.x*w),s(h.y*w),s(h.x*w)+1));var et=["x","y","text","font","font-family","font-weight","font-style","font-size"];for(var tt=0,nt=et.length;tt<nt;tt++)if(et[tt]in a){b._.dirty=1;break}switch(h["text-anchor"]){case"start":b.textpath.style["v-text-align"]="left",b.bbx=b.W/2;break;case"end":b.textpath.style["v-text-align"]="right",b.bbx=-b.W/2;break;default:b.textpath.style["v-text-align"]="center",b.bbx=0}b.textpath.style["v-text-kern"]=!0}},L=function(t,s,o){t.attrs=t.attrs||{};var u=t.attrs,a=Math.pow,f,l,c="linear",h=".5 .5";t.attrs.gradient=s,s=n(s).replace(e._radial_gradient,function(e,t,n){return c="radial",t&&n&&(t=r(t),n=r(n),a(t-.5,2)+a(n-.5,2)>.25&&(n=i.sqrt(.25-a(t-.5,2))*((n>.5)*2-1)+.5),h=t+p+n),d}),s=s.split(/\s*\-\s*/);if(c=="linear"){var v=s.shift();v=-r(v);if(isNaN(v))return null}var m=e._parseDots(s);if(!m)return null;t=t.shape||t.node;if(m.length){t.removeChild(o),o.on=!0,o.method="none",o.color=m[0].color,o.color2=m[m.length-1].color;var g=[];for(var y=0,b=m.length;y<b;y++)m[y].offset&&g.push(m[y].offset+p+m[y].color);o.colors=g.length?g.join():"0% "+o.color,c=="radial"?(o.type="gradientTitle",o.focus="100%",o.focussize="0 0",o.focusposition=h,o.angle=0):(o.type="gradient",o.angle=(270-v)%360),t.appendChild(o)}return 1},A=function(t,n){this[0]=this.node=t,t.raphael=!0,this.id=e._oid++,t.raphaelid=this.id,this.X=0,this.Y=0,this.attrs={},this.paper=n,this.matrix=e.matrix(),this._={transform:[],sx:1,sy:1,dx:0,dy:0,deg:0,dirty:1,dirtyT:1},!n.bottom&&(n.bottom=this),this.prev=n.top,n.top&&(n.top.next=this),n.top=this,this.next=null},O=e.el;A.prototype=O,O.constructor=A,O.transform=function(t){if(t==null)return this._.transform;var r=this.paper._viewBoxShift,i=r?"s"+[r.scale,r.scale]+"-1-1t"+[r.dx,r.dy]:d,s;r&&(s=t=n(t).replace(/\.{3}|\u2026/g,this._.transform||d)),e._extractTransform(this,i+t);var o=this.matrix.clone(),u=this.skew,a=this.node,f,l=~n(this.attrs.fill).indexOf("-"),c=!n(this.attrs.fill).indexOf("url(");o.translate(-0.5,-0.5);if(c||l||this.type=="image"){u.matrix="1 0 0 1",u.offset="0 0",f=o.split();if(l&&f.noRotation||!f.isSimple){a.style.filter=o.toFilter();var h=this.getBBox(),v=this.getBBox(1),m=h.x-v.x,g=h.y-v.y;a.coordorigin=m*-w+p+g*-w,N(this,1,1,m,g,0)}else a.style.filter=d,N(this,f.scalex,f.scaley,f.dx,f.dy,f.rotate)}else a.style.filter=d,u.matrix=n(o),u.offset=o.offset();return s&&(this._.transform=s),this},O.rotate=function(e,t,i){if(this.removed)return this;if(e!=null){e=n(e).split(l),e.length-1&&(t=r(e[1]),i=r(e[2])),e=r(e[0]),i==null&&(t=i);if(t==null||i==null){var s=this.getBBox(1);t=s.x+s.width/2,i=s.y+s.height/2}return this._.dirtyT=1,this.transform(this._.transform.concat([["r",e,t,i]])),this}},O.translate=function(e,t){return this.removed?this:(e=n(e).split(l),e.length-1&&(t=r(e[1])),e=r(e[0])||0,t=+t||0,this._.bbox&&(this._.bbox.x+=e,this._.bbox.y+=t),this.transform(this._.transform.concat([["t",e,t]])),this)},O.scale=function(e,t,i,s){if(this.removed)return this;e=n(e).split(l),e.length-1&&(t=r(e[1]),i=r(e[2]),s=r(e[3]),isNaN(i)&&(i=null),isNaN(s)&&(s=null)),e=r(e[0]),t==null&&(t=e),s==null&&(i=s);if(i==null||s==null)var o=this.getBBox(1);return i=i==null?o.x+o.width/2:i,s=s==null?o.y+o.height/2:s,this.transform(this._.transform.concat([["s",e,t,i,s]])),this._.dirtyT=1,this},O.hide=function(){return!this.removed&&(this.node.style.display="none"),this},O.show=function(){return!this.removed&&(this.node.style.display=d),this},O._getBBox=function(){return this.removed?{}:{x:this.X+(this.bbx||0)-this.W/2,y:this.Y-this.H,width:this.W,height:this.H}},O.remove=function(){if(!this.removed&&!!this.node.parentNode){this.paper.__set__&&this.paper.__set__.exclude(this),e.eve.unbind("raphael.*.*."+this.id),e._tear(this,this.paper),this.node.parentNode.removeChild(this.node),this.shape&&this.shape.parentNode.removeChild(this.shape);for(var t in this)this[t]=typeof this[t]=="function"?e._removedFactory(t):null;this.removed=!0}},O.attr=function(n,r){if(this.removed)return this;if(n==null){var i={};for(var s in this.attrs)this.attrs[t](s)&&(i[s]=this.attrs[s]);return i.gradient&&i.fill=="none"&&(i.fill=i.gradient)&&delete i.gradient,i.transform=this._.transform,i}if(r==null&&e.is(n,"string")){if(n==f&&this.attrs.fill=="none"&&this.attrs.gradient)return this.attrs.gradient;var o=n.split(l),u={};for(var a=0,h=o.length;a<h;a++)n=o[a],n in this.attrs?u[n]=this.attrs[n]:e.is(this.paper.customAttributes[n],"function")?u[n]=this.paper.customAttributes[n].def:u[n]=e._availableAttrs[n];return h-1?u:u[o[0]]}if(this.attrs&&r==null&&e.is(n,"array")){u={};for(a=0,h=n.length;a<h;a++)u[n[a]]=this.attr(n[a]);return u}var p;r!=null&&(p={},p[n]=r),r==null&&e.is(n,"object")&&(p=n);for(var d in p)c("raphael.attr."+d+"."+this.id,this,p[d]);if(p){for(d in this.paper.customAttributes)if(this.paper.customAttributes[t](d)&&p[t](d)&&e.is(this.paper.customAttributes[d],"function")){var v=this.paper.customAttributes[d].apply(this,[].concat(p[d]));this.attrs[d]=p[d];for(var m in v)v[t](m)&&(p[m]=v[m])}p.text&&this.type=="text"&&(this.textpath.string=p.text),k(this,p)}return this},O.toFront=function(){return!this.removed&&this.node.parentNode.appendChild(this.node),this.paper&&this.paper.top!=this&&e._tofront(this,this.paper),this},O.toBack=function(){return this.removed?this:(this.node.parentNode.firstChild!=this.node&&(this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild),e._toback(this,this.paper)),this
)},O.insertAfter=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[t.length-1]),t.node.nextSibling?t.node.parentNode.insertBefore(this.node,t.node.nextSibling):t.node.parentNode.appendChild(this.node),e._insertafter(this,t,this.paper),this)},O.insertBefore=function(t){return this.removed?this:(t.constructor==e.st.constructor&&(t=t[0]),t.node.parentNode.insertBefore(this.node,t.node),e._insertbefore(this,t,this.paper),this)},O.blur=function(t){var n=this.node.runtimeStyle,r=n.filter;r=r.replace(g,d),+t!==0?(this.attrs.blur=t,n.filter=r+p+h+".Blur(pixelradius="+(+t||1.5)+")",n.margin=e.format("-{0}px 0 0 -{0}px",s(+t||1.5))):(n.filter=r,n.margin=0,delete this.attrs.blur)},e._engine.path=function(e,t){var n=M("shape");n.style.cssText=b,n.coordsize=w+p+w,n.coordorigin=t.coordorigin;var r=new A(n,t),i={fill:"none",stroke:"#000"};e&&(i.path=e),r.type="path",r.path=[],r.Path=d,k(r,i),t.canvas.appendChild(n);var s=M("skew");return s.on=!0,n.appendChild(s),r.skew=s,r.transform(d),r},e._engine.rect=function(t,n,r,i,s,o){var u=e._rectPath(n,r,i,s,o),a=t.path(u),f=a.attrs;return a.X=f.x=n,a.Y=f.y=r,a.W=f.width=i,a.H=f.height=s,f.r=o,f.path=u,a.type="rect",a},e._engine.ellipse=function(e,t,n,r,i){var s=e.path(),o=s.attrs;return s.X=t-r,s.Y=n-i,s.W=r*2,s.H=i*2,s.type="ellipse",k(s,{cx:t,cy:n,rx:r,ry:i}),s},e._engine.circle=function(e,t,n,r){var i=e.path(),s=i.attrs;return i.X=t-r,i.Y=n-r,i.W=i.H=r*2,i.type="circle",k(i,{cx:t,cy:n,r:r}),i},e._engine.image=function(t,n,r,i,s,o){var u=e._rectPath(r,i,s,o),a=t.path(u).attr({stroke:"none"}),l=a.attrs,c=a.node,h=c.getElementsByTagName(f)[0];return l.src=n,a.X=l.x=r,a.Y=l.y=i,a.W=l.width=s,a.H=l.height=o,l.path=u,a.type="image",h.parentNode==c&&c.removeChild(h),h.rotate=!0,h.src=n,h.type="tile",a._.fillpos=[r,i],a._.fillsize=[s,o],c.appendChild(h),N(a,1,1,0,0,0),a},e._engine.text=function(t,r,i,o){var u=M("shape"),a=M("path"),f=M("textpath");r=r||0,i=i||0,o=o||"",a.v=e.format("m{0},{1}l{2},{1}",s(r*w),s(i*w),s(r*w)+1),a.textpathok=!0,f.string=n(o),f.on=!0,u.style.cssText=b,u.coordsize=w+p+w,u.coordorigin="0 0";var l=new A(u,t),c={fill:"#000",stroke:"none",font:e._availableAttrs.font,text:o};l.shape=u,l.path=a,l.textpath=f,l.type="text",l.attrs.text=n(o),l.attrs.x=r,l.attrs.y=i,l.attrs.w=1,l.attrs.h=1,k(l,c),u.appendChild(f),u.appendChild(a),t.canvas.appendChild(u);var h=M("skew");return h.on=!0,u.appendChild(h),l.skew=h,l.transform(d),l},e._engine.setSize=function(t,n){var r=this.canvas.style;return this.width=t,this.height=n,t==+t&&(t+="px"),n==+n&&(n+="px"),r.width=t,r.height=n,r.clip="rect(0 "+t+" "+n+" 0)",this._viewBox&&e._engine.setViewBox.apply(this,this._viewBox),this},e._engine.setViewBox=function(t,n,r,i,s){e.eve("raphael.setViewBox",this,this._viewBox,[t,n,r,i,s]);var u=this.width,a=this.height,f=1/o(r/u,i/a),l,c;return s&&(l=a/i,c=u/r,r*l<u&&(t-=(u-r*l)/2/l),i*c<a&&(n-=(a-i*c)/2/c)),this._viewBox=[t,n,r,i,!!s],this._viewBoxShift={dx:-t,dy:-n,scale:f},this.forEach(function(e){e.transform("...")}),this};var M;e._engine.initWin=function(e){var t=e.document;t.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!t.namespaces.rvml&&t.namespaces.add("rvml","urn:schemas-microsoft-com:vml"),M=function(e){return t.createElement("<rvml:"+e+' class="rvml">')}}catch(n){M=function(e){return t.createElement("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}},e._engine.initWin(e._g.win),e._engine.create=function(){var t=e._getContainer.apply(0,arguments),n=t.container,r=t.height,i,s=t.width,o=t.x,u=t.y;if(!n)throw new Error("VML container not found.");var a=new e._Paper,f=a.canvas=e._g.doc.createElement("div"),l=f.style;return o=o||0,u=u||0,s=s||512,r=r||342,a.width=s,a.height=r,s==+s&&(s+="px"),r==+r&&(r+="px"),a.coordsize=w*1e3+p+w*1e3,a.coordorigin="0 0",a.span=e._g.doc.createElement("span"),a.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;",f.appendChild(a.span),l.cssText=e.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",s,r),n==1?(e._g.doc.body.appendChild(f),l.left=o+"px",l.top=u+"px",l.position="absolute"):n.firstChild?n.insertBefore(f,n.firstChild):n.appendChild(f),a.renderfix=function(){},a},e.prototype.clear=function(){e.eve("raphael.clear",this),this.canvas.innerHTML=d,this.span=e._g.doc.createElement("span"),this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;",this.canvas.appendChild(this.span),this.bottom=this.top=null},e.prototype.remove=function(){e.eve("raphael.remove",this),this.canvas.parentNode.removeChild(this.canvas);for(var t in this)this[t]=typeof this[t]=="function"?e._removedFactory(t):null;return!0};var _=e.st;for(var D in O)O[t](D)&&!_[t](D)&&(_[D]=function(e){return function(){var t=arguments;return this.forEach(function(n){n[e].apply(n,t)})}}(D))}(window.Raphael);var Util={isInteger:function(e){var t=/^\s*-?\s*\d+\s*(.0+)?$/;return t.test(e)},isNumber:function(e){return!isNaN(parseFloat(e,10))&&isFinite(e)},isPrimeNumber:function(e){var t=[];return t=Util.getFactors(e),t.length==2?!0:!1},getFactors:function(e){var t=[],n=e;if(e==1)return t.push(1),t;for(var r=0;r<n;r++)e%r==0&&(n=e/r,t.push(r),n!=r&&t.push(n));return t.sort(function(e,t){return e-t}),t},getPrimeFactors:function(e){var t=[],n=[];t=Util.getFactors(e);for(var r=0;r<t.length;r++)Util.isPrimeNumber(t[r])&&n.push(t[r]);return n},getWholePrimeFactors:function(e){var t=[],n=[];t=Util.getPrimeFactors(e);for(var r=0;r<t.length;r++)for(var i=t[r];i<=e;i*=t[r])e%i==0&&n.push(t[r]);return n},findDistance:function(e,t,n,r){var i=e-n,s=t-r;return Math.sqrt(i*i+s*s)},findAngle:function(e,t,n,r){return t==r?e>n?Math.PI:0:e==n?t>r?Math.PI/2:3*Math.PI/2:(angle=-Math.atan((r-t)/(n-e)),n<e?angle+=Math.PI:r>t&&(angle+=2*Math.PI),angle)},radianToDegree:function(e){return Math.round(e*(180/Math.PI))},degreeToRadian:function(e){return e*(Math.PI/180)},degreeToRadians:function(e){return e*(Math.PI/180)},formatNumber:function(e,t){return Math.floor(e*t*10)/(t*10)},numberTurkishFloating:function(e,t){if(t==null||t==undefined)t=1;if(t<1)return""+Math.floor(e+.5);var n=Math.pow(10,t);e+=1,e*=n,e+=.5,e=Math.floor(e);var r=Math.floor(e/n),i=""+(e%n+n);i=i.substring(1,i.length);if(i==0){i="";for(var s=0;s<t;s++)i+="0"}return r-1+","+i},rand01:function(){return Math.floor(Math.random()*2)},randomInteger:function(e,t,n,r){var i=[];if(n!=undefined&&n!=null){if(r===!0)i=n;else{n.sort(function(e,t){return e-t});var s=0;for(var o=0;o<n.length;o++){var u=n[o];Util.isInteger(u)&&u<t&&u>=e&&i[s-1]!=u&&(i.push(u),s++)}}t-=i.length}if(t<=e)throw"Impossible random number";var a=Math.floor(Math.random()*(t-e)+e);for(var o=0;o<i.length;o++){if(!(i[o]<=a))return a;a++}return a},randomDigit:function(){return Util.randomInteger(0,10)},gcd:function(e,t,n){return n==undefined?t?Util.gcd(t,e%t):e:Util.gcd(e,Util.gcd(t,n))},lcm:function(e,t,n,r){return n==null||n==undefined?e*t/Util.gcd(e,t):r==null||r==undefined?Util.lcm(e,Util.lcm(t,n)):Util.lcm(Util.lcm(e,t),Util.lcm(n,r))},reduceFractions:function(e,t){var n=Util.gcd(e,t);return[e/n,t/n]},loadImages:function(e,t){var n=e.length;for(var r in e){image=e[r];var i=$("<img id='"+image.id+"' />").attr("src",image.src).load(function(){if(!this.complete||typeof this.naturalWidth=="undefined"||this.naturalWidth==0||this.naturalWidth==null)throw"Broken Image: "+image;n--,n==0&&t()});$("head").append(i)}e.length==0&&t()},getShuffledArray:function(e,t){if(t==null||t==undefined)t=0;var n=[];for(var r=t,i=0;r<e;r++,i++)n[i]=r;var s=Math.floor(e-t);for(var r=s-1;r>=0;r--){var o=parseInt(Math.random()*s,10),u=n[r];n[r]=n[o],n[o]=u}return n},centerOfPoints:function(e){var t=0,n=0;for(var r=0;r<e.length;r++)t+=e[r].x,n+=e[r].y;var i=t/e.length,s=n/e.length;return new Point(i,s)},rotateX:function(e,t,n){if(t instanceof Point3){t=[t.x,t.y,t.z];var r=!0}n instanceof Point3&&(n=[n.x,n.y,n.z]);if(e==0)return[t[0],t[1],t[2]];var i=Math.cos(e),s=Math.sin(e);if(n==undefined){var o=t[1]*i-t[2]*s,u=t[1]*s+t[2]*i;return new Point3(t[0],o,u)}var a=[t[1]-n[1],t[2]-n[2]],o=a[0]*i-a[1]*s,u=a[0]*s+a[1]*i;return r?new Point3(t[0],o+n[1],u+n[2]):[t[0],o+n[1],u+n[2]]},rotateY:function(e,t,n){if(t instanceof Point3){t=[t.x,t.y,t.z];var r=!0}n instanceof Point3&&(n=[n.x,n.y,n.z]);if(e==0)return[t[0],t[1],t[2]];var i=Math.cos(e),s=Math.sin(e);if(n==undefined){var o=t[0]*i+t[2]*s,u=-t[0]*s+t[2]*i;return new Point3(o,t[1],u)}var a=[t[0]-n[0],t[2]-n[2]],o=a[0]*i+a[1]*s,u=-a[0]*s+a[1]*i;return r?new Point3(o+n[0],t[1],u+n[2]):[o+n[0],t[1],u+n[2]]},rotateZ:function(e,t,n){if(t instanceof Point3){t=[t.x,t.y,t.z];var r=!0}n instanceof Point3&&(n=[n.x,n.y,n.z]);if(e==0)return[t[0],t[1],t[2]];var i=Math.cos(e),s=Math.sin(e);if(n==undefined){var o=t[0]*i-t[1]*s,u=t[0]*s+t[1]*i;return new Point3(o,u,t[2])}var a=[t[0]-n[0],t[1]-n[1]],o=a[0]*i-a[1]*s,u=a[0]*s+a[1]*i;return r?new Point3(o+n[0],u+n[1],t[2]):[o+n[0],u+n[1],t[2]]},createProjectionMatrixForObjectAt:function(e,t,n){n==undefined&&(n=1024);var r=3;return[1,0,128*r/n+e/n,e,0,1,-128*r/n+t/n,t,0,0,1/n,1,0,0,0,1]},createProjectionMatrix:function(e,t,n,r,i,s,o){return r===undefined?(r=-0.5,viewportRight=.5,s=1,o=1):s===undefined&&(s=r,o=i,r=0,i=0),[s/e,0,-1/n*(r+s/2),0,0,-o/t,-1/n*(i+o/2),0,0,0,-1/n,0,0,0,0,1]},project:function(e,t){e instanceof Point3&&(e=[e.x,e.y,e.z]),e[3]||(e[3]=1);var n=t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3],r=t[4]*e[0]+t[5]*e[1]+t[6]*e[2]+t[7]*e[3],i=t[8]*e[0]+t[9]*e[1]+t[10]*e[2]+t[11]*e[3];return n/=i,r/=i,new Point(n,r)},centerOfPoint3s:function(e){var t=0,n=0,r=0;for(var i=0;i<e.length;i++)t+=e[i].x,n+=e[i].y,r+=e[i].z;var s=t/e.length,o=n/e.length,u=r/e.length;return new Point3(s,o,u)},dom:function(e){var t=document.createElement(e.tag);return e.parent&&$(e.parent).append(t),t.id=e.id,t.className=e.class,e.css&&$(t).css(e.css),e.html&&$(t).html(e.html),e.value&&$(t).val(e.val),t},groupNumber:function(e,t){t==undefined&&(t=" ");var n=""+e;regex=/(\d+)(\d{3})/;do n=n.replace(regex,"$1"+t+"$2");while(regex.test(n));return n},format:function(e,t){t||(t={}),t.point=t.point||",",t.group=t.group||" ",t.places=t.places||0,t.suffix=t.suffix||"",t.prefix=t.prefix||"",regex=/(\d+)(\d{3})/,result=(isNaN(e)?0:Math.abs(e)).toFixed(t.places)+"";for(result=result.replace(".",t.point);regex.test(result)&&t.group;result=result.replace(regex,"$1"+t.group+"$2"));return(e<0?"-":"")+t.prefix+result+t.suffix},round:function(e,t){if(t<=0)throw"interval must be a positive number";t==undefined&&(t=1);var n=e>=0?1:-1;return e=Math.abs(e),e%t>=t/2?n*Math.ceil(e/t)*t:n*Math.floor(e/t)*t},floor:function(e,t){if(t<=0)throw"interval must be a positive number";t==undefined&&(t=1);var n=e>=0?1:-1;return e=Math.abs(e),n*Math.floor(e/t)*t},numberToString:function(e){switch(e){case 0:return"sıfır";case 1:return"bir";case 2:return"iki";case 3:return"üç";case 4:return"dört";case 5:return"beş";case 6:return"altı";case 7:return"yedi";case 8:return"sekiz";case 9:return"dokuz"}}};String.prototype.reverse=function(){var e="",t=this.length;while(t>0)e+=this.substring(t-1,t),t--;return e},jQuery(function(e){e.datepicker.regional.tr={closeText:"kapat",prevText:"&#x3c;geri",nextText:"ileri&#x3e",currentText:"bugün",monthNames:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],monthNamesShort:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"],dayNames:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],dayNamesShort:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],dayNamesMin:["Pz","Pt","Sa","Ça","Pe","Cu","Ct"],weekHeader:"Hf",dateFormat:"dd.mm.yy",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},e.datepicker.setDefaults(e.datepicker.regional.tr)}),function(e){function i(e,t){if(e.originalEvent.touches.length>1)return;e.preventDefault();var n=e.originalEvent.changedTouches[0],r=document.createEvent("MouseEvents");r.initMouseEvent(t,!0,!0,window,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}e.support.touch="ontouchend"in document;if(!e.support.touch)return;var t=e.ui.mouse.prototype,n=t._mouseInit,r;t._touchStart=function(e){var t=this;if(r||!t._mouseCapture(e.originalEvent.changedTouches[0]))return;r=!0,t._touchMoved=!1,i(e,"mouseover"),i(e,"mousemove"),i(e,"mousedown")},t._touchMove=function(e){if(!r)return;this._touchMoved=!0,i(e,"mousemove")},t._touchEnd=function(e){if(!r)return;i(e,"mouseup"),i(e,"mouseout"),this._touchMoved||i(e,"click"),r=!1},t._mouseInit=function(){var t=this;t.element.bind("touchstart",e.proxy(t,"_touchStart")).bind("touchmove",e.proxy(t,"_touchMove")).bind("touchend",e.proxy(t,"_touchEnd")),n.call(t)}}(jQuery),function(e){e.fn.shuffle=function(){return this.each(function(){var t=e(this).children();return t.length?e(this).html(e.shuffle(t)):this})},e.shuffle=function(e){for(var t,n,r=e.length;r;t=parseInt(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e}}(jQuery),function(e){function t(){var t=e("script:first"),n=t.css("color"),r=!1;if(/^rgba/.test(n))r=!0;else try{r=n!=t.css("color","rgba(0, 0, 0, 0.5)").css("color"),t.css("color",n)}catch(i){}return r}function r(t,n,r){var i="rgb"+(e.support.rgba?"a":"")+"("+parseInt(t[0]+r*(n[0]-t[0]),10)+","+parseInt(t[1]+r*(n[1]-t[1]),10)+","+parseInt(t[2]+r*(n[2]-t[2]),10);return e.support.rgba&&(i+=","+(t&&n?parseFloat(t[3]+r*(n[3]-t[3])):1)),i+=")",i}function i(e){var t,n;if(t=/#([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})/.exec(e))n=[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16),1];else if(t=/#([0-9a-fA-F])([0-9a-fA-F])([0-9a-fA-F])/.exec(e))n=[parseInt(t[1],16)*17,parseInt(t[2],16)*17,parseInt(t[3],16)*17,1];else if(t=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(e))n=[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),1];else if(t=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9\.]*)\s*\)/.exec(e))n=[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3],10),parseFloat(t[4])];return n}e.extend(!0,e,{support:{rgba:t()}});var n=["color","backgroundColor","borderBottomColor","borderLeftColor","borderRightColor","borderTopColor","outlineColor"];e.each(n,function(t,n){e.fx.step[n]=function(t){t.init||(t.begin=i(e(t.elem).css(n)),t.end=i(t.end),t.init=!0),t.elem.style[n]=r(t.begin,t.end,t.pos)}}),e.fx.step.borderColor=function(t){t.init||(t.end=i(t.end));var s=n.slice(2,6);e.each(s,function(n,s){t.init||(t[s]={begin:i(e(t.elem).css(s))}),t.elem.style[s]=r(t[s].begin,t.end,t.pos)}),t.init=!0}}(jQuery),Main.paperInit=function(){Main.paperInit.Path(),Main.paperInit.Point(),Main.paperInit.Item(),Main.paperInit.Text()},Main.raphaelInit=function(){Raphael.fn.triangle=function(e,t,n,r,i,s){var o="";o+="M"+e+","+t+"L"+n+","+r,o+="L"+i+","+s+" z";var u=this.path(o);return u.attr({x:e,y:s}),u},Raphael.fn.line=function(e,t,n,r){var i=this.path("M"+e+","+t+"L"+n+","+r);return i.attr("x",e),i.attr("y",t),i.data("isPath",!0),i},Raphael.fn.bowl=function(e,t,n,r){var i=this.path("M"+e+","+t+"L"+(e+n)+","+t+"L"+(e+n*.8)+","+(t+r)+"L"+(e+.2*n)+","+(t+r)+" z");return i.attr("x",e),i.attr("y",t),i.attr("width",n),i.attr("height",r),i},Raphael.fn.rhomboid=function(e,t,n,r,i){var s="";s+="M"+(e+n)+","+t+"L"+(e+n+r)+","+t,s+="L"+(e+r)+","+(t+i),s+="L"+e+","+(t+i)+" z";var o=this.path(s);return o.attr({x:e,y:t}),o},Raphael.fn.cube=function(e,t,n){var r=e+n*.4,i=t+n*.2,s=this.path("M"+e+","+i+"L"+e+","+(i+n)+"L"+(e+n)+","+(i+n)+"L"+(e+n)+","+i+"L"+e+","+i+"L"+r+","+t+"L"+(r+n)+","+t+"L"+(e+n)+","+i+"L"+(e+n)+","+(i+n)+"L"+(r+n)+","+(t+n)+"L"+(r+n)+","+t);return s.data("isPath",!0),s.attr("x",e),s.attr("y",t),s},Raphael.fn.rhombus=function(e,t,n,r){var i="";i+="M"+e+","+(t+r*.5),i+="L"+(e+n*.5)+","+t,i+="L"+(e+n)+","+(t+r*.5),i+="L"+(e+n*.5)+","+(t+r),i+="z";var s=this.path(i);return s.data({x:e,y:t,w:n,h:r}),s},Raphael.fn.trapezoid=function(e,t,n,r,i){var s="";s+="M"+e+","+(t+r),s+="L"+(e+(n-i)*.5)+","+t,s+="L"+(e+(n-i)*.5+i)+","+t,s+="L"+(e+n)+","+(t+r),s+=" z";var o=this.path(s);return o.data({x:e,y:t,w:n,h:r}),o},Raphael.fn.sphere=function(e,t,n,r){var i=this.ellipse(e,t,n,n).attr({fill:"r(.3,.25) white-"+r,stroke:"none"});return i.data("isEllipse",!0),i.attr("x",e),i.attr("y",t),i},Raphael.fn.sline=function(e,t,n){var r="";r+="M"+e+","+t+"L"+(e+10)+","+(t-10),r+="M"+e+","+t+"L"+(e+10)+","+(t+10),r+="M"+e+","+t+"L"+(e+n)+","+t,r+="M"+(e+n)+","+t+"L"+(e+n-10)+","+(t-10),r+="M"+(e+n)+","+t+"L"+(e+n-10)+","+(t+10);var i=this.path(r);return i.attr("x",e),i.attr("y",t),i},Raphael.fn.cylinder=function(e,t,n,r){var i,s,o,u,a="";i=e+n*.2,o=e+n*.8,s=t-r*.2,u=t-r*.2,a+="M"+e+","+t+"C"+i+","+s+","+o+","+u+","+(e+n)+","+t,i=e+n*.2,o=e+n*.8,s=t+r*.2,u=t+r*.2,a+="C"+o+","+u+","+i+","+s+","+e+","+t,a+="L"+e+","+(t+r),i=e+n*.2,o=e+n*.8,s=t+r+r*.2,u=t+r+r*.2,a+="C"+i+","+s+","+o+","+u+","+(e+n)+","+(t+r),a+="L"+(e+n)+","+t,i=e+n*.2,o=e+n*.8,s=t+r*.2,u=t+r*.2,a+="C"+o+","+u+","+i+","+s+","+e+","+t;var f=this.path(a);return f.data("isPath",!0),f.attr("x",e),f.attr("y",t),f.attr("fill","#fff"),f},Raphael.fn.fraction=function(e,t,n,r,i){var s=this.set();c2=t+i,c3=e+i*1.5,n&&(pay=this.text(e+i*5/7,t,n),pay.attr({"font-size":i}),s.push(pay)),r&&(payda=this.text(e+i*5/7,c2+i,r),payda.attr({"font-size":i}),s.push(payda));var o="M"+e+" "+c2+"L"+c3+" "+c2;return s.push(this.path(o)),s},Raphael.fn.segmentedUmbrella=function(e,t,n,r){var s=this.set();for(i=0;i<r;i++)s.push(this.path().attr({segment:[e,t,n,360*-i/r-90,360*(-i-1)/r-90]}));return s},Raphael.fn.segmentedCircle=function(e,t,n,r){var s=this.set();for(i=0;i<r;i++)s.push(this.path().attr({segment:[e,t,n,360*i/r-90,360*(i+1)/r-90]}));return s},Raphael.fn.segmentedRectangle=function(e,t,n,r,s,o){var u=this.set();for(i=0;i<s;i++)for(j=0;j<o;j++)u.push(this.rect(e+i*n/s,t+j*r/o,n/s,r/o));return u},Raphael.fn.regularPolygon=function(e,t,n,r,i,s){var o=[];for(var u=0;u<i;u++)o[u]=360/i*u;return this.equiradialPolygon(e,t,n,r,o,s)},Raphael.fn.equiradialPolygon=function(e,t,n,r,i,s){var o=Math.random()*60;s!=null&&(o=s);var u=Math.min(n,r)*.5,a=e+n*.5,f=t+r*.5,l="";for(var c=0;c<i.length;c++){l+=c==0?"M":"L";var h=Util.degreeToRadians(o+i[c]),p=a+u*Math.cos(h),d=f+u*Math.sin(h);l+=p+","+d}return l+="z",this.path(l)}},Main.paperInit.Item=function(){Item.prototype.animate=function(e){if(typeof e!=typeof {}||e instanceof Array)throw"The argument to Item.animate needs be a Hash";AnimationManager.animate(new AnimationManager.Animation(this,e))},Item.prototype.set_style=function(e){if(typeof e!=typeof {}||e instanceof Array)throw"The argument to Item.setStyle needs be a Hash";for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);return this},Item.prototype.getItemsByClass=function(e){function n(r){r.class==e?t.push(r):$(r.children).each(function(e,t){n(this)})}var t=[];return n(this),t}},Main.paperInit.Path=function(){Path.Point=function(e){var t=new Path.Circle(e,2);return t.setStyle({fillColor:"#000"}),t},Path.ArcByAngle=function(e,t,n,r){if(r==null||r==undefined)r=0;var i=new Point(e.x+Math.cos(Util.degreeToRadians(r))*t,e.y+Math.sin(Util.degreeToRadians(r))*t),s=new Point(e.x+Math.cos(Util.degreeToRadians(r+n)/2)*t,e.y+Math.sin(Util.degreeToRadians(r+n)/2)*t),o=new Point(e.x+Math.cos(Util.degreeToRadians(n))*t,e.y+Math.sin(Util.degreeToRadians(n))*t);return new Path.Arc(i,s,o)},Path.Triangle=function(e,t,n){var r=new Path;return r.add(n),r.add(e),r.add(t),r.closed=!0,r},Path.Bowl=function(e,t){var n=e.x,r=e.y,i=t.width,s=t.height,o=new Path,u=[];u.push(new Point(n,r)),u.push(new Point(n+i,r)),u.push(new Point(n+i*.8,r+s)),u.push(new Point(n+i*.2,r+s));for(var a=0;a<u.length;a++)o.add(u[a]);return o.closed=!0,o.vertexArray=u,o},Path.Rhomboid=function(e,t,n,r){if(r==undefined||r==null)r=0;var i=e.x,s=e.y,o=t.width,u=t.height,a=new Path,f=[];f.push(new Point(i+n,s)),f.push(new Point(i+n+o,s)),f.push(new Point(i+o,s+u)),f.push(new Point(i,s+u));var l=Util.centerOfPoints(f);for(var c=0;c<f.length;c++)r!=0&&(f[c]=f[c].getRotatedPoint(r,l)),a.add(f[c]);return a.centerPoint=l,a.closed=!0,a.vertexArray=f,a},Path.Cube=function(e,t,n){var r,i;n?(r=n.x,i=n.y):(r=.3,i=.5);var s=e.x,o=e.y,u=s+t*r,a=o+t*i,f=new Group,l=new Point(s,a),c=new Point(s,a+t),h=new Point(s+t,a+t),p=new Point(u+t,o+t),d=new Point(u+t,o),v=new Point(u,o),m=new Point(s+t,a),g=new Path;return g.add(l),g.add(c),g.add(h),g.add(p),g.add(d),g.add(v),g.closed=!0,f.addChild(g),f.addChild(new Path.Line(l,m)),f.addChild(new Path.Line(h,m)),f.addChild(new Path.Line(d,m)),f},Path.Rhombus=function(e,t){var n=e.x,r=e.y,i=t.width,s=t.height,o=new Path;return o.add([n,r+s*.5]),o.add([n+i*.5,r]),o.add([n+i,r+s*.5]),o.add([n+i*.5,r+s]),o.closed=!0,o},Path.Trapezoid=function(e,t,n,r,i){if(r==undefined||r==null)return new Path.IsoscelesTrapezoid(e,t,n);if(i==undefined||i==null)i=0;var s=e.x,o=e.y,u=t.width,a=t.height,f=new Path,l=[];l.push(new Point(s,o+a)),l.push(new Point(s+n,o)),l.push(new Point(s+u-r,o)),l.push(new Point(s+u,o+a));var c=Util.centerOfPoints(l);for(var h=0;h<l.length;h++)i!=0&&(l[h]=l[h].getRotatedPoint(i,c)),f.add(l[h]);return f.centerPoint=c,f.closed=!0,f.vertexArray=l,f},Path.IsoscelesTrapezoid=function(e,t,n,r){return new Path.Trapezoid(e,t,n,n,r)},Path.RegularPolygon=function(e,t,n,r){var i=[];for(var s=0;s<n;s++)i[s]=360/n*s;return new Path.EquiradialPolygon(e,t,i,r)},Path.EquiradialPolygon=function(e,t,n,r){var i=e.x,s=e.y,o=t.width,u=t.height,a=Math.random()*60;r!=null&&(a=r);var f=Math.min(o,u)*.5,l=i+o*.5,c=s+u*.5,h=[],p=new Path;for(var d=0;d<n.length;d++){var v=Util.degreeToRadians(-a-n[d]),m=l+f*Math.cos(v),g=c+f*Math.sin(v),e=new Point(m,g);p.add([m,g]),h.push(e)}return p.vertexArray=h,p.centerPoint=new Point(l,c),p.closed=!0,p},Path.TwoSidedArrow=function(e,t,n,r){var i=new Group,s=new Path.OneSidedArrow(Util.centerOfPoints([e,t]),e,n,r),o=new Path.OneSidedArrow(Util.centerOfPoints([e,t]),t,n,r);return i.addChild(s),i.addChild(o),i},Path.OneSidedArrow=function(e,t,n,r){n==null&&(n=3),r==null&&r==undefined&&(r=30);var i=new Group,s=new Path.Line(e,t),o=Util.radianToDegree(Math.asin((e.y-t.y)/e.getDistance(t))),u=Util.degreeToRadians(180+o+r),a=Util.degreeToRadians(180+o-r),f=new Path.Line(t,new Point(t.x+n*Math.cos(u),t.y-n*Math.sin(u))),l=new Path.Line(t,new Point(t.x+n*Math.cos(a),t.y-n*Math.sin(a))),c=new Path,h=t.findPointTo(e,n);return c.add(t),c.add(h.getRotatedPoint(r,t)),c.add(h.getRotatedPoint(-r,t)),c.closed=!0,s.strokeColor="#000",c.style={strokeColor:"#000",fillColor:"#000"},i.addChild(s),i.addChild(c),i.strokeWidth=2,i},Path.Cylinder=function(e,t){var n=e.x,r=e.y,i=t.width,s=t.height,o,u,a,f;o=n+i*.2,a=n+i*.8,u=r-s*.2,f=r-s*.2;var l=new Group,c=new Path;c.add(new Point(n,r)),c.cubicCurveTo(new Point(o,u),new Point(a,f),new Point(n+i,r)),o=n+i*.2,a=n+i*.8,u=r+s*.2,f=r+s*.2,c.cubicCurveTo(new Point(a,f),new Point(o,u),new Point(n,r)),c.lineTo(new Point(n,r+s)),o=n+i*.2,a=n+i*.8,u=r+s+s*.2,f=r+s+s*.2,c.cubicCurveTo(new Point(o,u),new Point(a,f),new Point(n+i,r+s)),c.lineTo(new Point(n+i,r)),o=n+i*.2,a=n+i*.8,u=r+s*.2,f=r+s*.2,c.cubicCurveTo(new Point(a,f),new Point(o,u),new Point(n,r)),c.closed=!0;var h=new Path;return o=n+i*.2,a=n+i*.8,u=r+s-s*.2,f=r+s-s*.2,h.add(new Point(n,r+s)),h.cubicCurveTo(new Point(o,u),new Point(a,f),new Point(n+i,r+s)),h.style={dashArray:[3.2]},l.addChild(h),l.addChild(c),l},Path.Pyramid=function(e,t){var n=new Group,r=new Path,i=new Point(e.x+t.width*0,e.y+t.height*.8),s=new Point(e.x+t.width*.45,e.y+t.height),o=new Point(e.x+t.width,e.y+t.height*.8),u=new Point(e.x+t.width*.5,e.y),a=new Point(e.x+t.width*.55,e.y+t.height*.6);r.add(i),r.add(s),r.add(o),r.add(u),r.closed=!0;var f=new Path.Line(i,a),l=new Path.Line(o,a),c=new Path.Line(u,a);return f.style={dashArray:[3,2]},l.style={dashArray:[3,2]},c.style={dashArray:[3,2]},n.addChild(f),n.addChild(l),n.addChild(c),n.addChild(r),n.addChild(new Path.Line(s,u)),n},Path.Cone=function(e,t){var n=e.x,r=e.y,i=t.width,s=t.height,o=new Point(n,r+s*.9),u=new Point(n+i*.5,r+s*1.1),a=new Point(n+i,r+s*.9),f=new Point(n+i*.5,r),l=new Point(n+i*.5,r+s*.7),c=new Group,h=new Path;h.add(o),h.arcTo(u,a),h.add(f),h.closed=!0;var p=new Path;return p.add(o),p.arcTo(l,a),p.class="dashed",p.style={dashArray:[3,2]},c.addChild(h),c.addChild(p),c},Path.Sphere=function(e,t){var n=e.x,r=e.y,i=new Point(n-t,r),s=new Point(n+t,r);px1=new Point(n,r+t*.2),px2=new Point(n,r-t*.2);var o=new Group,u=new Path.Circle(e,t),a=new Path,f=new Path;return a.add(i),a.arcTo(px1,s),f.add(i),f.arcTo(px2,s),f.style={dashArray:[3,2]},o.addChild(f),o.addChild(u),o.addChild(a),o},Path.SquarePrisim=function(e,t,n){return new Path.RectanglePrisim(e,new Size(t,t),new Size(n,n))},Path.RectanglePrisim=function(e,t,n){var r=e.x,i=e.y,s=new Point(r,i+n.height),o=new Point(r,i+t.height+n.height),u=new Point(r+t.width,i+n.height),a=new Point(r+n.width,i),f=new Point(r+t.width+n.width,i),l=new Point(r+n.width+t.width,i+t.height);p7=new Point(r+n.width,i+t.height),p8=new Point(r+t.width,i+t.height+n.height);var c=new Group,h=new Path;h.add(s),h.add(a),h.add(f),h.add(l),h.add(p8),h.add(o),h.add(s),h.add(u),h.add(p8);var p=new Path.Line(u,f),d=new Path.Line(o,p7),v=new Path.Line(p7,a),m=new Path.Line(p7,l);return d.style={dashArray:[3,2]},m.style={dashArray:[3,2]},v.style={dashArray:[3,2]},d.class="dashed",m.class="dashed",v.class="dashed",d.insertBelow(h),v.insertBelow(h),m.insertBelow(h),c.addChild(d),c.addChild(v),c.addChild(m),c.addChild(h),c.addChild(p),c},Path.TrianglePrisim=function(e,t){var n=e.x,r=e.y,i=t.width,s=t.height,o=.5,u=.3,a=new Group,f=new Point(n,r+s),l=new Point(n+i*(1-o),r+s),c=new Point(n+i*(1-o)*.5,r+s*u),h=new Point(n+i,r+s*(1-u)),p=new Point(n+i*(1-o)*.5+i*o,r),d=new Point(n+i*o,r+s*(1-u)),v=new Path;v.add(l),v.add(f),v.add(c),v.add(l),v.add(h),v.add(p),v.add(c);var m=new Path.Line(f,d),g=new Path.Line(p,d),y=new Path.Line(h,d);return m.style={dashArray:[3,2]},y.style={dashArray:[3,2]},g.style={dashArray:[3,2]},a.addChild(m),a.addChild(g),a.addChild(y),a.addChild(v),a},Path.SegmentedRectangle=function(e,t,n,r,i,s,o,u,a){if(a==null||a==undefined)a=!1;var f=new Group,l=new Path,c=0;if(a)for(var h=0;h<i;h++)for(var p=0;p<s;p++)l=Path.Rectangle(new Point(e+h*n/i,t+p*r/s),new Size(n/i,r/s)),l.strokeColor="#000",l.strokeWidth=1,f.addChild(l),c<o&&(l.fillColor=u,c+=1);else for(var p=0;p<s;p++)for(var h=0;h<i;h++)l=Path.Rectangle(new Point(e+h*n/i,t+p*r/s),new Size(n/i,r/s)),l.strokeColor="#000",l.strokeWidth=1,f.addChild(l),c<o&&(l.fillColor=u,c+=1);return f},Path.SegmentedCircle=function(e,t,n,r,i,s){if(s==null||s==undefined)s=!1;var o=new Group,u,a=2*Math.PI/r,f=-Math.PI/2,l=f+a,c;s?c=r:c=0;for(var u=0;u<r;u++){var h=new Path,p=new Point(e.x+Math.cos(f)*t,e.y+Math.sin(f)*t),d=new Point(e.x+Math.cos((f+l)/2)*t,e.y+Math.sin((f+l)/2)*t),v=new Point(e.x+Math.cos(l)*t,e.y+Math.sin(l)*t);h.moveTo(e),h.lineTo(p),h.arcTo(d,v),h.lineTo(e),h.closePath(),f+=a,l+=a,h.strokeColor="#000",h.strokeWidth=1,o.addChild(h),s?(c<=n&&(h.fillColor=i),c-=1):c<n&&(h.fillColor=i,c+=1)}return o},Path.Fraction=function(e,t,n,r,i,s){var o=new Group,u=new Path;return c2=t+i,c3=e+i*1.5,n&&(pay=new PointText(e+i*5/7,t),pay.content=n,pay.style=textStyle,o.addChild(pay)),r&&(payda=new PointText(e+i*5/7,c2+i),payda.content=r,payda.style=textStyle,o.addChild(payda)),u.strokeColor="#000",u.add(new Point(e,Math.floor(t+i)+.5)),u.add(new Point(e+i*s,Math.floor(t+i)+.5)),o.addChild(u),o},Path.TwoPointRectangle=function(e,t,n,r){n==undefined&&(n=6),r==undefined&&(r=n*.5),e=e.findPointTo(t,-r),t=t.findPointTo(e,-r);var i=[];return i.push(e.findPointTo(t,n*.5).getRotatedPoint(-90,e)),i.push(t.findPointTo(e,n*.5).getRotatedPoint(90,t)),i.push(t.findPointTo(e,n*.5).getRotatedPoint(-90,t)),i.push(e.findPointTo(t,n*.5).getRotatedPoint(90,e)),Path.DrawPoints(i)},Path.DrawPoints=function(e,t){t==undefined&&(t=!0);var n=new Path;for(var r=0;r<e.length;r++)n.add(e[r]);return n.closed=t,n}},Main.paperInit.Point=function(){Point.prototype.getRotatedPoint=function(e,t){return new Point(Math.cos(Util.degreeToRadian(e))*(this.x-t.x)-Math.sin(Util.degreeToRadian(e))*(this.y-t.y)+t.x,Math.sin(Util.degreeToRadian(e))*(this.x-t.x)+Math.cos(Util.degreeToRadian(e))*(this.y-t.y)+t.y)},Point.prototype.showOnCanvas=function(e){e==undefined&&(e=3);var t=new Path.Circle(this,e);return t.setStyle({fillColor:"#000",strokeWidth:2,strokeColor:"#fff"}),this.canvasPoint=t,t},Point.prototype.projectToLine=function(e,t){var n=this.subtract(t),r=e.subtract(t),i=n.dot(r);return r.multiply(i/r.dot(r)).add(t)},Point.prototype.isBetweenTwoLinePoints=function(e,t){var n=this.getDistance(e,!0),r=this.getDistance(t,!0),i=e.getDistance(t,!0);return n+r>i?!1:!0},Point.prototype.findPointTo=function(e,t,n){var r,i,s;return s=Util.findAngle(this.x,this.y,e.x,e.y),n?(r=this.x+Math.cos(s)*this.getDistance(e)*t/100,i=this.y-Math.sin(s)*this.getDistance(e)*t/100):(r=this.x+Math.cos(s)*t,i=this.y-Math.sin(s)*t),new Point(r,i)},Point.prototype.symmetricTo=function(e){var t=this.subtract(e);return t=new Point(-t.x,-t.y),t=t.add(e),t},Point.prototype.scale=function(e,t){t==undefined&&(t=this);var n=this.subtract(t);return n=n.multiply(e,e),n=n.add(t),n}},Main.paperInit.Text=function(){PointTextFadeIn=function(e){var t=new PointText(e.position);t.content=e.content,t.justification="center",t.opacity=0,e.duration||(e.duration=1e3),e.delay||(e.delay=0),t.animate({style:{opacity:1},duration:e.duration,delay:e.delay})}};
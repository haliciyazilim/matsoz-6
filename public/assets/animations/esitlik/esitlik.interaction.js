var Interaction={getFramework:function(){return"paper"},images:[{id:"scales_knuckle",src:"/assets/animations/denklem/scales_knuckle.png"},{id:"scales_bar",src:"/assets/animations/denklem/scales_bar.png"},{id:"scales_left",src:"/assets/animations/denklem/scales_left.png"},{id:"scales_right",src:"/assets/animations/denklem/scales_right.png"},{id:"weight_1",src:"/assets/animations/denklem/weight_1.png"},{id:"weight_2",src:"/assets/animations/denklem/weight_2.png"},{id:"weight_3",src:"/assets/animations/denklem/weight_3.png"},{id:"weight_4",src:"/assets/animations/denklem/weight_4.png"}],init:function(e){Interaction.container=e,Main.setObjective("Yandaki terazide sağdaki birim kütleleri sürükleyip sağ kefeye yerleştirerek eşitlik oluşturunuz."),Interaction.paper={width:$(e).width(),height:$(e).height()},Interaction.appendStatus({bottom:"0px",width:"420px",textAlign:"center",left:"35px",lineHeight:"27px"}),Interaction.createTool(),Interaction.prepareNextQuestion()},nextQuestion:function(e){Main.interactionProject.activeLayer.removeChildren(),Interaction.scales=new Scales({position:new Point(250,115)});var t=Util.randomInteger(1,5);Interaction.scales.callOnEqual(Interaction.onEqual),Interaction.scales.callBeforeAnimate(function(){Interaction.setStatus("")}),Interaction.generateWeights();do for(var n=0;n<t;n++){var r=new Weight({type:Util.randomInteger(1,5)});Interaction.scales.addWeightToLeft(r)}while(Interaction.scales.getTotalOfLeftWeights()<3||Interaction.scales.getTotalOfLeftWeights()>12);var i=Interaction.weights[Interaction.scales.leftWeights[Util.randomInteger(0,Interaction.scales.leftWeights.length)].value-1];i.raster.set_style({opacity:.5,"class":"disabled"}),i.class="disabled",AnimationManager.delay(function(){Interaction.scales.calculateWeights()},1e3)},preCheck:function(){},isAnswerCorrect:function(e){},onCorrectAnswer:function(){},onWrongAnswer:function(){},onFail:function(){},onEqual:function(){Interaction.pause();if(Interaction.scales.leftWeights.length==0)return;var e='<span style="color:green">Tebrikler!</span><br/>',t=0,n=0;for(var r=0;r<Interaction.scales.leftWeights.length;r++)e+='<span id="'+r+'">'+(r>0?" + ":"")+Interaction.scales.leftWeights[r].value+"</span>",t+=Interaction.scales.leftWeights[r].value;e+='<span id="'+r++ +'"> = </span>';for(var i=0;i<Interaction.scales.rightWeights.length;i++,r++)e+='<span id="'+r+'">'+(i>0?" + ":"")+Interaction.scales.rightWeights[i].value+"</span>",n+=Interaction.scales.rightWeights[i].value;e+='<br/><span id="'+r+'">'+t+" = "+n+"</span>";var s=Interaction.scales.leftWeights.length+Interaction.scales.rightWeights.length;Interaction.setStatus(e);for(var r=0;r<s+2;r++)$("span#"+r,Interaction.status).css({opacity:0}).delay(1e3*r).animate({opacity:1},1e3);AnimationManager.delay(function(){Interaction.resume(),Main.interactionProject.activeLayer.animate({style:{opacity:0},duration:500,callback:function(){Main.interactionProject.activeLayer.removeChildren(),Interaction.setStatus(""),Interaction.prepareNextQuestion(),Main.interactionProject.activeLayer.set_style({opacity:1})}})},(s+5)*1e3)},generateWeights:function(){Interaction.weightsReferencePoint=new Point(550,45.5),Interaction.weights=[];for(var e=0;e<4;e++){var t=new Weight({type:e+1});t.raster.class="static_weight",t.raster.position=Interaction.weightsReferencePoint.add(0,60*e),Interaction.weights.push(t)}},createTool:function(){var e=new Tool;e.onMouseDown=function(e){if(Interaction.isPaused())return;for(var t=0;t<Interaction.weights.length;t++){var n=Interaction.weights[t].raster;if(n.bounds.contains(e.point)){if(n.class=="static_weight")this.item=n.weight.clone().raster,this.item.class="draggable_weight",Interaction.weights.push(this.item.weight);else{if(n.class=="disabled")return;this.item=n}this.item.opacity=.8,this.drag=!0,this.firstPosition=this.item.position,this.totalDelta=new Point(0,0);return}}},e.onMouseDrag=function(e){if(Interaction.isPaused())return;this.drag==1&&(console.log(this.item),this.totalDelta=this.totalDelta.add(e.delta),this.item.position=this.firstPosition.add(this.totalDelta))},e.onMouseUp=function(e){Interaction.isPaused()||this.drag==1&&(Interaction.scales.insideRight(e.point)?this.item.weight.owner==null?Interaction.scales.addWeightToRight(this.item.weight,!0)===!1&&(Interaction.weights.splice(Interaction.weights.indexOf(this.item.weight),1),this.item.remove()):(Interaction.pause(),this.item.animate({style:{position:this.firstPosition},duration:this.item.position.getDistance(this.firstPosition)*2,callback:Interaction.resume})):(Interaction.weights.splice(Interaction.weights.indexOf(this.item.weight),1),Interaction.scales.removeWeight(this.item.weight,!0),this.item.remove()),this.item.opacity=1),this.item=null,this.drag=!1,this.firstPosition=null,this.totalDelta=null},e.activate()}};
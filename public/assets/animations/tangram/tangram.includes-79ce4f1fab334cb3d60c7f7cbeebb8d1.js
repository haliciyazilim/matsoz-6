function __Styles(){tangramDefaultColor=new RgbColor(0,0,0),animationColors=[],animationColors[0]="#de5858",animationColors[1]="#58b6de",animationColors[2]="#4ace59",animationColors[3]="#4c59dc",animationColors[4]="#deba58",animationColors[5]="#d958de",animationColors[6]="#727272",interactionColors=[],interactionColors[0]="#de5858",interactionColors[1]="#58b6de",interactionColors[2]="#4ace59",interactionColors[3]="#4c59dc",interactionColors[4]="#deba58",interactionColors[5]="#d958de",interactionColors[6]="#727272",interactionSelectedColors=[],interactionSelectedColors[0]="#a64242",interactionSelectedColors[1]="#4288a6",interactionSelectedColors[2]="#379a43",interactionSelectedColors[3]="#3943a5",interactionSelectedColors[4]="#a68b42",interactionSelectedColors[5]="#a342a6",interactionSelectedColors[6]="#555555"}function MyShapes(e,t,n,r){this.myType=t,this.pointsArr=[];for(var i=0;i<e.length;i++)this.pointsArr[i]=e[i];this.centerPoint=Util.centerOfPoints(this.pointsArr),this.strokeColor=n,this.fillColor=r,this.updatePointsArr=function(e){this.shape&&this.shape.remove(),this.pointsArr=[];for(var t=0;t<e.length;t++)this.pointsArr[t]=e[t];this.drawShape(this.strokeColor,this.fillColor),this.shape.parentObject=this,this.computeLinesArray()},this.drawShape=function(t,n){var r=new Path;r.moveTo(e[0]);for(var i=0;i<this.pointsArr.length;i++)r.lineTo(this.pointsArr[i]);return r.lineTo(this.pointsArr[0]),r.closed=!0,r.strokeColor=t,r.fillColor=n,this.centerPoint=Util.centerOfPoints(this.pointsArr),r},this.shape=this.drawShape(n,r),this.shape.parentObject=this,this.setPos=function(e){var t=e.subtract(this.shape.position);for(var n=0;n<this.pointsArr.length;n++)this.pointsArr[n]=this.pointsArr[n].add(t);this.shape.position=e,this.centerPoint=Util.centerOfPoints(this.pointsArr),this.computeLinesArray()},this.setRotation=function(e){for(var t=0;t<this.pointsArr.length;t++)this.pointsArr[t]=this.pointsArr[t].getRotatedPoint(e,this.centerPoint);this.shape.rotate(e,this.centerPoint),this.centerPoint=Util.centerOfPoints(this.pointsArr),this.computeLinesArray()},this.computeLinesArray=function(){this.linesArr=[];for(var e=0;e<this.pointsArr.length;e++){var t=this.pointsArr[e],n=this.pointsArr[(e+1)%this.pointsArr.length],r=Util.findAngle(t.x,t.y,n.x,n.y);while(r>Math.PI)r-=Math.PI;this.linesArr.push({p1:t,p2:n,angle:r})}},this.computeLinesArray(),this.trySnapTo=function(){}}function flipSelectedItem(){Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.tangram.flipPiece4(),Interaction.rotatableItem=Interaction.tangram.pieces[3].shape,Interaction.rotItems=new Group;for(var e=0;e<Interaction.rotatableItem.parentObject.pointsArr.length;e++){var t=Interaction.rotatableItem.parentObject.pointsArr[e].findPointTo(Interaction.rotatableItem.parentObject.centerPoint,-10),n=Util.findAngle(Interaction.rotatableItem.parentObject.pointsArr[e].x,Interaction.rotatableItem.parentObject.pointsArr[e].y,Interaction.rotatableItem.position.x,Interaction.rotatableItem.position.y);n=Util.radianToDegree(n),n=225-n;var r=new Raster("rotationArrow");r.position=new Point(t),r.rotate(n,t);var i=new Path.Circle(t,10);i.fillColor="red",i.class="rotatable",i.opacity=0,Interaction.rotItems.addChild(i),Interaction.rotItems.addChild(r)}Interaction.rotatableItem.fillColor=interactionSelectedColors[Interaction.randomNumber],Interaction.rotatableItem.strokeColor=interactionSelectedColors[Interaction.randomNumber],Interaction.rotItems.class="rotatable"}var Tangram=Class.extend({init:function(){},drawPieces:function(e,t,n,r){if(e==null||e==undefined)e=new Point(0,0);if(t==null||t==undefined)t=120;this.strokeColor=n,this.fillColor=r;var i=new Point(e.x,e.y),s=new Point(e.x+t,e.y),o=new Point(e.x+t*.5,e.y+t*.5),u=new Point(e.x,e.y),a=new Point(e.x+t*.5,e.y+t*.5),f=new Point(e.x,e.y+t),l=new Point(e.x+t*.5,e.y+t*.5),c=new Point(e.x+t*.75,e.y+t*.25),h=new Point(e.x+t*.75,e.y+t*.75),p=new Point(e.x+t*.75,e.y+t*.25),d=new Point(e.x+t,e.y),v=new Point(e.x+t,e.y+t*.5),m=new Point(e.x+t*.75,e.y+t*.75),g=new Point(e.x+t*.25,e.y+t*.75),y=new Point(e.x+t*.5,e.y+t*.5),b=new Point(e.x+t*.75,e.y+t*.75),w=new Point(e.x+t*.5,e.y+t),E=new Point(e.x,e.y+t),S=new Point(e.x+t*.25,e.y+t*.75),x=new Point(e.x+t*.5,e.y+t),T=new Point(e.x+t*.5,e.y+t),N=new Point(e.x+t,e.y+t*.5),C=new Point(e.x+t,e.y+t);animatePoints=[],animatePoints[0]=new Point(-2,-3),animatePoints[1]=new Point(-4,-1),animatePoints[2]=new Point(1,-1),animatePoints[3]=new Point(4,-4),animatePoints[4]=new Point(-2,2),animatePoints[5]=new Point(-4,4),animatePoints[6]=new Point(3,2),this.pieces=[];var k=[];k[0]=new Point(i),k[1]=new Point(s),k[2]=new Point(o),this.pieces[0]=new MyShapes(k,1,n,r),this.pieces[0].shape.class="draggable";var L=[];L[0]=new Point(u),L[1]=new Point(a),L[2]=new Point(f),this.pieces[1]=new MyShapes(L,1,n,r),this.pieces[1].shape.class="draggable";var A=[];A[0]=new Point(l),A[1]=new Point(c),A[2]=new Point(h),this.pieces[2]=new MyShapes(A,2,n,r),this.pieces[2].shape.class="draggable";var O=[];O[0]=new Point(p),O[1]=new Point(d),O[2]=new Point(v),O[3]=new Point(m),this.pieces[3]=new MyShapes(O,3,n,r),this.pieces[3].shape.class="draggable";var M=[];M[0]=new Point(g),M[1]=new Point(y),M[2]=new Point(b),M[3]=new Point(w),this.pieces[4]=new MyShapes(M,4,n,r),this.pieces[4].shape.class="draggable";var _=[];_[0]=new Point(E),_[1]=new Point(S),_[2]=new Point(x),this.pieces[5]=new MyShapes(_,2,n,r),this.pieces[5].shape.class="draggable";var D=[];D[0]=new Point(T),D[1]=new Point(N),D[2]=new Point(C),this.pieces[6]=new MyShapes(D,5,n,r),this.pieces[6].shape.class="draggable"},animatePieces:function(e){if(this.pieces){var t=new AnimationHelper({myPoint:new Point(0,0)}),n=new AnimationHelper({myPoint:new Point(0,0)}),r=new AnimationHelper({myPoint:new Point(0,0)}),i=new AnimationHelper({myPoint:new Point(0,0)}),s=new AnimationHelper({myPoint:new Point(0,0)}),o=new AnimationHelper({myPoint:new Point(0,0)}),u=new AnimationHelper({myPoint:new Point(0,0)}),a=this.pieces[0],f=this.pieces[1],l=this.pieces[2],c=this.pieces[3],h=this.pieces[4],p=this.pieces[5],d=this.pieces[6],v=this.pieces[0].shape.position,m=this.pieces[1].shape.position,g=this.pieces[2].shape.position,y=this.pieces[3].shape.position,b=this.pieces[4].shape.position,w=this.pieces[5].shape.position,E=this.pieces[6].shape.position;t.animate({style:{myPoint:new Point(animatePoints[0])},duration:1e3,delay:e,animationType:"easeInOutQuad",update:function(){a.setPos(new Point(v.add(this.myPoint)))}}),n.animate({style:{myPoint:new Point(animatePoints[1])},duration:1e3,delay:e,animationType:"easeInOutQuad",update:function(){f.setPos(new Point(m.add(this.myPoint)))}}),r.animate({style:{myPoint:new Point(animatePoints[2])},duration:1e3,delay:e,animationType:"easeInOutQuad",update:function(){l.setPos(new Point(g.add(this.myPoint)))}}),i.animate({style:{myPoint:new Point(animatePoints[3])},duration:1e3,delay:e,animationType:"easeInOutQuad",update:function(){c.setPos(new Point(y.add(this.myPoint)))}}),s.animate({style:{myPoint:new Point(animatePoints[4])},duration:1e3,delay:e,animationType:"easeInOutQuad",update:function(){h.setPos(new Point(b.add(this.myPoint)))}}),o.animate({style:{myPoint:new Point(animatePoints[5])},duration:1e3,delay:e,animationType:"easeInOutQuad",update:function(){p.setPos(new Point(w.add(this.myPoint)))}}),u.animate({style:{myPoint:new Point(animatePoints[6])},duration:1e3,delay:e,animationType:"easeInOutQuad",update:function(){d.setPos(new Point(E.add(this.myPoint)))}})}},flipPiece4:function(){var e=this.pieces[3].pointsArr,t=[];t[0]=new Point(e[0].x,e[1].y),t[1]=new Point(e[1].x,e[0].y),t[2]=new Point(e[2].x,e[3].y),t[3]=new Point(e[3].x,e[2].y),this.pieces[3]&&(this.pieces[3].shape.remove(),this.pieces[3]=null),this.pieces[3]=new MyShapes(t,3,this.strokeColor,this.fillColor),this.pieces[3].shape.class="draggable"}}),Animation={images:[],init:function(e){Animation.container=e}},Interaction={getFramework:function(){return"paper"},images:[{id:"rotationArrow",src:"/assets/animations/tangram/tangram_ok.png"}],init:function(e){Interaction.container=e,Main.setObjective(""),Interaction.paper={width:$(e).width(),height:$(e).height()},Interaction.appendStatus({bottom:"25px",right:"200px",width:"300px",textAlign:"center"}),Interaction.appendButton({bottom:"15px",right:"50px"});var t=new Tool;t.onMouseDown=function(e){e.item?(this.item=e.item,this.item.class=="rotatable"?(this.rotate=!0,this.lastAngle="wx"):this.item.class=="draggable"&&(this.drag=!0,this.totalDelta=new Point(0,0),this.firstPosition=this.item.position,Interaction.rotatableItem&&(Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.rotatableItem.fillColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem.strokeColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem=null))):Interaction.rotatableItem&&(Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.rotatableItem.fillColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem.strokeColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem=null)},t.onMouseDrag=function(e){if(this.drag==1){var t=new Point(this.firstPosition.add(this.totalDelta).add(e.delta));this.item.parentObject.setPos(t),this.totalDelta=this.totalDelta.add(e.delta)}else if(this.rotate==1){var n=Util.findAngle(e.point.x,e.point.y,Interaction.rotatableItem.parentObject.centerPoint.x,Interaction.rotatableItem.parentObject.centerPoint.y),r=n;r=Util.radianToDegree(r),this.lastAngle=="wx"&&(this.lastAngle=r),this.item.rotate(this.lastAngle-r,Interaction.rotatableItem.parentObject.centerPoint),Interaction.rotatableItem.parentObject.setRotation(this.lastAngle-r),this.lastAngle=r}},t.onMouseUp=function(e){if(this.item&&this.item.class=="draggable"){Interaction.rotatableItem=this.item,Interaction.rotItems=new Group;for(var t=0;t<this.item.parentObject.pointsArr.length;t++){var n=this.item.parentObject.pointsArr[t].findPointTo(this.item.parentObject.centerPoint,-10),r=Util.findAngle(this.item.parentObject.pointsArr[t].x,this.item.parentObject.pointsArr[t].y,this.item.position.x,this.item.position.y);r=Util.radianToDegree(r),r=225-r;var i=new Raster("rotationArrow");i.position=new Point(n),i.rotate(r,n);var s=new Path.Circle(n,10);s.fillColor="red",s.class="rotatable",s.opacity=0,Interaction.rotItems.addChild(s),Interaction.rotItems.addChild(i)}this.item.fillColor=interactionSelectedColors[Interaction.randomNumber],this.item.strokeColor=interactionSelectedColors[Interaction.randomNumber],Interaction.rotItems.class="rotatable"}this.drag=!1,this.item=null,this.rotate=!1},Interaction.setRandomGenerator(7),Interaction.prepareNextQuestion()},nextQuestion:function(e){Interaction.randomNumber=e;if(Interaction.tangram){for(var t=0;t<Interaction.tangram.pieces.length;t++)Interaction.tangram.pieces[t].shape.remove();Interaction.tangram=null}Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.tangram=new Tangram,Interaction.tangram.drawPieces(new Point(50.5,80.5),120,interactionColors[Interaction.randomNumber],interactionColors[Interaction.randomNumber]),Interaction.tangram.animatePieces(2e3)},preCheck:function(){},isAnswerCorrect:function(e){},onCorrectAnswer:function(){},onWrongAnswer:function(){},onFail:function(){}};
var Interaction={getFramework:function(){return"paper"},images:[{id:"rotationArrow",src:"/assets/animations/tangram/tangram_ok.png"},{id:"tangramBackground",src:"/assets/animations/tangram/tangram_zemin.jpg"},{id:"tangram_1",src:"/assets/animations/tangram/tangram_01.png"},{id:"tangram_2",src:"/assets/animations/tangram/tangram_02.png"},{id:"tangram_3",src:"/assets/animations/tangram/tangram_03.png"},{id:"tangram_4",src:"/assets/animations/tangram/tangram_04.png"},{id:"tangram_5",src:"/assets/animations/tangram/tangram_05.png"},{id:"tangram_6",src:"/assets/animations/tangram/tangram_06.png"},{id:"tangram_7",src:"/assets/animations/tangram/tangram_07.png"},{id:"tangram_8",src:"/assets/animations/tangram/tangram_08.png"},{id:"tangram_9",src:"/assets/animations/tangram/tangram_09.png"},{id:"tangram_10",src:"/assets/animations/tangram/tangram_10.png"},{id:"tangram_11",src:"/assets/animations/tangram/tangram_11.png"},{id:"tangram_12",src:"/assets/animations/tangram/tangram_12.png"},{id:"tangram_13",src:"/assets/animations/tangram/tangram_13.png"},{id:"tangram_14",src:"/assets/animations/tangram/tangram_14.png"},{id:"tangram_15",src:"/assets/animations/tangram/tangram_15.png"},{id:"tangram_16",src:"/assets/animations/tangram/tangram_16.png"},{id:"tangram_17",src:"/assets/animations/tangram/tangram_17.png"},{id:"tangram_18",src:"/assets/animations/tangram/tangram_18.png"},{id:"tangram_19",src:"/assets/animations/tangram/tangram_19.png"}],init:function(e){Interaction.container=e,Main.setObjective("Tangram parçalarını kullanarak, ortada verilmiş figürü oluşturunuz."),Interaction.paper={width:$(e).width(),height:$(e).height()},Interaction.background=new Raster("tangramBackground"),Interaction.background.position=new Point(317.5,149.5),$(Interaction.container).append('<button id="flip" class="flip_button" style="position:absolute;top:30px;right:55px;"></button>'),Interaction.appendStatus({top:"200px",left:"7px",width:"160px",height:"56px",textAlign:"center"}),Interaction.appendButton({bottom:"15px",right:"15px"}),generateTangramQuestions(),Interaction.setRandomGenerator(19),Interaction.prepareNextQuestion()},nextQuestion:function(e){Interaction.randomNumber=Util.randomInteger(0,5),$("#flip").css("opacity",.4),$("#flip").get(0).onclick=null,Interaction.questionPicture&&Interaction.questionPicture.remove(),Interaction.questionIndex=e+1,Interaction.questionPicture=new Raster("tangram_"+Interaction.questionIndex),Interaction.questionPicture.position=new Point(317.5,149.5),Interaction.currentQuestion=TangramQuestions[Interaction.questionIndex-1];if(Interaction.questionTangram)for(var t=0;t<Interaction.questionTangram.pieces.length;t++)Interaction.questionTangram.pieces[t].shape.remove();Interaction.questionTangram=null,Interaction.questionTangram=new Tangram,Interaction.questionTangram.drawPieces(new Point(0,0),120,interactionColors[Interaction.randomNumber],interactionColors[Interaction.randomNumber]);for(var t=0;t<7;t++)t==3&&Interaction.currentQuestion[3].flip==1&&Interaction.questionTangram.flipPiece4(),Interaction.questionTangram.pieces[t].setRotation(Interaction.questionTangram.pieces[t].currentAngle-Interaction.currentQuestion[t].angle),Interaction.questionTangram.pieces[t].setPos(Interaction.currentQuestion[t].point),Interaction.questionTangram.pieces[t].shape.opacity=0;if(Interaction.tangram)for(var t=0;t<Interaction.tangram.pieces.length;t++)Interaction.tangram.pieces[t].shape.remove();Interaction.tangram=null,Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.dropArea=new Path.Rectangle(new Point(175,2),new Size(285,295)),Interaction.dropArea.fillColor="#f7f8f8",Interaction.dropArea.class="dropArea",Interaction.dropArea.opacity=0,Interaction.tangram=new Tangram,Interaction.tangram.drawPieces(new Point(28.5,25.5),120,interactionColors[Interaction.randomNumber],interactionColors[Interaction.randomNumber]),Interaction.tangram.animatePieces(750),setTimeout("Interaction.createTool()",2e3)},preCheck:function(){},isAnswerCorrect:function(e){var t=0;for(var n=0;n<Interaction.tangram.pieces.length;n++)Interaction.tangram.pieces[n].shape.isSnapped==1&&(t+=1);return t==Interaction.tangram.pieces.length?!0:!1},onCorrectAnswer:function(){Interaction.pause(),Interaction.rotItems&&Interaction.rotItems.remove();for(var e=0;e<Interaction.tangram.pieces.length;e++)Interaction.tangram.pieces[e].shape.opacity=0;for(var t=0;t<Interaction.questionTangram.pieces.length;t++)Interaction.questionTangram.pieces[t].shape.opacity=1,Interaction.questionTangram.pieces[t].shape.animate({style:{strokeColor:correctAnswerBorder},duration:1e3,delay:500,animationType:"easeInOutQuad",callback:function(){Interaction.resume()}})},onWrongAnswer:function(){},onFail:function(){Interaction.setStatus("Yanlış cevap, doğrusu yanda gösterilmiştir!",!1),Interaction.pause(),Interaction.rotItems&&Interaction.rotItems.remove();for(var e=0;e<Interaction.tangram.pieces.length;e++)Interaction.tangram.pieces[e].shape.opacity=0;for(var t=0;t<Interaction.questionTangram.pieces.length;t++)Interaction.questionTangram.pieces[t].shape.opacity=1,Interaction.questionTangram.pieces[t].shape.animate({style:{strokeColor:correctAnswerBorder},duration:1e3,delay:500,animationType:"easeInOutQuad",callback:function(){Interaction.resume()}})},createTool:function(){var e=new Tool;e.onMouseDown=function(e){e.item?(this.item=e.item,this.item.class=="rotatable"?(this.rotate=!0,this.lastAngle="wx"):this.item.class=="draggable"?(this.drag=!0,this.totalDelta=new Point(0,0),this.firstPosition=this.item.position,Interaction.rotatableItem&&(Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.rotatableItem.fillColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem.strokeColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem=null,$("#flip").css("opacity",.4),$("#flip").get(0).onclick=null)):Interaction.rotatableItem&&(Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.rotatableItem.fillColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem.strokeColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem=null,$("#flip").css("opacity",.4),$("#flip").get(0).onclick=null)):Interaction.rotatableItem&&(Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.rotatableItem.fillColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem.strokeColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem=null,$("#flip").css("opacity",.4),$("#flip").get(0).onclick=null)},e.onMouseMove=function(e){},e.onMouseDrag=function(e){if(this.drag==1){var t=new Point(this.firstPosition.add(this.totalDelta).add(e.delta));this.item.parentObject.setPos(t),this.totalDelta=this.totalDelta.add(e.delta)}else if(this.rotate==1){var n=Util.findAngle(e.point.x,e.point.y,Interaction.rotatableItem.parentObject.centerPoint.x,Interaction.rotatableItem.parentObject.centerPoint.y),r=n;r=Util.radianToDegree(r),this.lastAngle=="wx"&&(this.lastAngle=r),this.item.rotate(this.lastAngle-r,Interaction.rotatableItem.parentObject.centerPoint),Interaction.rotatableItem.parentObject.setRotation(this.lastAngle-r),this.lastAngle=r}},e.onMouseUp=function(e){if(this.item){if(this.rotate==1&&Interaction.rotatableItem){Interaction.rotatableItem.isSnapped==1&&(Interaction.rotatableItem.isSnapped=!1);for(var t=0;t<Interaction.questionTangram.pieces.length;t++)Interaction.rotatableItem.parentObject.trySnapTo(Interaction.questionTangram.pieces[t]);Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.rotItems=new Group;for(var t=0;t<Interaction.rotatableItem.parentObject.pointsArr.length;t++){var n=Interaction.rotatableItem.parentObject.pointsArr[t].findPointTo(Interaction.rotatableItem.parentObject.centerPoint,-10),r=Util.findAngle(Interaction.rotatableItem.parentObject.pointsArr[t].x,Interaction.rotatableItem.parentObject.pointsArr[t].y,Interaction.rotatableItem.position.x,Interaction.rotatableItem.position.y);r=Util.radianToDegree(r),r=225-r;var i=new Raster("rotationArrow");i.position=new Point(n),i.rotate(r,n);var s=new Path.Circle(n,10);s.fillColor="red",s.class="rotatable",s.opacity=0,Interaction.rotItems.addChild(s),Interaction.rotItems.addChild(i)}Interaction.rotatableItem.fillColor=interactionSelectedColors[Interaction.randomNumber],Interaction.rotatableItem.strokeColor=interactionSelectedColors[Interaction.randomNumber],Interaction.rotItems.class="rotatable"}if(this.item.class=="draggable"){var o=0;for(var t=0;t<this.item.parentObject.pointsArr.length;t++)Interaction.dropArea.hitTest(this.item.parentObject.pointsArr[t])&&(o+=1);if(o==this.item.parentObject.pointsArr.length){Interaction.rotatableItem=this.item,this.item.parentObject.myType==3&&($("#flip").css("opacity",1),$("#flip").get(0).onclick=flipSelectedItem),this.item.isSnapped==1&&(this.item.isSnapped=!1);for(var t=0;t<7;t++)this.item.parentObject.trySnapTo(Interaction.questionTangram.pieces[t]);Interaction.rotItems=new Group;for(var t=0;t<this.item.parentObject.pointsArr.length;t++){var n=this.item.parentObject.pointsArr[t].findPointTo(this.item.parentObject.centerPoint,-10),r=Util.findAngle(this.item.parentObject.pointsArr[t].x,this.item.parentObject.pointsArr[t].y,this.item.position.x,this.item.position.y);r=Util.radianToDegree(r),r=225-r;var i=new Raster("rotationArrow");i.position=new Point(n),i.rotate(r,n);var s=new Path.Circle(n,10);s.fillColor="red",s.class="rotatable",s.opacity=0,Interaction.rotItems.addChild(s),Interaction.rotItems.addChild(i)}this.item.fillColor=interactionSelectedColors[Interaction.randomNumber],this.item.strokeColor=interactionSelectedColors[Interaction.randomNumber],Interaction.rotItems.class="rotatable"}else this.item.parentObject.myType==3&&this.item.parentObject.isFlipped==1&&flipSelectedItem(),this.item.parentObject.myType==3?(this.item=Interaction.tangram.pieces[3].shape,this.item.parentObject.setRotation(this.item.parentObject.currentAngle-this.item.parentObject.originalAngle),this.item.parentObject.setPos(this.item.parentObject.originalPosition),Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.rotatableItem&&(Interaction.rotatableItem.fillColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem.strokeColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem=null),$("#flip").css("opacity",.4),$("#flip").get(0).onclick=null):(this.item.parentObject.setRotation(this.item.parentObject.currentAngle-this.item.parentObject.originalAngle),this.item.parentObject.setPos(this.item.parentObject.originalPosition)),this.item.isSnapped==1&&(this.item.isSnapped=!1)}}this.drag=!1,this.item=null,this.rotate=!1},e.activate()}};
var Interaction={getFramework:function(){return"paper"},images:[{id:"rotationArrow",src:"/assets/animations/tangram/tangram_ok.png"}],init:function(e){Interaction.container=e,Main.setObjective(""),Interaction.paper={width:$(e).width(),height:$(e).height()},Interaction.appendStatus({bottom:"25px",right:"200px",width:"300px",textAlign:"center"}),Interaction.appendButton({bottom:"15px",right:"50px"});var t=new Tool;t.onMouseDown=function(e){e.item?(this.item=e.item,this.item.class=="rotatable"?(this.rotate=!0,this.lastAngle="wx"):this.item.class=="draggable"&&(this.drag=!0,this.totalDelta=new Point(0,0),this.firstPosition=this.item.position,Interaction.rotatableItem&&(Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.rotatableItem.fillColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem.strokeColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem=null))):Interaction.rotatableItem&&(Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.rotatableItem.fillColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem.strokeColor=interactionColors[Interaction.randomNumber],Interaction.rotatableItem=null)},t.onMouseDrag=function(e){if(this.drag==1){var t=new Point(this.firstPosition.add(this.totalDelta).add(e.delta));this.item.parentObject.setPos(t),this.totalDelta=this.totalDelta.add(e.delta)}else if(this.rotate==1){var n=Util.findAngle(e.point.x,e.point.y,Interaction.rotatableItem.parentObject.centerPoint.x,Interaction.rotatableItem.parentObject.centerPoint.y),r=n;r=Util.radianToDegree(r),this.lastAngle=="wx"&&(this.lastAngle=r),this.item.rotate(this.lastAngle-r,Interaction.rotatableItem.parentObject.centerPoint),Interaction.rotatableItem.parentObject.setRotation(this.lastAngle-r),this.lastAngle=r}},t.onMouseUp=function(e){if(this.item&&this.item.class=="draggable"){Interaction.rotatableItem=this.item,Interaction.rotItems=new Group;for(var t=0;t<this.item.parentObject.pointsArr.length;t++){var n=this.item.parentObject.pointsArr[t].findPointTo(this.item.parentObject.centerPoint,-10),r=Util.findAngle(this.item.parentObject.pointsArr[t].x,this.item.parentObject.pointsArr[t].y,this.item.position.x,this.item.position.y);r=Util.radianToDegree(r),r=225-r;var i=new Raster("rotationArrow");i.position=new Point(n),i.rotate(r,n);var s=new Path.Circle(n,10);s.fillColor="red",s.class="rotatable",s.opacity=0,Interaction.rotItems.addChild(s),Interaction.rotItems.addChild(i)}this.item.fillColor=interactionSelectedColors[Interaction.randomNumber],this.item.strokeColor=interactionSelectedColors[Interaction.randomNumber],Interaction.rotItems.class="rotatable"}this.drag=!1,this.item=null,this.rotate=!1},Interaction.setRandomGenerator(7),Interaction.prepareNextQuestion()},nextQuestion:function(e){Interaction.randomNumber=e;if(Interaction.tangram){for(var t=0;t<Interaction.tangram.pieces.length;t++)Interaction.tangram.pieces[t].shape.remove();Interaction.tangram=null}Interaction.rotItems&&Interaction.rotItems.remove(),Interaction.tangram=new Tangram,Interaction.tangram.drawPieces(new Point(50.5,80.5),120,interactionColors[Interaction.randomNumber],interactionColors[Interaction.randomNumber]),Interaction.tangram.animatePieces(2e3)},preCheck:function(){},isAnswerCorrect:function(e){},onCorrectAnswer:function(){},onWrongAnswer:function(){},onFail:function(){}};